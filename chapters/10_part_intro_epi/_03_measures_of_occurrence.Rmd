# Measures of Occurrence

<!-- 
Hidden comments placeholder
---------------------------

For more population plot code see: Dropbox/Teaching/epi_3_public/modules/graphics/population_plots.Rmd

To preview:
bookdown::preview_chapter("chapters/10_part_intro_epi/_03_measures_of_occurrence.Rmd")

Copy and paste:
ðŸ‘†**Here's what we did above:**

-->

::: under-construction
`r fontawesome::fa("hammer", fill = "#000000", height="1em")` This chapter is under heavy development and may still undergo significant changes.
:::

```{r measures_of_occurrence_load_helper_functions, echo=FALSE}
# Adding some helper functions to help with population plots.
# Set everything to echo=FALSE. The goal here isn't to teach learners how to make population plots. It is simply to use them as a visual aid for learning about populations and samples.
source("../../R/templates.R") # For colors
source("../../R/sample_ny.R") # To make sampling easier
source("../../R/make_pop.R")  # To make an example population
source("../../R/plot_pop.R")  # To make a population plot
```

Perhaps the most basic measure of occurrence we can use. How many people have the characteristic or have experienced the event we are interested in? That is, we simply count the number of people in our sample who experience the event of interest. 

```{r echo=FALSE}
# Create a population
set.seed(123)
pop <- make_pop(
  n_total = 1000,
  prob_exposed = 0.5,
  prob_outcome_exposed = 0.5,
  prob_outcome_unexposed = 0.1,
  arrange = TRUE
)
```

```{r echo=FALSE}
# Plot it
pop %>% 
  plot_pop(p_size = 3)
```

<!-- I would like to add counts to the facet ribbons -->

```{r echo=FALSE}
# Plot it with facets
pop %>% 
  plot_pop(p_size = 3) +
  facet_wrap(vars(e_o_f)) 
```

# Counts

```{r echo=FALSE}
set.seed(123)
# Create a 10x10 group of people
pop <- expand_grid(x = 1:10, y = 1:10)
pop$outcome <- sample_ny()
ggplot(pop, aes(x, y)) + 
  geom_point(size = 10, aes(color = outcome)) +
  scale_color_manual("Event", values = c(u_blue, u_orange)) +
  theme(
    panel.background = element_blank(),
    axis.title = element_blank(),
    axis.text = element_blank(),
    axis.ticks = element_blank()
  )

# Print for PowerPoint
ggsave("/users/bradcannell/Desktop/count_plot.png", width = 7.29, height = 4.51)
```

```{r echo=FALSE}
set.seed(123)
# Create a 10x10 group of people
pop <- expand_grid(x = 1:10, y = 1:10)
pop$outcome <- sample_ny()
# Align colors
pop %>% 
  arrange(desc(outcome)) %>% 
  # Renumber the grid
  mutate(
    x = rep(1:10, each = 10),
    y = rep(1:10, 10)
  ) %>% 
ggplot(aes(x, y)) + 
  geom_point(size = 10, aes(color = outcome)) +
  scale_color_manual("Event", values = c(u_blue, u_orange)) +
  theme(
    panel.background = element_blank(),
    axis.title = element_blank(),
    axis.text = element_blank(),
    axis.ticks = element_blank()
  )

# Print for PowerPoint
ggsave("/users/bradcannell/Desktop/count_plot_arranged.png", width = 7.29, height = 4.51)
```

```{r echo=FALSE}
# Try adding numbers
set.seed(123)
# Create a 10x10 group of people
pop <- expand_grid(x = 1:10, y = 1:10)
pop$outcome <- sample_ny()
# Align colors
pop %>% 
  arrange(desc(outcome)) %>% 
  # Renumber the grid
  mutate(
    x = rep(1:10, each = 10),
    y = rep(1:10, 10)
  ) %>% 
  # Create id numbers. The group_by is to make them appear in the order
  # we would typically count them in on the plot.
  mutate(id = row_number()) %>% 
  group_by(x) %>%
  mutate(id = rev(id)) %>% 
  ungroup() %>% 
ggplot(aes(x, y)) + 
  geom_point(size = 10, aes(color = outcome)) +
  geom_text(aes(label = id), color = "white") +
  scale_color_manual("Event", values = c(u_blue, u_orange)) +
  theme(
    panel.background = element_blank(),
    axis.title = element_blank(),
    axis.text = element_blank(),
    axis.ticks = element_blank()
  )

# Print for PowerPoint
ggsave("/users/bradcannell/Desktop/count_plot_arranged_numbered.png", width = 7.29, height = 4.51)
```


```{r eval=FALSE, echo=FALSE}
# For PowerPoint
table(pop$outcome)
```




