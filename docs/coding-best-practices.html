<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Coding best practices | R for Epidemiology</title>
  <meta name="description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Coding best practices | R for Epidemiology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r4epi/" />
  
  <meta property="og:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="github-repo" content="brad-cannell/r4epi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Coding best practices | R for Epidemiology" />
  
  <meta name="twitter:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2020-05-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-projects.html"/>
<link rel="next" href="using-pipes.html"/>
<script src="libs/header-attrs-2.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Epidemiology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="part"><span><b>I Getting Started</b></span></li>
<li class="chapter" data-level="1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-mac"><i class="fa fa-check"></i><b>1.1</b> Download and install on a Mac</a></li>
<li class="chapter" data-level="1.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-pc"><i class="fa fa-check"></i><b>1.2</b> Download and install on a PC</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>2</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="what-is-r.html"><a href="what-is-r.html#what-is-data"><i class="fa fa-check"></i><b>2.1</b> What is data?</a></li>
<li class="chapter" data-level="2.2" data-path="what-is-r.html"><a href="what-is-r.html#what-is-r-1"><i class="fa fa-check"></i><b>2.2</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="what-is-r.html"><a href="what-is-r.html#accessing-data"><i class="fa fa-check"></i><b>2.2.1</b> Accessing data</a></li>
<li class="chapter" data-level="2.2.2" data-path="what-is-r.html"><a href="what-is-r.html#managing-data"><i class="fa fa-check"></i><b>2.2.2</b> Managing data</a></li>
<li class="chapter" data-level="2.2.3" data-path="what-is-r.html"><a href="what-is-r.html#analyzing-data"><i class="fa fa-check"></i><b>2.2.3</b> Analyzing data</a></li>
<li class="chapter" data-level="2.2.4" data-path="what-is-r.html"><a href="what-is-r.html#presenting-data"><i class="fa fa-check"></i><b>2.2.4</b> Presenting data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html"><i class="fa fa-check"></i><b>3</b> Navigating the RStudio interface</a>
<ul>
<li class="chapter" data-level="3.1" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-console"><i class="fa fa-check"></i><b>3.1</b> The console</a></li>
<li class="chapter" data-level="3.2" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-environment-pane"><i class="fa fa-check"></i><b>3.2</b> The environment pane</a></li>
<li class="chapter" data-level="3.3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-files-pane"><i class="fa fa-check"></i><b>3.3</b> The files pane</a></li>
<li class="chapter" data-level="3.4" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-source-pane"><i class="fa fa-check"></i><b>3.4</b> The source pane</a></li>
<li class="chapter" data-level="3.5" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#rstudio-preferences"><i class="fa fa-check"></i><b>3.5</b> RStudio preferences</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html"><i class="fa fa-check"></i><b>4</b> Speaking R’s language</a>
<ul>
<li class="chapter" data-level="4.1" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#r-is-a-language"><i class="fa fa-check"></i><b>4.1</b> R is a <em>language</em></a></li>
<li class="chapter" data-level="4.2" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#the-r-interpreter"><i class="fa fa-check"></i><b>4.2</b> The R interpreter</a></li>
<li class="chapter" data-level="4.3" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#errors"><i class="fa fa-check"></i><b>4.3</b> Errors</a></li>
<li class="chapter" data-level="4.4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#functions"><i class="fa fa-check"></i><b>4.4</b> Functions</a></li>
<li class="chapter" data-level="4.5" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#objects"><i class="fa fa-check"></i><b>4.5</b> Objects</a></li>
<li class="chapter" data-level="4.6" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#comments"><i class="fa fa-check"></i><b>4.6</b> Comments</a></li>
<li class="chapter" data-level="4.7" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#packages"><i class="fa fa-check"></i><b>4.7</b> Packages</a></li>
<li class="chapter" data-level="4.8" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#programming-style"><i class="fa fa-check"></i><b>4.8</b> Programming style</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lets-get-programming.html"><a href="lets-get-programming.html"><i class="fa fa-check"></i><b>5</b> Let’s get programming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#simulating-data"><i class="fa fa-check"></i><b>5.1</b> Simulating data</a></li>
<li class="chapter" data-level="5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vectors"><i class="fa fa-check"></i><b>5.2</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vector-types"><i class="fa fa-check"></i><b>5.2.1</b> Vector types</a></li>
<li class="chapter" data-level="5.2.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#double-vectors"><i class="fa fa-check"></i><b>5.2.2</b> Double vectors</a></li>
<li class="chapter" data-level="5.2.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#integer-vectors"><i class="fa fa-check"></i><b>5.2.3</b> Integer vectors</a></li>
<li class="chapter" data-level="5.2.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#logical-vectors"><i class="fa fa-check"></i><b>5.2.4</b> Logical vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#data-frames"><i class="fa fa-check"></i><b>5.3</b> Data frames</a></li>
<li class="chapter" data-level="5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#missing-data"><i class="fa fa-check"></i><b>5.4</b> Missing data</a></li>
<li class="chapter" data-level="5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#our-first-analysis"><i class="fa fa-check"></i><b>5.5</b> Our first analysis</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#manual-calculation-of-the-mean"><i class="fa fa-check"></i><b>5.5.1</b> Manual calculation of the mean</a></li>
<li class="chapter" data-level="5.5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#dollar-sign-notation"><i class="fa fa-check"></i><b>5.5.2</b> Dollar sign notation</a></li>
<li class="chapter" data-level="5.5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#bracket-notation"><i class="fa fa-check"></i><b>5.5.3</b> Bracket notation</a></li>
<li class="chapter" data-level="5.5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-sum-function"><i class="fa fa-check"></i><b>5.5.4</b> The sum function</a></li>
<li class="chapter" data-level="5.5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#nesting-functions"><i class="fa fa-check"></i><b>5.5.5</b> Nesting functions</a></li>
<li class="chapter" data-level="5.5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-length-function"><i class="fa fa-check"></i><b>5.5.6</b> The length function</a></li>
<li class="chapter" data-level="5.5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-mean-function"><i class="fa fa-check"></i><b>5.5.7</b> The mean function</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#some-common-errors"><i class="fa fa-check"></i><b>5.6</b> Some common errors</a></li>
<li class="chapter" data-level="5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#summary"><i class="fa fa-check"></i><b>5.7</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>II Coding Tools and Best Practices</b></span></li>
<li class="chapter" data-level="6" data-path="r-scripts.html"><a href="r-scripts.html"><i class="fa fa-check"></i><b>6</b> R scripts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-scripts.html"><a href="r-scripts.html#creating-r-scripts"><i class="fa fa-check"></i><b>6.1</b> Creating R scripts</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7</b> R markdown</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-markdown.html"><a href="r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>7.1</b> What is R markdown?</a></li>
<li class="chapter" data-level="7.2" data-path="r-markdown.html"><a href="r-markdown.html#why-use-r-markdown"><i class="fa fa-check"></i><b>7.2</b> Why use R markdown?</a></li>
<li class="chapter" data-level="7.3" data-path="r-markdown.html"><a href="r-markdown.html#create-an-r-markdown-file"><i class="fa fa-check"></i><b>7.3</b> Create an R markdown file</a></li>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html#yaml-headers"><i class="fa fa-check"></i><b>7.4</b> YAML headers</a></li>
<li class="chapter" data-level="7.5" data-path="r-markdown.html"><a href="r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>7.5</b> R code chunks</a></li>
<li class="chapter" data-level="7.6" data-path="r-markdown.html"><a href="r-markdown.html#markdown"><i class="fa fa-check"></i><b>7.6</b> Markdown</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-projects.html"><a href="r-projects.html"><i class="fa fa-check"></i><b>8</b> R projects</a></li>
<li class="chapter" data-level="9" data-path="coding-best-practices.html"><a href="coding-best-practices.html"><i class="fa fa-check"></i><b>9</b> Coding best practices</a>
<ul>
<li class="chapter" data-level="9.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#general-principles"><i class="fa fa-check"></i><b>9.1</b> General principles</a></li>
<li class="chapter" data-level="9.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#code-comments"><i class="fa fa-check"></i><b>9.2</b> Code comments</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#defining-key-variables"><i class="fa fa-check"></i><b>9.2.1</b> Defining key variables</a></li>
<li class="chapter" data-level="9.2.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#what-this-code-is-trying-to-accomplish"><i class="fa fa-check"></i><b>9.2.2</b> What this code is trying to accomplish</a></li>
<li class="chapter" data-level="9.2.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#why-i-chose-this-particular-strategy"><i class="fa fa-check"></i><b>9.2.3</b> Why I chose this particular strategy</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#style-guidelines"><i class="fa fa-check"></i><b>9.3</b> Style guidelines</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#object-variable-names"><i class="fa fa-check"></i><b>9.3.1</b> Object (variable) names</a></li>
<li class="chapter" data-level="9.3.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#use-names-that-are-informative"><i class="fa fa-check"></i><b>9.3.2</b> Use names that are informative</a></li>
<li class="chapter" data-level="9.3.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#file-names"><i class="fa fa-check"></i><b>9.3.3</b> File Names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="using-pipes.html"><a href="using-pipes.html"><i class="fa fa-check"></i><b>10</b> Using pipes</a>
<ul>
<li class="chapter" data-level="10.1" data-path="using-pipes.html"><a href="using-pipes.html#what-are-pipes"><i class="fa fa-check"></i><b>10.1</b> What are pipes?</a></li>
<li class="chapter" data-level="10.2" data-path="using-pipes.html"><a href="using-pipes.html#how-do-pipes-work"><i class="fa fa-check"></i><b>10.2</b> How do pipes work?</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="using-pipes.html"><a href="using-pipes.html#keyboard-shortcut"><i class="fa fa-check"></i><b>10.2.1</b> Keyboard shortcut</a></li>
<li class="chapter" data-level="10.2.2" data-path="using-pipes.html"><a href="using-pipes.html#pipe-style"><i class="fa fa-check"></i><b>10.2.2</b> Pipe style</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="using-pipes.html"><a href="using-pipes.html#final-thought-on-pipes"><i class="fa fa-check"></i><b>10.3</b> Final thought on pipes</a></li>
</ul></li>
<li class="part"><span><b>III Descriptive Analysis</b></span></li>
<li class="chapter" data-level="11" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>11</b> Overview</a>
<ul>
<li class="chapter" data-level="11.1" data-path="overview.html"><a href="overview.html#measurement"><i class="fa fa-check"></i><b>11.1</b> Measurement</a></li>
<li class="chapter" data-level="11.2" data-path="overview.html"><a href="overview.html#descriptive-analysis"><i class="fa fa-check"></i><b>11.2</b> Descriptive analysis</a></li>
</ul></li>
<li class="part"><span><b>IV Appendix</b></span></li>
<li class="chapter" data-level="" data-path="appendix-a-glossary.html"><a href="appendix-a-glossary.html"><i class="fa fa-check"></i>Appendix A: Glossary</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Epidemiology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="coding-best-practices" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Coding best practices</h1>
<p>At this point in the book, we’ve talked a little bit about what R is. We’ve also talked about the RStudio IDE and took a quick tour around its four main panes. Finally, we wrote our first little R program, which simulated and analyzed some data about a hypothetical class. Writing and executing this R program officially made you an <em>R programmer</em>. 🏆</p>
<p>However, you should know that not all R code is equally “good” – even when it’s equally valid. What do I mean that? Well, we already discussed the R interpreter and R syntax in the chapter on speaking R’s language. Any code that uses R syntax that the R interpreter can understand is valid R code. But, is the R interpreter the only one reading your R code? No way! In epidemiology, we collaborate with others <em>all the time</em>! That collaboration is going to be much more efficient and enjoyable when there is good communication – including R code that is easy to read and understand. Further, you will often need to read and/or reuse code you wrote weeks, months, or years after you wrote it. You may be amazed at how quickly you forget what you did and/or why you did it that way. Therefore, in addition to writing valid R code, this chapter is about writing “good” R code – code that easily and efficiently communicates ideas to <em>humans</em>.</p>
<p>Of course, “good code” is inevitably somewhat subjective. Reasonable people can have a difference of opinion about the best way to write code that is easy to read and understand. Additionally, reasonable people can have a difference of opinion about when code is “good enough.” For these reasons, I’m going to offer several “suggestions” about writing good R code below, but only two general principles, which I believe most R programmers would agree with.</p>
<div id="general-principles" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> General principles</h2>
<ol style="list-style-type: decimal">
<li><p><strong>Comment your code</strong>. Whether you intend to share your code with other people or not, make sure to write lots of comments about what you are trying to accomplish in each section of your code and why.</p></li>
<li><p><strong>Use a style consistently</strong>. I’m going to suggest several guidelines for styling your R code below, but you may find that you prefer to style your R code in a different way. Whether you adopt my suggested style or not, please find or create a style that works for you and your collaborators and use it consistently.</p></li>
</ol>
</div>
<div id="code-comments" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Code comments</h2>
<p>There isn’t a lot of specific advice that I can give here because comments are so idiosyncratic to the task at hand. So, I think the best I can do at this point is to offer a few examples for you to think about.</p>
<div id="defining-key-variables" class="section level3" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Defining key variables</h3>
<p>As we will discuss below, variables should have names that are concise, yet informative. However, the data you receive in the real world will not always include informative variable names. Even when someone has given the variables informative names, there may still be contextual information about the variables that is important to understand for data management and analysis. Some data sets will come with something called a <strong>codebook</strong> or <strong>data dictionary</strong>. These are text files that contain information about the data set that are intended to provide you with some of that more detailed information. For example, the survey questions that were used to capture the values in each variable or what category each value in a categorical variable represents. However, real data sets don’t <em>always</em> come with a data dictionary, and even when they do, it can be convenient to have some of that contextual information close at hand, right next to your code. Therefore, I will sometimes comment my code with information about variables that are important for the analysis at hand. Here is an example from an administrative data set I was using for an analysis:</p>
<pre eval="FALSE"><code>* **Case number definition**

    - Case / investigation number.

* **Intake stage definition**

    - An ID number assigned to the Intake. Each Intake (Report) has its 
      own number. A case may have more than one intake. For example, case # 12345 
      has two intakes associated with it, 9 days apart, each with their own ID 
      number. Each of the two intakes associated with this case have multiple 
      allegations.

* **Intake start definition**

    - An intake is the submission or receipt of a report - a phone call or 
      web-based. The Intake Start Date refers to the date the staff member 
      opens a new record to begin recording the report.</code></pre>
</div>
<div id="what-this-code-is-trying-to-accomplish" class="section level3" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> What this code is trying to accomplish</h3>
<p>Sometimes, it is obvious what a section of code literally <em>does</em>. but not so obvious why you’re doing it. I often try to write some comments around my code about what it’s trying to ultimately accomplish and why. For example:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="coding-best-practices.html#cb93-1"></a><span class="co">## Standardize character strings</span></span>
<span id="cb93-2"><a href="coding-best-practices.html#cb93-2"></a></span>
<span id="cb93-3"><a href="coding-best-practices.html#cb93-3"></a><span class="co"># Because we will merge this data with other data sets in the future based on </span></span>
<span id="cb93-4"><a href="coding-best-practices.html#cb93-4"></a><span class="co"># character strings (e.g., name), we need to go ahead and standardize their </span></span>
<span id="cb93-5"><a href="coding-best-practices.html#cb93-5"></a><span class="co"># formats here. This will prevent mismatches during the merges. Specifically, </span></span>
<span id="cb93-6"><a href="coding-best-practices.html#cb93-6"></a><span class="co"># we:</span></span>
<span id="cb93-7"><a href="coding-best-practices.html#cb93-7"></a></span>
<span id="cb93-8"><a href="coding-best-practices.html#cb93-8"></a><span class="co"># 1. Transform all characters to lower case   </span></span>
<span id="cb93-9"><a href="coding-best-practices.html#cb93-9"></a><span class="co"># 2. Remove any special characters (e.g., hyphens, periods)   </span></span>
<span id="cb93-10"><a href="coding-best-practices.html#cb93-10"></a><span class="co"># 3. Remove trailing spaces (e.g., &quot;John Smith &quot;)   </span></span>
<span id="cb93-11"><a href="coding-best-practices.html#cb93-11"></a><span class="co"># 4. Remove double spaces (e.g., &quot;John  Smith&quot;)  </span></span>
<span id="cb93-12"><a href="coding-best-practices.html#cb93-12"></a></span>
<span id="cb93-13"><a href="coding-best-practices.html#cb93-13"></a>vars &lt;-<span class="st"> </span><span class="kw">quos</span>(full_name, first_name, middle_name, last_name, county, address, city)</span>
<span id="cb93-14"><a href="coding-best-practices.html#cb93-14"></a></span>
<span id="cb93-15"><a href="coding-best-practices.html#cb93-15"></a>client_data &lt;-<span class="st"> </span>client_data <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb93-16"><a href="coding-best-practices.html#cb93-16"></a><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="op">!!!</span><span class="st"> </span>vars), tolower) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb93-17"><a href="coding-best-practices.html#cb93-17"></a><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="op">!!!</span><span class="st"> </span>vars), stringr<span class="op">::</span>str_replace_all, <span class="st">&quot;[^a-zA-Z</span><span class="ch">\\</span><span class="st">d</span><span class="ch">\\</span><span class="st">s]&quot;</span>, <span class="st">&quot; &quot;</span>) <span class="op">%&gt;%</span></span>
<span id="cb93-18"><a href="coding-best-practices.html#cb93-18"></a><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="op">!!!</span><span class="st"> </span>vars), stringr<span class="op">::</span>str_replace, <span class="st">&quot;[[:blank:]]$&quot;</span>, <span class="st">&quot;&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb93-19"><a href="coding-best-practices.html#cb93-19"></a><span class="st">  </span><span class="kw">mutate_at</span>(<span class="kw">vars</span>(<span class="op">!!!</span><span class="st"> </span>vars), stringr<span class="op">::</span>str_replace_all, <span class="st">&quot;[[:blank:]]{2,}&quot;</span>, <span class="st">&quot; &quot;</span>)</span>
<span id="cb93-20"><a href="coding-best-practices.html#cb93-20"></a></span>
<span id="cb93-21"><a href="coding-best-practices.html#cb93-21"></a><span class="kw">rm</span>(vars)</span></code></pre></div>
</div>
<div id="why-i-chose-this-particular-strategy" class="section level3" number="9.2.3">
<h3><span class="header-section-number">9.2.3</span> Why I chose this particular strategy</h3>
<p>In addition to writing comments about why I did something, I sometimes write comments about why I did it <em>instead of</em> something else. Doing this can save you from having to relearn lessons you’ve already learned through trial and error but forgot. For example:</p>
<pre eval="FALSE"><code>### Create exact match dummy variables

* We reshape the data from long to wide to create these variables because it significantly decreases computation time compared to doing this as a group_by operation on the long data. </code></pre>
</div>
</div>
<div id="style-guidelines" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Style guidelines</h2>
<p>UsInG c_o_n_s_i_s_t_e_n_t STYLE i.s. import-ant!</p>
<blockquote>
<p>Good coding style is like using correct punctuation. You can manage without it, but it sure makes things easier to read. As with styles of punctuation, there are many possible variations… Good style is important because while your code only has one author, it’ll usually have multiple readers. This is especially true when you’re writing code with others. In that case, it’s a good idea to agree on a common style up-front. Since no style is strictly better than another, working with others may mean that you’ll need to sacrifice some preferred aspects of your style. <span class="citation"><a href="#ref-Wickham2019-yt" role="doc-biblioref">4</a></span></p>
</blockquote>
<p>Below, I outline the style that I and my collaborators typically use when writing R code for a research project. It generally follows <a href="https://style.tidyverse.org/">the Tidyverse style guide</a>, <em>which I strongly suggest you read</em>. Outside of my class, you don’t have to use my style, but you really should find or create a style that works for you and your collaborators and use it consistently.</p>
<div id="object-variable-names" class="section level3" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> Object (variable) names</h3>
<p>In addition to the object naming guidance given in <a href="https://style.tidyverse.org/files.html#names">the Tidyverse style guide</a>, I suggest the following object naming conventions.</p>
</div>
<div id="use-names-that-are-informative" class="section level3" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> Use names that are informative</h3>
<p>Using names that are informative and easy to remember will make life easier for everyone who uses your data – including you!</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="coding-best-practices.html#cb95-1"></a><span class="co"># Uninformative names - Don&#39;t do this</span></span>
<span id="cb95-2"><a href="coding-best-practices.html#cb95-2"></a>x1</span>
<span id="cb95-3"><a href="coding-best-practices.html#cb95-3"></a>var1</span>
<span id="cb95-4"><a href="coding-best-practices.html#cb95-4"></a></span>
<span id="cb95-5"><a href="coding-best-practices.html#cb95-5"></a><span class="co"># Informative names</span></span>
<span id="cb95-6"><a href="coding-best-practices.html#cb95-6"></a>employed</span>
<span id="cb95-7"><a href="coding-best-practices.html#cb95-7"></a>married</span>
<span id="cb95-8"><a href="coding-best-practices.html#cb95-8"></a>education</span></code></pre></div>
<div id="use-names-that-are-concise" class="section level4" number="9.3.2.1">
<h4><span class="header-section-number">9.3.2.1</span> Use names that are concise</h4>
<p>You want names to be informative, but you don’t want them to be overly verbose. Really long names create more work for you and more opportunities for typos. In fact, I recommend using a single word when you can.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="coding-best-practices.html#cb96-1"></a><span class="co"># Write out entire name of the study the data comes from - Don&#39;t do this</span></span>
<span id="cb96-2"><a href="coding-best-practices.html#cb96-2"></a>womens_health_initiative</span>
<span id="cb96-3"><a href="coding-best-practices.html#cb96-3"></a></span>
<span id="cb96-4"><a href="coding-best-practices.html#cb96-4"></a><span class="co"># Write out an acronym for the study the data comes from - assuming everyone </span></span>
<span id="cb96-5"><a href="coding-best-practices.html#cb96-5"></a><span class="co"># will be familiar with this acronym - Do this</span></span>
<span id="cb96-6"><a href="coding-best-practices.html#cb96-6"></a>whi</span></code></pre></div>
</div>
<div id="use-all-lowercase-letters" class="section level4" number="9.3.2.2">
<h4><span class="header-section-number">9.3.2.2</span> Use all lowercase letters</h4>
<p>Remember, R is case-sensitive, which means that myStudyData and mystudydata are different things to R. Capitalizing letters in your file name just creates additional details to remember and potentially mess up. Just keep it simple and stick with lowercase letters.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="coding-best-practices.html#cb97-1"></a><span class="co"># All upper case - so aggressive - Don&#39;t use</span></span>
<span id="cb97-2"><a href="coding-best-practices.html#cb97-2"></a>MYSTUDYDATA</span>
<span id="cb97-3"><a href="coding-best-practices.html#cb97-3"></a></span>
<span id="cb97-4"><a href="coding-best-practices.html#cb97-4"></a><span class="co"># Camel case - Don&#39;t use</span></span>
<span id="cb97-5"><a href="coding-best-practices.html#cb97-5"></a>myStudyData</span>
<span id="cb97-6"><a href="coding-best-practices.html#cb97-6"></a></span>
<span id="cb97-7"><a href="coding-best-practices.html#cb97-7"></a><span class="co"># All lowercase - Use</span></span>
<span id="cb97-8"><a href="coding-best-practices.html#cb97-8"></a>my_study_data</span></code></pre></div>
</div>
<div id="separate-multiple-words-with-underscores." class="section level4" number="9.3.2.3">
<h4><span class="header-section-number">9.3.2.3</span> Separate multiple words with underscores.</h4>
<p>Sometimes you really just need to use multiple words to name your object. In those cases, I suggested separating words with an underscore.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="coding-best-practices.html#cb98-1"></a><span class="co"># Multiple words running together - Hard to read - Don&#39;t use</span></span>
<span id="cb98-2"><a href="coding-best-practices.html#cb98-2"></a>mycancerdata</span>
<span id="cb98-3"><a href="coding-best-practices.html#cb98-3"></a></span>
<span id="cb98-4"><a href="coding-best-practices.html#cb98-4"></a><span class="co"># Camel case - easier to read, but more to remember and mess up - Don&#39;t use</span></span>
<span id="cb98-5"><a href="coding-best-practices.html#cb98-5"></a>myCancerData</span>
<span id="cb98-6"><a href="coding-best-practices.html#cb98-6"></a></span>
<span id="cb98-7"><a href="coding-best-practices.html#cb98-7"></a><span class="co"># Separate with periods - easier to read, but doesn&#39;t translate well to many </span></span>
<span id="cb98-8"><a href="coding-best-practices.html#cb98-8"></a><span class="co"># other languages. For example, SAS won&#39;t accept variable names with </span></span>
<span id="cb98-9"><a href="coding-best-practices.html#cb98-9"></a><span class="co"># periods - Don&#39;t use</span></span>
<span id="cb98-10"><a href="coding-best-practices.html#cb98-10"></a>my.cancer.data</span>
<span id="cb98-11"><a href="coding-best-practices.html#cb98-11"></a></span>
<span id="cb98-12"><a href="coding-best-practices.html#cb98-12"></a><span class="co"># Separate with underscores - Use</span></span>
<span id="cb98-13"><a href="coding-best-practices.html#cb98-13"></a>my_cancer_data</span></code></pre></div>
</div>
<div id="prefix-the-names-of-similar-variables" class="section level4" number="9.3.2.4">
<h4><span class="header-section-number">9.3.2.4</span> Prefix the names of similar variables</h4>
<p>When you have multiple related variables, it’s good practice to start their variable names with the same word. It makes these related variables easier to find and work with in the future if we need to do something with all of them at once. We can sort our variable names alphabetically to easily find find them. Additionally, we can use variable selectors like <code>starts_with("name")</code> to perform some operation on all of them at once.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="coding-best-practices.html#cb99-1"></a><span class="co"># Don&#39;t use</span></span>
<span id="cb99-2"><a href="coding-best-practices.html#cb99-2"></a>first_name</span>
<span id="cb99-3"><a href="coding-best-practices.html#cb99-3"></a>last_name</span>
<span id="cb99-4"><a href="coding-best-practices.html#cb99-4"></a>middle_name</span>
<span id="cb99-5"><a href="coding-best-practices.html#cb99-5"></a></span>
<span id="cb99-6"><a href="coding-best-practices.html#cb99-6"></a><span class="co"># Use</span></span>
<span id="cb99-7"><a href="coding-best-practices.html#cb99-7"></a>name_first</span>
<span id="cb99-8"><a href="coding-best-practices.html#cb99-8"></a>name_last</span>
<span id="cb99-9"><a href="coding-best-practices.html#cb99-9"></a>name_middle</span>
<span id="cb99-10"><a href="coding-best-practices.html#cb99-10"></a></span>
<span id="cb99-11"><a href="coding-best-practices.html#cb99-11"></a><span class="co"># Don&#39;t use</span></span>
<span id="cb99-12"><a href="coding-best-practices.html#cb99-12"></a>street</span>
<span id="cb99-13"><a href="coding-best-practices.html#cb99-13"></a>city</span>
<span id="cb99-14"><a href="coding-best-practices.html#cb99-14"></a>state</span>
<span id="cb99-15"><a href="coding-best-practices.html#cb99-15"></a></span>
<span id="cb99-16"><a href="coding-best-practices.html#cb99-16"></a><span class="co"># Use</span></span>
<span id="cb99-17"><a href="coding-best-practices.html#cb99-17"></a>address_street</span>
<span id="cb99-18"><a href="coding-best-practices.html#cb99-18"></a>address_city</span>
<span id="cb99-19"><a href="coding-best-practices.html#cb99-19"></a>address_state</span></code></pre></div>
</div>
</div>
<div id="file-names" class="section level3" number="9.3.3">
<h3><span class="header-section-number">9.3.3</span> File Names</h3>
<p>All the variable naming suggestons above also apply to file names. However, I make a few additional suggestions specific to file names below.</p>
<div id="managing-multiple-files-in-projects" class="section level4" number="9.3.3.1">
<h4><span class="header-section-number">9.3.3.1</span> Managing multiple files in projects</h4>
<p>When you are doing data management and analysis for real-world projects you will typically need to break the code up into multiple files. If you don’t, the code often becomes really difficult to read and manage. Having said that, finding the code you are looking for when there are 10, 20, or more separate files isn’t much fun either. Therefore, I suggest the following (or similar) file naming conventions be used in your projects.</p>
<ul>
<li><p>Separate <em>data cleaning</em> and <em>data analysis</em> into separate files (typically, .R or .Rmd).</p>
<ul>
<li>Data cleaning files should be prefixed with the word “data” and named as follows
<ul>
<li>data_[order number]_[purpose]</li>
</ul></li>
</ul></li>
</ul>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="coding-best-practices.html#cb100-1"></a><span class="co"># Examples</span></span>
<span id="cb100-2"><a href="coding-best-practices.html#cb100-2"></a>data_<span class="dv">01</span>_import.Rmd</span>
<span id="cb100-3"><a href="coding-best-practices.html#cb100-3"></a>data_<span class="dv">02</span>_clean.Rmd</span>
<span id="cb100-4"><a href="coding-best-practices.html#cb100-4"></a>data_<span class="dv">03</span>_process_for_regression.Rmd</span></code></pre></div>
<ul>
<li>Analysis files that do not directly create a table or figure should be
prefixed with the word “analysis” and named as follows
<ul>
<li>analysis_[order number]_[brief summary of content]</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="coding-best-practices.html#cb101-1"></a><span class="co"># Examples</span></span>
<span id="cb101-2"><a href="coding-best-practices.html#cb101-2"></a>analysis_<span class="dv">01</span>_exploratory.Rmd</span>
<span id="cb101-3"><a href="coding-best-practices.html#cb101-3"></a>analysis_<span class="dv">02</span>_regression.Rmd</span></code></pre></div>
<ul>
<li>Analysis files that <em>DO</em> directly create a table or figure should be prefixed with the word “table” or “fig” respectively and named as follows
<ul>
<li>table_[brief summary of content] or<br />
</li>
<li>fig_[brief summary of content]</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="coding-best-practices.html#cb102-1"></a><span class="co"># Examples</span></span>
<span id="cb102-2"><a href="coding-best-practices.html#cb102-2"></a>table_network_characteristics.Rmd</span>
<span id="cb102-3"><a href="coding-best-practices.html#cb102-3"></a>fig_reporting_patterns.Rmd</span></code></pre></div>
<p class="note">
🗒<strong>Side Note:</strong> I sometimes do data manipulation (create variables, subset data, reshape data) in an analysis file if that analysis (or table or chart) is the only analysis that uses the modified data. Otherwise, I do the modifications in a separate data cleaning file.
</p>
<ul>
<li>Images
<ul>
<li>Should typically be exported as png (especially when they are intended for use HTML files).<br />
</li>
<li>Should typically be saved in a separate “img” folder under the project home directory.<br />
</li>
<li>Should be given a descriptive name.
<ul>
<li><em>Example</em>: <code>histogram_heights.png</code>, <em>NOT</em> <code>fig_02.png</code>.
-I have found that the following image sizes typically work pretty well for my projects.</li>
<li>1920 x 1080 for HTML<br />
</li>
<li>770 x 360 for Word</li>
</ul></li>
</ul></li>
<li>Word and PDF output files
<ul>
<li>I typically save them in a separate “docs” folder under the project home directory</li>
<li>Whenever possible, I try to set the Word or PDF file name to match the name of the R file that it was created in.
<ul>
<li><em>Example</em>: <code>first_quarter_report.Rmd</code> creates <code>docs/first_quarter_report.pdf</code></li>
</ul></li>
</ul></li>
<li>Exported data files (i.e., RDS, RData, CSV, Excel, etc.)
<ul>
<li>I typically save them in a separate “data” folder under the project home directory.</li>
<li>Whenever possible, I try to set the Word or PDF file name to match the name of the R file that it was created in.
<ul>
<li><em>Example</em>: <code>data_03_texas_only.Rmd</code> creates <code>data/data_03_texas_only.csv</code></li>
</ul></li>
</ul></li>
</ul>

</div>
</div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Wickham2019-yt">
<p>4. Wickham H. Style guide. In: <em>Advanced R</em>.; 2019.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-projects.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="using-pipes.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
