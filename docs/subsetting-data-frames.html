<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>26 Subsetting data frames | R for Epidemiology</title>
  <meta name="description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="26 Subsetting data frames | R for Epidemiology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r4epi/" />
  <meta property="og:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />
  <meta property="og:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="github-repo" content="brad-cannell/r4epi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="26 Subsetting data frames | R for Epidemiology" />
  
  <meta name="twitter:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="twitter:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2022-01-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="creating-and-modifying-columns.html"/>
<link rel="next" href="working-with-dates.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0RREBTQ0D9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0RREBTQ0D9');
</script>
<!-- R4Epi Favicons -->
<!-- https://bookdown.org/yihui/rmarkdown-cookbook/favicon.html -->
<!-- Also using Favicon Generator (https://realfavicongenerator.net) -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Epidemiology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#goals"><i class="fa fa-check"></i>Goals</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#text-conventions-used-in-this-book"><i class="fa fa-check"></i>Text conventions used in this book</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#other-reading"><i class="fa fa-check"></i>Other reading</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="contributing-to-r4epi.html"><a href="contributing-to-r4epi.html"><i class="fa fa-check"></i>Contributing to R4Epi</a>
<ul>
<li class="chapter" data-level="" data-path="contributing-to-r4epi.html"><a href="contributing-to-r4epi.html#typos"><i class="fa fa-check"></i>Typos</a></li>
<li class="chapter" data-level="" data-path="contributing-to-r4epi.html"><a href="contributing-to-r4epi.html#issues"><i class="fa fa-check"></i>Issues</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html#brad-cannell"><i class="fa fa-check"></i>Brad Cannell</a></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html#melvin-livingston"><i class="fa fa-check"></i>Melvin Livingston</a></li>
</ul></li>
<li class="part"><span><b>I Getting Started</b></span></li>
<li class="chapter" data-level="1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-mac"><i class="fa fa-check"></i><b>1.1</b> Download and install on a Mac</a></li>
<li class="chapter" data-level="1.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-pc"><i class="fa fa-check"></i><b>1.2</b> Download and install on a PC</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>2</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="what-is-r.html"><a href="what-is-r.html#what-is-data"><i class="fa fa-check"></i><b>2.1</b> What is data?</a></li>
<li class="chapter" data-level="2.2" data-path="what-is-r.html"><a href="what-is-r.html#what-is-r-1"><i class="fa fa-check"></i><b>2.2</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="what-is-r.html"><a href="what-is-r.html#transferring-data"><i class="fa fa-check"></i><b>2.2.1</b> Transferring data</a></li>
<li class="chapter" data-level="2.2.2" data-path="what-is-r.html"><a href="what-is-r.html#managing-data"><i class="fa fa-check"></i><b>2.2.2</b> Managing data</a></li>
<li class="chapter" data-level="2.2.3" data-path="what-is-r.html"><a href="what-is-r.html#analyzing-data"><i class="fa fa-check"></i><b>2.2.3</b> Analyzing data</a></li>
<li class="chapter" data-level="2.2.4" data-path="what-is-r.html"><a href="what-is-r.html#presenting-data"><i class="fa fa-check"></i><b>2.2.4</b> Presenting data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html"><i class="fa fa-check"></i><b>3</b> Navigating the RStudio interface</a>
<ul>
<li class="chapter" data-level="3.1" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-console"><i class="fa fa-check"></i><b>3.1</b> The console</a></li>
<li class="chapter" data-level="3.2" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-environment-pane"><i class="fa fa-check"></i><b>3.2</b> The environment pane</a></li>
<li class="chapter" data-level="3.3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-files-pane"><i class="fa fa-check"></i><b>3.3</b> The files pane</a></li>
<li class="chapter" data-level="3.4" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-source-pane"><i class="fa fa-check"></i><b>3.4</b> The source pane</a></li>
<li class="chapter" data-level="3.5" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#rstudio-preferences"><i class="fa fa-check"></i><b>3.5</b> RStudio preferences</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html"><i class="fa fa-check"></i><b>4</b> Speaking R’s language</a>
<ul>
<li class="chapter" data-level="4.1" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#r-is-a-language"><i class="fa fa-check"></i><b>4.1</b> R is a <em>language</em></a></li>
<li class="chapter" data-level="4.2" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#the-r-interpreter"><i class="fa fa-check"></i><b>4.2</b> The R interpreter</a></li>
<li class="chapter" data-level="4.3" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#errors"><i class="fa fa-check"></i><b>4.3</b> Errors</a></li>
<li class="chapter" data-level="4.4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#functions"><i class="fa fa-check"></i><b>4.4</b> Functions</a></li>
<li class="chapter" data-level="4.5" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#objects"><i class="fa fa-check"></i><b>4.5</b> Objects</a></li>
<li class="chapter" data-level="4.6" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#comments"><i class="fa fa-check"></i><b>4.6</b> Comments</a></li>
<li class="chapter" data-level="4.7" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#packages"><i class="fa fa-check"></i><b>4.7</b> Packages</a></li>
<li class="chapter" data-level="4.8" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#programming-style"><i class="fa fa-check"></i><b>4.8</b> Programming style</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lets-get-programming.html"><a href="lets-get-programming.html"><i class="fa fa-check"></i><b>5</b> Let’s get programming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#simulating-data"><i class="fa fa-check"></i><b>5.1</b> Simulating data</a></li>
<li class="chapter" data-level="5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vectors"><i class="fa fa-check"></i><b>5.2</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vector-types"><i class="fa fa-check"></i><b>5.2.1</b> Vector types</a></li>
<li class="chapter" data-level="5.2.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#double-vectors"><i class="fa fa-check"></i><b>5.2.2</b> Double vectors</a></li>
<li class="chapter" data-level="5.2.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#integer-vectors"><i class="fa fa-check"></i><b>5.2.3</b> Integer vectors</a></li>
<li class="chapter" data-level="5.2.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#logical-vectors"><i class="fa fa-check"></i><b>5.2.4</b> Logical vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#data-frames"><i class="fa fa-check"></i><b>5.3</b> Data frames</a></li>
<li class="chapter" data-level="5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#tibbles"><i class="fa fa-check"></i><b>5.4</b> Tibbles</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-as_tibble-function"><i class="fa fa-check"></i><b>5.4.1</b> The as_tibble function</a></li>
<li class="chapter" data-level="5.4.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tibble-function"><i class="fa fa-check"></i><b>5.4.2</b> The tibble function</a></li>
<li class="chapter" data-level="5.4.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tribble-function"><i class="fa fa-check"></i><b>5.4.3</b> The tribble function</a></li>
<li class="chapter" data-level="5.4.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#why-use-tibbles"><i class="fa fa-check"></i><b>5.4.4</b> Why use tibbles</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#missing-data"><i class="fa fa-check"></i><b>5.5</b> Missing data</a></li>
<li class="chapter" data-level="5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#our-first-analysis"><i class="fa fa-check"></i><b>5.6</b> Our first analysis</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#manual-calculation-of-the-mean"><i class="fa fa-check"></i><b>5.6.1</b> Manual calculation of the mean</a></li>
<li class="chapter" data-level="5.6.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#dollar-sign-notation"><i class="fa fa-check"></i><b>5.6.2</b> Dollar sign notation</a></li>
<li class="chapter" data-level="5.6.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#bracket-notation"><i class="fa fa-check"></i><b>5.6.3</b> Bracket notation</a></li>
<li class="chapter" data-level="5.6.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-sum-function"><i class="fa fa-check"></i><b>5.6.4</b> The sum function</a></li>
<li class="chapter" data-level="5.6.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#nesting-functions"><i class="fa fa-check"></i><b>5.6.5</b> Nesting functions</a></li>
<li class="chapter" data-level="5.6.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-length-function"><i class="fa fa-check"></i><b>5.6.6</b> The length function</a></li>
<li class="chapter" data-level="5.6.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-mean-function"><i class="fa fa-check"></i><b>5.6.7</b> The mean function</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#some-common-errors"><i class="fa fa-check"></i><b>5.7</b> Some common errors</a></li>
<li class="chapter" data-level="5.8" data-path="lets-get-programming.html"><a href="lets-get-programming.html#summary"><i class="fa fa-check"></i><b>5.8</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>II Coding Tools and Best Practices</b></span></li>
<li class="chapter" data-level="6" data-path="r-scripts.html"><a href="r-scripts.html"><i class="fa fa-check"></i><b>6</b> R scripts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-scripts.html"><a href="r-scripts.html#creating-r-scripts"><i class="fa fa-check"></i><b>6.1</b> Creating R scripts</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7</b> R markdown</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-markdown.html"><a href="r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>7.1</b> What is R markdown?</a></li>
<li class="chapter" data-level="7.2" data-path="r-markdown.html"><a href="r-markdown.html#why-use-r-markdown"><i class="fa fa-check"></i><b>7.2</b> Why use R markdown?</a></li>
<li class="chapter" data-level="7.3" data-path="r-markdown.html"><a href="r-markdown.html#create-an-r-notebook"><i class="fa fa-check"></i><b>7.3</b> Create an R Notebook</a></li>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html#yaml-headers"><i class="fa fa-check"></i><b>7.4</b> YAML headers</a></li>
<li class="chapter" data-level="7.5" data-path="r-markdown.html"><a href="r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>7.5</b> R code chunks</a></li>
<li class="chapter" data-level="7.6" data-path="r-markdown.html"><a href="r-markdown.html#markdown"><i class="fa fa-check"></i><b>7.6</b> Markdown</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-projects.html"><a href="r-projects.html"><i class="fa fa-check"></i><b>8</b> R projects</a></li>
<li class="chapter" data-level="9" data-path="coding-best-practices.html"><a href="coding-best-practices.html"><i class="fa fa-check"></i><b>9</b> Coding best practices</a>
<ul>
<li class="chapter" data-level="9.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#general-principles"><i class="fa fa-check"></i><b>9.1</b> General principles</a></li>
<li class="chapter" data-level="9.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#code-comments"><i class="fa fa-check"></i><b>9.2</b> Code comments</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#defining-key-variables"><i class="fa fa-check"></i><b>9.2.1</b> Defining key variables</a></li>
<li class="chapter" data-level="9.2.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#what-this-code-is-trying-to-accomplish"><i class="fa fa-check"></i><b>9.2.2</b> What this code is trying to accomplish</a></li>
<li class="chapter" data-level="9.2.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#why-i-chose-this-particular-strategy"><i class="fa fa-check"></i><b>9.2.3</b> Why I chose this particular strategy</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#style-guidelines"><i class="fa fa-check"></i><b>9.3</b> Style guidelines</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#comments-1"><i class="fa fa-check"></i><b>9.3.1</b> Comments</a></li>
<li class="chapter" data-level="9.3.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#object-variable-names"><i class="fa fa-check"></i><b>9.3.2</b> Object (variable) names</a></li>
<li class="chapter" data-level="9.3.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#use-names-that-are-informative"><i class="fa fa-check"></i><b>9.3.3</b> Use names that are informative</a></li>
<li class="chapter" data-level="9.3.4" data-path="coding-best-practices.html"><a href="coding-best-practices.html#file-names"><i class="fa fa-check"></i><b>9.3.4</b> File Names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="using-pipes.html"><a href="using-pipes.html"><i class="fa fa-check"></i><b>10</b> Using pipes</a>
<ul>
<li class="chapter" data-level="10.1" data-path="using-pipes.html"><a href="using-pipes.html#what-are-pipes"><i class="fa fa-check"></i><b>10.1</b> What are pipes?</a></li>
<li class="chapter" data-level="10.2" data-path="using-pipes.html"><a href="using-pipes.html#how-do-pipes-work"><i class="fa fa-check"></i><b>10.2</b> How do pipes work?</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="using-pipes.html"><a href="using-pipes.html#keyboard-shortcut"><i class="fa fa-check"></i><b>10.2.1</b> Keyboard shortcut</a></li>
<li class="chapter" data-level="10.2.2" data-path="using-pipes.html"><a href="using-pipes.html#pipe-style"><i class="fa fa-check"></i><b>10.2.2</b> Pipe style</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="using-pipes.html"><a href="using-pipes.html#final-thought-on-pipes"><i class="fa fa-check"></i><b>10.3</b> Final thought on pipes</a></li>
</ul></li>
<li class="part"><span><b>III Data Transfer</b></span></li>
<li class="chapter" data-level="11" data-path="introduction-to-data-transfer.html"><a href="introduction-to-data-transfer.html"><i class="fa fa-check"></i><b>11</b> Introduction to data transfer</a></li>
<li class="chapter" data-level="12" data-path="file-paths.html"><a href="file-paths.html"><i class="fa fa-check"></i><b>12</b> File paths</a>
<ul>
<li class="chapter" data-level="12.1" data-path="file-paths.html"><a href="file-paths.html#finding-file-paths"><i class="fa fa-check"></i><b>12.1</b> Finding file paths</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html"><i class="fa fa-check"></i><b>13</b> Importing plain text files</a>
<ul>
<li class="chapter" data-level="13.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#packages-for-importing-data"><i class="fa fa-check"></i><b>13.1</b> Packages for importing data</a></li>
<li class="chapter" data-level="13.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-space-delimited-files"><i class="fa fa-check"></i><b>13.2</b> Importing space delimited files</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#specifying-missing-data-values"><i class="fa fa-check"></i><b>13.2.1</b> Specifying missing data values</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-tab-delimited-files"><i class="fa fa-check"></i><b>13.3</b> Importing tab delimited files</a></li>
<li class="chapter" data-level="13.4" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-fixed-width-format-files"><i class="fa fa-check"></i><b>13.4</b> Importing fixed width format files</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#vector-of-column-widths"><i class="fa fa-check"></i><b>13.4.1</b> Vector of column widths</a></li>
<li class="chapter" data-level="13.4.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#paired-vector-of-start-and-end-positions"><i class="fa fa-check"></i><b>13.4.2</b> Paired vector of start and end positions</a></li>
<li class="chapter" data-level="13.4.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#using-named-arguments"><i class="fa fa-check"></i><b>13.4.3</b> Using named arguments</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-comma-separated-values-files"><i class="fa fa-check"></i><b>13.5</b> Importing comma separated values files</a></li>
<li class="chapter" data-level="13.6" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#additional-arguments"><i class="fa fa-check"></i><b>13.6</b> Additional arguments</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="importing-binary-files.html"><a href="importing-binary-files.html"><i class="fa fa-check"></i><b>14</b> Importing binary files</a>
<ul>
<li class="chapter" data-level="14.1" data-path="importing-binary-files.html"><a href="importing-binary-files.html#packages-for-importing-data-1"><i class="fa fa-check"></i><b>14.1</b> Packages for importing data</a></li>
<li class="chapter" data-level="14.2" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-microsoft-excel-spreadsheets"><i class="fa fa-check"></i><b>14.2</b> Importing Microsoft Excel spreadsheets</a></li>
<li class="chapter" data-level="14.3" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-data-from-other-statistical-analysis-software"><i class="fa fa-check"></i><b>14.3</b> Importing data from other statistical analysis software</a></li>
<li class="chapter" data-level="14.4" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-sas-data-sets"><i class="fa fa-check"></i><b>14.4</b> Importing SAS data sets</a></li>
<li class="chapter" data-level="14.5" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-stata-data-sets"><i class="fa fa-check"></i><b>14.5</b> Importing Stata data sets</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="rstudios-data-import-tool.html"><a href="rstudios-data-import-tool.html"><i class="fa fa-check"></i><b>15</b> RStudio’s data import tool</a></li>
<li class="chapter" data-level="16" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>16</b> Exporting data</a>
<ul>
<li class="chapter" data-level="16.1" data-path="exporting-data.html"><a href="exporting-data.html#plain-text-files"><i class="fa fa-check"></i><b>16.1</b> Plain text files</a></li>
<li class="chapter" data-level="16.2" data-path="exporting-data.html"><a href="exporting-data.html#r-binary-files"><i class="fa fa-check"></i><b>16.2</b> R binary files</a></li>
</ul></li>
<li class="part"><span><b>IV Descriptive Analysis</b></span></li>
<li class="chapter" data-level="17" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html"><i class="fa fa-check"></i><b>17</b> Introduction to descriptive analysis</a>
<ul>
<li class="chapter" data-level="17.1" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-is-descriptive-analysis-and-why-would-we-do-it"><i class="fa fa-check"></i><b>17.1</b> What is descriptive analysis and why would we do it?</a></li>
<li class="chapter" data-level="17.2" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-kind-of-descriptive-analysis-should-we-perform"><i class="fa fa-check"></i><b>17.2</b> What kind of descriptive analysis should we perform?</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html"><i class="fa fa-check"></i><b>18</b> Numerical descriptions of categorical variables</a>
<ul>
<li class="chapter" data-level="18.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#factor-vectors"><i class="fa fa-check"></i><b>18.1</b> Factor vectors</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-numeric-variable"><i class="fa fa-check"></i><b>18.1.1</b> Coerce a numeric variable</a></li>
<li class="chapter" data-level="18.1.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-character-variable"><i class="fa fa-check"></i><b>18.1.2</b> Coerce a character variable</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#height-and-weight-data"><i class="fa fa-check"></i><b>18.2</b> Height and Weight Data</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#view-the-data"><i class="fa fa-check"></i><b>18.2.1</b> View the data</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-frequencies"><i class="fa fa-check"></i><b>18.3</b> Calculating frequencies</a>
<ul>
<li class="chapter" data-level="18.3.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-base-r-table-function"><i class="fa fa-check"></i><b>18.3.1</b> The base R table function</a></li>
<li class="chapter" data-level="18.3.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-gmodels-crosstable-function"><i class="fa fa-check"></i><b>18.3.2</b> The gmodels CrossTable function</a></li>
<li class="chapter" data-level="18.3.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-tidyverse-way"><i class="fa fa-check"></i><b>18.3.3</b> The tidyverse way</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-percentages"><i class="fa fa-check"></i><b>18.4</b> Calculating percentages</a></li>
<li class="chapter" data-level="18.5" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#cat-missing-data"><i class="fa fa-check"></i><b>18.5</b> Missing data</a></li>
<li class="chapter" data-level="18.6" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#formatting-results"><i class="fa fa-check"></i><b>18.6</b> Formatting results</a></li>
<li class="chapter" data-level="18.7" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#using-freqtables"><i class="fa fa-check"></i><b>18.7</b> Using freqtables</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html"><i class="fa fa-check"></i><b>19</b> Measures of central tendency</a>
<ul>
<li class="chapter" data-level="19.1" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mean"><i class="fa fa-check"></i><b>19.1</b> Calculate the mean</a></li>
<li class="chapter" data-level="19.2" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-median"><i class="fa fa-check"></i><b>19.2</b> Calculate the median</a></li>
<li class="chapter" data-level="19.3" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mode"><i class="fa fa-check"></i><b>19.3</b> Calculate the mode</a></li>
<li class="chapter" data-level="19.4" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#compare-mean-median-and-mode"><i class="fa fa-check"></i><b>19.4</b> Compare mean, median, and mode</a></li>
<li class="chapter" data-level="19.5" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#data-checking"><i class="fa fa-check"></i><b>19.5</b> Data checking</a></li>
<li class="chapter" data-level="19.6" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#properties-of-mean-median-and-mode"><i class="fa fa-check"></i><b>19.6</b> Properties of mean, median, and mode</a></li>
<li class="chapter" data-level="19.7" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#na-rm"><i class="fa fa-check"></i><b>19.7</b> Missing data</a></li>
<li class="chapter" data-level="19.8" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#using-meantables"><i class="fa fa-check"></i><b>19.8</b> Using meantables</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html"><i class="fa fa-check"></i><b>20</b> Measures of dispersion</a>
<ul>
<li class="chapter" data-level="20.1" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html#comparing-distributions"><i class="fa fa-check"></i><b>20.1</b> Comparing distributions</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><i class="fa fa-check"></i><b>21</b> Describing the relationship between a continuous outcome and a continuous predictor</a>
<ul>
<li class="chapter" data-level="21.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#pearson-correlation-coefficient"><i class="fa fa-check"></i><b>21.1</b> Pearson Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#calculating-r"><i class="fa fa-check"></i><b>21.1.1</b> Calculating r</a></li>
<li class="chapter" data-level="21.1.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#correlation-intuition"><i class="fa fa-check"></i><b>21.1.2</b> Correlation intuition</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>22</b> Describing the relationship between a continuous outcome and a categorical predictor</a>
<ul>
<li class="chapter" data-level="22.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#single-predictor-and-single-outcome"><i class="fa fa-check"></i><b>22.1</b> Single predictor and single outcome</a></li>
<li class="chapter" data-level="22.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#multiple-predictors"><i class="fa fa-check"></i><b>22.2</b> Multiple predictors</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>23</b> Describing the relationship between a categorical outcome and a categorical predictor</a>
<ul>
<li class="chapter" data-level="23.1" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html#comparing-two-variables"><i class="fa fa-check"></i><b>23.1</b> Comparing two variables</a></li>
</ul></li>
<li class="part"><span><b>V Data Management</b></span></li>
<li class="chapter" data-level="24" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html"><i class="fa fa-check"></i><b>24</b> Introduction to data management</a>
<ul>
<li class="chapter" data-level="24.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#multiple-paradigms-for-data-management-in-r"><i class="fa fa-check"></i><b>24.1</b> Multiple paradigms for data management in R</a></li>
<li class="chapter" data-level="24.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-package"><i class="fa fa-check"></i><b>24.2</b> The dplyr package</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-verbs"><i class="fa fa-check"></i><b>24.2.1</b> The dplyr verbs</a></li>
<li class="chapter" data-level="24.2.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-.data-argument"><i class="fa fa-check"></i><b>24.2.2</b> The .data argument</a></li>
<li class="chapter" data-level="24.2.3" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-argument"><i class="fa fa-check"></i><b>24.2.3</b> The … argument</a></li>
<li class="chapter" data-level="24.2.4" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#non-standard-evaluation"><i class="fa fa-check"></i><b>24.2.4</b> Non-standard evaluation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html"><i class="fa fa-check"></i><b>25</b> Creating and modifying columns</a>
<ul>
<li class="chapter" data-level="25.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#creating-data-frames"><i class="fa fa-check"></i><b>25.1</b> Creating data frames</a></li>
<li class="chapter" data-level="25.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#dollar-sign-notation-1"><i class="fa fa-check"></i><b>25.2</b> Dollar sign notation</a></li>
<li class="chapter" data-level="25.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#bracket-notation-1"><i class="fa fa-check"></i><b>25.3</b> Bracket notation</a></li>
<li class="chapter" data-level="25.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#modify-individual-values"><i class="fa fa-check"></i><b>25.4</b> Modify individual values</a></li>
<li class="chapter" data-level="25.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#the-mutate-function"><i class="fa fa-check"></i><b>25.5</b> The mutate() function</a>
<ul>
<li class="chapter" data-level="25.5.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-a-single-column"><i class="fa fa-check"></i><b>25.5.1</b> Adding or modifying a single column</a></li>
<li class="chapter" data-level="25.5.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#recycling-rules"><i class="fa fa-check"></i><b>25.5.2</b> Recycling rules</a></li>
<li class="chapter" data-level="25.5.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#using-existing-variables-in-name-value-pairs"><i class="fa fa-check"></i><b>25.5.3</b> Using existing variables in name-value pairs</a></li>
<li class="chapter" data-level="25.5.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-multiple-columns"><i class="fa fa-check"></i><b>25.5.4</b> Adding or modifying multiple columns</a></li>
<li class="chapter" data-level="25.5.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#rowwise-mutations"><i class="fa fa-check"></i><b>25.5.5</b> Rowwise mutations</a></li>
<li class="chapter" data-level="25.5.6" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#group_by-mutations"><i class="fa fa-check"></i><b>25.5.6</b> Group_by mutations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html"><i class="fa fa-check"></i><b>26</b> Subsetting data frames</a>
<ul>
<li class="chapter" data-level="26.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-select-function"><i class="fa fa-check"></i><b>26.1</b> The select() function</a></li>
<li class="chapter" data-level="26.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-rename-function"><i class="fa fa-check"></i><b>26.2</b> The rename() function</a></li>
<li class="chapter" data-level="26.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-filter-function"><i class="fa fa-check"></i><b>26.3</b> The filter() function</a>
<ul>
<li class="chapter" data-level="26.3.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#subgroup-analysis"><i class="fa fa-check"></i><b>26.3.1</b> Subgroup analysis</a></li>
<li class="chapter" data-level="26.3.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-case-analysis"><i class="fa fa-check"></i><b>26.3.2</b> Complete case analysis</a></li>
</ul></li>
<li class="chapter" data-level="26.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#deduplication"><i class="fa fa-check"></i><b>26.4</b> Deduplication</a>
<ul>
<li class="chapter" data-level="26.4.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-distinct-function"><i class="fa fa-check"></i><b>26.4.1</b> The distinct() function</a></li>
<li class="chapter" data-level="26.4.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-duplicate-row-add-tag"><i class="fa fa-check"></i><b>26.4.2</b> Complete duplicate row add tag</a></li>
<li class="chapter" data-level="26.4.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows"><i class="fa fa-check"></i><b>26.4.3</b> Partial duplicate rows</a></li>
<li class="chapter" data-level="26.4.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows---add-tag"><i class="fa fa-check"></i><b>26.4.4</b> Partial duplicate rows - add tag</a></li>
<li class="chapter" data-level="26.4.5" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#count-the-number-of-duplicates"><i class="fa fa-check"></i><b>26.4.5</b> Count the number of duplicates</a></li>
<li class="chapter" data-level="26.4.6" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#what-to-do-about-duplicates"><i class="fa fa-check"></i><b>26.4.6</b> What to do about duplicates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="working-with-dates.html"><a href="working-with-dates.html"><i class="fa fa-check"></i><b>27</b> Working with dates</a>
<ul>
<li class="chapter" data-level="27.1" data-path="working-with-dates.html"><a href="working-with-dates.html#date-vector-types"><i class="fa fa-check"></i><b>27.1</b> Date vector types</a></li>
<li class="chapter" data-level="27.2" data-path="working-with-dates.html"><a href="working-with-dates.html#dates-under-the-hood"><i class="fa fa-check"></i><b>27.2</b> Dates under the hood</a></li>
<li class="chapter" data-level="27.3" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-date-times-to-dates"><i class="fa fa-check"></i><b>27.3</b> Coercing date-times to dates</a></li>
<li class="chapter" data-level="27.4" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-character-strings-to-dates"><i class="fa fa-check"></i><b>27.4</b> Coercing character strings to dates</a></li>
<li class="chapter" data-level="27.5" data-path="working-with-dates.html"><a href="working-with-dates.html#change-the-appearance-of-dates-with-format"><i class="fa fa-check"></i><b>27.5</b> Change the appearance of dates with format()</a></li>
<li class="chapter" data-level="27.6" data-path="working-with-dates.html"><a href="working-with-dates.html#some-useful-built-in-dates"><i class="fa fa-check"></i><b>27.6</b> Some useful built-in dates</a>
<ul>
<li class="chapter" data-level="27.6.1" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date"><i class="fa fa-check"></i><b>27.6.1</b> Today’s date</a></li>
<li class="chapter" data-level="27.6.2" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date-time"><i class="fa fa-check"></i><b>27.6.2</b> Today’s date-time</a></li>
<li class="chapter" data-level="27.6.3" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-full-month-names"><i class="fa fa-check"></i><b>27.6.3</b> Character vector of full month names</a></li>
<li class="chapter" data-level="27.6.4" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-abbreviated-month-names"><i class="fa fa-check"></i><b>27.6.4</b> Character vector of abbreviated month names</a></li>
<li class="chapter" data-level="27.6.5" data-path="working-with-dates.html"><a href="working-with-dates.html#creating-a-vector-containing-a-sequence-of-dates"><i class="fa fa-check"></i><b>27.6.5</b> Creating a vector containing a sequence of dates</a></li>
</ul></li>
<li class="chapter" data-level="27.7" data-path="working-with-dates.html"><a href="working-with-dates.html#calculating-date-intervals"><i class="fa fa-check"></i><b>27.7</b> Calculating date intervals</a>
<ul>
<li class="chapter" data-level="27.7.1" data-path="working-with-dates.html"><a href="working-with-dates.html#calculate-age-as-the-difference-in-time-between-dob-and-today"><i class="fa fa-check"></i><b>27.7.1</b> Calculate age as the difference in time between dob and today</a></li>
<li class="chapter" data-level="27.7.2" data-path="working-with-dates.html"><a href="working-with-dates.html#rounding-time-intervals"><i class="fa fa-check"></i><b>27.7.2</b> Rounding time intervals</a></li>
</ul></li>
<li class="chapter" data-level="27.8" data-path="working-with-dates.html"><a href="working-with-dates.html#extracting-out-date-parts"><i class="fa fa-check"></i><b>27.8</b> Extracting out date parts</a></li>
<li class="chapter" data-level="27.9" data-path="working-with-dates.html"><a href="working-with-dates.html#sorting-dates"><i class="fa fa-check"></i><b>27.9</b> Sorting dates</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html"><i class="fa fa-check"></i><b>28</b> Working with character strings</a>
<ul>
<li class="chapter" data-level="28.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#coerce-to-lowercase"><i class="fa fa-check"></i><b>28.1</b> Coerce to lowercase</a>
<ul>
<li class="chapter" data-level="28.1.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#lowercase"><i class="fa fa-check"></i><b>28.1.1</b> Lowercase</a></li>
<li class="chapter" data-level="28.1.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#upper-case"><i class="fa fa-check"></i><b>28.1.2</b> Upper case</a></li>
<li class="chapter" data-level="28.1.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#title-case"><i class="fa fa-check"></i><b>28.1.3</b> Title case</a></li>
<li class="chapter" data-level="28.1.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#sentence-case"><i class="fa fa-check"></i><b>28.1.4</b> Sentence case</a></li>
</ul></li>
<li class="chapter" data-level="28.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#trim-white-space"><i class="fa fa-check"></i><b>28.2</b> Trim white space</a></li>
<li class="chapter" data-level="28.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#regular-expressions"><i class="fa fa-check"></i><b>28.3</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="28.3.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-the-comma"><i class="fa fa-check"></i><b>28.3.1</b> Remove the comma</a></li>
<li class="chapter" data-level="28.3.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-middle-initial"><i class="fa fa-check"></i><b>28.3.2</b> Remove middle initial</a></li>
<li class="chapter" data-level="28.3.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-double-spaces"><i class="fa fa-check"></i><b>28.3.3</b> Remove double spaces</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#separate-values-into-component-parts"><i class="fa fa-check"></i><b>28.4</b> Separate values into component parts</a></li>
<li class="chapter" data-level="28.5" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#dummy-variables"><i class="fa fa-check"></i><b>28.5</b> Dummy variables</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="conditional-operations.html"><a href="conditional-operations.html"><i class="fa fa-check"></i><b>29</b> Conditional operations</a>
<ul>
<li class="chapter" data-level="29.1" data-path="conditional-operations.html"><a href="conditional-operations.html#operands-and-operators"><i class="fa fa-check"></i><b>29.1</b> Operands and operators</a></li>
<li class="chapter" data-level="29.2" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-multiple-conditions-simultaneously"><i class="fa fa-check"></i><b>29.2</b> Testing multiple conditions simultaneously</a></li>
<li class="chapter" data-level="29.3" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-a-sequence-of-conditions"><i class="fa fa-check"></i><b>29.3</b> Testing a sequence of conditions</a></li>
<li class="chapter" data-level="29.4" data-path="conditional-operations.html"><a href="conditional-operations.html#recoding-variables"><i class="fa fa-check"></i><b>29.4</b> Recoding variables</a></li>
<li class="chapter" data-level="29.5" data-path="conditional-operations.html"><a href="conditional-operations.html#case_when-is-lazy"><i class="fa fa-check"></i><b>29.5</b> case_when() is lazy</a></li>
<li class="chapter" data-level="29.6" data-path="conditional-operations.html"><a href="conditional-operations.html#recode-missing"><i class="fa fa-check"></i><b>29.6</b> Recode missing</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html"><i class="fa fa-check"></i><b>30</b> Working with multiple data frames</a>
<ul>
<li class="chapter" data-level="30.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-vertically-adding-rows"><i class="fa fa-check"></i><b>30.1</b> Combining data frames vertically: Adding rows</a>
<ul>
<li class="chapter" data-level="30.1.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-more-than-2-data-frames"><i class="fa fa-check"></i><b>30.1.1</b> Combining more than 2 data frames</a></li>
<li class="chapter" data-level="30.1.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#adding-rows-with-differing-columns"><i class="fa fa-check"></i><b>30.1.2</b> Adding rows with differing columns</a></li>
<li class="chapter" data-level="30.1.3" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-positions"><i class="fa fa-check"></i><b>30.1.3</b> Differing column positions</a></li>
<li class="chapter" data-level="30.1.4" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-names"><i class="fa fa-check"></i><b>30.1.4</b> Differing column names</a></li>
</ul></li>
<li class="chapter" data-level="30.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-adding-columns"><i class="fa fa-check"></i><b>30.2</b> Combining data frames horizontally: Adding columns</a>
<ul>
<li class="chapter" data-level="30.2.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-position"><i class="fa fa-check"></i><b>30.2.1</b> Combining data frames horizontally by position</a></li>
<li class="chapter" data-level="30.2.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-key-values"><i class="fa fa-check"></i><b>30.2.2</b> Combining data frames horizontally by key values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="31" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html"><i class="fa fa-check"></i><b>31</b> Restructuring data frames</a>
<ul>
<li class="chapter" data-level="31.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-tidyr-package"><i class="fa fa-check"></i><b>31.1</b> The tidyr package</a></li>
<li class="chapter" data-level="31.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-longer"><i class="fa fa-check"></i><b>31.2</b> Pivoting longer</a>
<ul>
<li class="chapter" data-level="31.2.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_to-argument"><i class="fa fa-check"></i><b>31.2.1</b> The names_to argument</a></li>
<li class="chapter" data-level="31.2.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_prefix-argument"><i class="fa fa-check"></i><b>31.2.2</b> The names_prefix argument</a></li>
<li class="chapter" data-level="31.2.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-values_to-argument"><i class="fa fa-check"></i><b>31.2.3</b> The values_to argument</a></li>
<li class="chapter" data-level="31.2.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_transform-argument"><i class="fa fa-check"></i><b>31.2.4</b> The names_transform argument</a></li>
<li class="chapter" data-level="31.2.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-multiple-sets-of-columns"><i class="fa fa-check"></i><b>31.2.5</b> Pivoting multiple sets of columns</a></li>
<li class="chapter" data-level="31.2.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_sep-argument"><i class="fa fa-check"></i><b>31.2.6</b> The names_sep argument</a></li>
<li class="chapter" data-level="31.2.7" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-.value-special-value"><i class="fa fa-check"></i><b>31.2.7</b> The .value special value</a></li>
<li class="chapter" data-level="31.2.8" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-period"><i class="fa fa-check"></i><b>31.2.8</b> Why person-period?</a></li>
</ul></li>
<li class="chapter" data-level="31.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-wider"><i class="fa fa-check"></i><b>31.3</b> Pivoting wider</a>
<ul>
<li class="chapter" data-level="31.3.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-level"><i class="fa fa-check"></i><b>31.3.1</b> Why person-level?</a></li>
</ul></li>
<li class="chapter" data-level="31.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics"><i class="fa fa-check"></i><b>31.4</b> Pivoting summary statistics</a>
<ul>
<li class="chapter" data-level="31.4.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-wide-to-long"><i class="fa fa-check"></i><b>31.4.1</b> Pivoting summary statistics wide to long</a></li>
<li class="chapter" data-level="31.4.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-long-to-wide"><i class="fa fa-check"></i><b>31.4.2</b> Pivoting summary statistics long to wide</a></li>
</ul></li>
<li class="chapter" data-level="31.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#tidy-data"><i class="fa fa-check"></i><b>31.5</b> Tidy data</a>
<ul>
<li class="chapter" data-level="31.5.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-variable-must-have-its-own-column"><i class="fa fa-check"></i><b>31.5.1</b> Each variable must have its own column</a></li>
<li class="chapter" data-level="31.5.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-observation-must-have-its-own-row"><i class="fa fa-check"></i><b>31.5.2</b> Each observation must have its own row</a></li>
<li class="chapter" data-level="31.5.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-value-must-have-its-own-cell"><i class="fa fa-check"></i><b>31.5.3</b> Each value must have its own cell</a></li>
</ul></li>
<li class="chapter" data-level="31.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-complete-function"><i class="fa fa-check"></i><b>31.6</b> The complete() function</a></li>
</ul></li>
<li class="part"><span><b>VI Repeated Operations</b></span></li>
<li class="chapter" data-level="32" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html"><i class="fa fa-check"></i><b>32</b> Introduction to repeated operations</a>
<ul>
<li class="chapter" data-level="32.1" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#multiple-methods-for-repeated-operations-in-r"><i class="fa fa-check"></i><b>32.1</b> Multiple methods for repeated operations in R</a></li>
<li class="chapter" data-level="32.2" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#tidy-evaluation"><i class="fa fa-check"></i><b>32.2</b> Tidy evaluation</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>33</b> Writing functions</a>
<ul>
<li class="chapter" data-level="33.1" data-path="writing-functions.html"><a href="writing-functions.html#when-to-write-functions"><i class="fa fa-check"></i><b>33.1</b> When to write functions</a></li>
<li class="chapter" data-level="33.2" data-path="writing-functions.html"><a href="writing-functions.html#how-to-write-functions"><i class="fa fa-check"></i><b>33.2</b> How to write functions</a>
<ul>
<li class="chapter" data-level="33.2.1" data-path="writing-functions.html"><a href="writing-functions.html#the-function-function"><i class="fa fa-check"></i><b>33.2.1</b> The function() function</a></li>
<li class="chapter" data-level="33.2.2" data-path="writing-functions.html"><a href="writing-functions.html#the-function-writing-process"><i class="fa fa-check"></i><b>33.2.2</b> The function writing process</a></li>
</ul></li>
<li class="chapter" data-level="33.3" data-path="writing-functions.html"><a href="writing-functions.html#giving-your-function-arguments-default-values"><i class="fa fa-check"></i><b>33.3</b> Giving your function arguments default values</a></li>
<li class="chapter" data-level="33.4" data-path="writing-functions.html"><a href="writing-functions.html#the-values-your-functions-return"><i class="fa fa-check"></i><b>33.4</b> The values your functions return</a></li>
<li class="chapter" data-level="33.5" data-path="writing-functions.html"><a href="writing-functions.html#lexical-scoping-and-functions"><i class="fa fa-check"></i><b>33.5</b> Lexical scoping and functions</a></li>
<li class="chapter" data-level="33.6" data-path="writing-functions.html"><a href="writing-functions.html#tidy-evaluation-1"><i class="fa fa-check"></i><b>33.6</b> Tidy evaluation</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html"><i class="fa fa-check"></i><b>34</b> Column-wise operations in dplyr</a>
<ul>
<li class="chapter" data-level="34.1" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#the-across-function"><i class="fa fa-check"></i><b>34.1</b> The across() function</a></li>
<li class="chapter" data-level="34.2" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-filter"><i class="fa fa-check"></i><b>34.2</b> Across with filter</a></li>
<li class="chapter" data-level="34.3" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-mutate"><i class="fa fa-check"></i><b>34.3</b> Across with mutate</a></li>
<li class="chapter" data-level="34.4" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-summarise"><i class="fa fa-check"></i><b>34.4</b> Across with summarise</a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="writing-for-loops.html"><a href="writing-for-loops.html"><i class="fa fa-check"></i><b>35</b> Writing for loops</a>
<ul>
<li class="chapter" data-level="35.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#how-to-write-for-loops"><i class="fa fa-check"></i><b>35.1</b> How to write for loops</a>
<ul>
<li class="chapter" data-level="35.1.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-loop-body"><i class="fa fa-check"></i><b>35.1.1</b> The for loop body</a></li>
<li class="chapter" data-level="35.1.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-function"><i class="fa fa-check"></i><b>35.1.2</b> The for() function</a></li>
</ul></li>
<li class="chapter" data-level="35.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-transfer"><i class="fa fa-check"></i><b>35.2</b> Using for loops for data transfer</a></li>
<li class="chapter" data-level="35.3" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-management"><i class="fa fa-check"></i><b>35.3</b> Using for loops for data management</a></li>
<li class="chapter" data-level="35.4" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-analysis"><i class="fa fa-check"></i><b>35.4</b> Using for loops for analysis</a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html"><i class="fa fa-check"></i><b>36</b> Using the purrr package</a>
<ul>
<li class="chapter" data-level="36.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#comparing-for-loops-and-the-map-functions"><i class="fa fa-check"></i><b>36.1</b> Comparing for loops and the map functions</a></li>
<li class="chapter" data-level="36.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-transfer"><i class="fa fa-check"></i><b>36.2</b> Using purrr for data transfer</a>
<ul>
<li class="chapter" data-level="36.2.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-importing-multiple-sheets-from-an-excel-workbook"><i class="fa fa-check"></i><b>36.2.1</b> Example 1: Importing multiple sheets from an Excel workbook</a></li>
<li class="chapter" data-level="36.2.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-walk-instead-of-map"><i class="fa fa-check"></i><b>36.2.2</b> Why walk instead of map?</a></li>
<li class="chapter" data-level="36.2.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-we-didnt-assign-the-return-value-of-walk-to-an-object"><i class="fa fa-check"></i><b>36.2.3</b> why we didn’t assign the return value of <code>walk()</code> to an object?</a></li>
</ul></li>
<li class="chapter" data-level="36.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-management"><i class="fa fa-check"></i><b>36.3</b> Using purrr for data management</a>
<ul>
<li class="chapter" data-level="36.3.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-adding-na-at-multiple-positions"><i class="fa fa-check"></i><b>36.3.1</b> Example 1: Adding NA at multiple positions</a></li>
<li class="chapter" data-level="36.3.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2.-detecting-matching-values-by-position"><i class="fa fa-check"></i><b>36.3.2</b> Example 2. Detecting matching values by position</a></li>
</ul></li>
<li class="chapter" data-level="36.4" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-analysis"><i class="fa fa-check"></i><b>36.4</b> Using purrr for analysis</a>
<ul>
<li class="chapter" data-level="36.4.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-continuous-statistics"><i class="fa fa-check"></i><b>36.4.1</b> Example 1: Continuous statistics</a></li>
<li class="chapter" data-level="36.4.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2-categorical-statistics"><i class="fa fa-check"></i><b>36.4.2</b> Example 2: Categorical statistics</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Presenting Results</b></span></li>
<li class="chapter" data-level="37" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html"><i class="fa fa-check"></i><b>37</b> Creating tables with R and Microsoft Word</a>
<ul>
<li class="chapter" data-level="37.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-1"><i class="fa fa-check"></i><b>37.1</b> Table 1</a></li>
<li class="chapter" data-level="37.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#opioid-drug-use"><i class="fa fa-check"></i><b>37.2</b> Opioid drug use</a></li>
<li class="chapter" data-level="37.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-columns"><i class="fa fa-check"></i><b>37.3</b> Table columns</a></li>
<li class="chapter" data-level="37.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-rows"><i class="fa fa-check"></i><b>37.4</b> Table rows</a></li>
<li class="chapter" data-level="37.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#make-the-table-skeleton"><i class="fa fa-check"></i><b>37.5</b> Make the table skeleton</a></li>
<li class="chapter" data-level="37.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-column-headers"><i class="fa fa-check"></i><b>37.6</b> Fill in column headers</a>
<ul>
<li class="chapter" data-level="37.6.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#group-sample-sizes"><i class="fa fa-check"></i><b>37.6.1</b> Group sample sizes</a></li>
<li class="chapter" data-level="37.6.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-column-headers"><i class="fa fa-check"></i><b>37.6.2</b> Formatting column headers</a></li>
</ul></li>
<li class="chapter" data-level="37.7" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-row-headers"><i class="fa fa-check"></i><b>37.7</b> Fill in row headers</a>
<ul>
<li class="chapter" data-level="37.7.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#label-statistics"><i class="fa fa-check"></i><b>37.7.1</b> Label statistics</a></li>
<li class="chapter" data-level="37.7.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-row-headers"><i class="fa fa-check"></i><b>37.7.2</b> Formatting row headers</a></li>
</ul></li>
<li class="chapter" data-level="37.8" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-data-values"><i class="fa fa-check"></i><b>37.8</b> Fill in data values</a>
<ul>
<li class="chapter" data-level="37.8.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#manually-type-values"><i class="fa fa-check"></i><b>37.8.1</b> Manually type values</a></li>
<li class="chapter" data-level="37.8.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#copy-and-paste-values"><i class="fa fa-check"></i><b>37.8.2</b> Copy and paste values</a></li>
<li class="chapter" data-level="37.8.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#knit-a-word-document"><i class="fa fa-check"></i><b>37.8.3</b> Knit a Word document</a></li>
<li class="chapter" data-level="37.8.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#flextable-and-officer"><i class="fa fa-check"></i><b>37.8.4</b> flextable and officer</a></li>
<li class="chapter" data-level="37.8.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#significant-digits"><i class="fa fa-check"></i><b>37.8.5</b> Significant digits</a></li>
<li class="chapter" data-level="37.8.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-data-values"><i class="fa fa-check"></i><b>37.8.6</b> Formatting data values</a></li>
</ul></li>
<li class="chapter" data-level="37.9" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-title"><i class="fa fa-check"></i><b>37.9</b> Fill in title</a></li>
<li class="chapter" data-level="37.10" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-footnotes"><i class="fa fa-check"></i><b>37.10</b> Fill in footnotes</a>
<ul>
<li class="chapter" data-level="37.10.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-footnotes"><i class="fa fa-check"></i><b>37.10.1</b> Formatting footnotes</a></li>
</ul></li>
<li class="chapter" data-level="37.11" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#final-formatting"><i class="fa fa-check"></i><b>37.11</b> Final formatting</a>
<ul>
<li class="chapter" data-level="37.11.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#adjust-column-widths"><i class="fa fa-check"></i><b>37.11.1</b> Adjust column widths</a></li>
<li class="chapter" data-level="37.11.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#merge-cells"><i class="fa fa-check"></i><b>37.11.2</b> Merge cells</a></li>
<li class="chapter" data-level="37.11.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#remove-cell-borders"><i class="fa fa-check"></i><b>37.11.3</b> Remove cell borders</a></li>
</ul></li>
<li class="chapter" data-level="37.12" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#summary-1"><i class="fa fa-check"></i><b>37.12</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>VIII Appendix</b></span></li>
<li class="chapter" data-level="" data-path="appendix-a-glossary.html"><a href="appendix-a-glossary.html"><i class="fa fa-check"></i>Appendix A: Glossary</a></li>
<li class="chapter" data-level="" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html"><i class="fa fa-check"></i>Appendix: Alternative table formats</a>
<ul>
<li class="chapter" data-level="37.13" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#smaller-data-frame"><i class="fa fa-check"></i><b>37.13</b> Smaller data frame</a>
<ul>
<li class="chapter" data-level="37.13.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen"><i class="fa fa-check"></i><b>37.13.1</b> Default method for printing the data frame to the screen</a></li>
<li class="chapter" data-level="37.13.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function"><i class="fa fa-check"></i><b>37.13.2</b> Using the kable function</a></li>
<li class="chapter" data-level="37.13.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function"><i class="fa fa-check"></i><b>37.13.3</b> Using the datatable function</a></li>
</ul></li>
<li class="chapter" data-level="37.14" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#larger-data-frame"><i class="fa fa-check"></i><b>37.14</b> Larger data frame</a>
<ul>
<li class="chapter" data-level="37.14.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen-1"><i class="fa fa-check"></i><b>37.14.1</b> Default method for printing the data frame to the screen</a></li>
<li class="chapter" data-level="37.14.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function-1"><i class="fa fa-check"></i><b>37.14.2</b> Using the kable function</a></li>
<li class="chapter" data-level="37.14.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function-1"><i class="fa fa-check"></i><b>37.14.3</b> Using the datatable function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Epidemiology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="subsetting-data-frames" class="section level1" number="26">
<h1><span class="header-section-number">26</span> Subsetting data frames</h1>
<!--
select
  - tidy-select
  - Subsetting by name and position
rename
filter
  - missing data
  - Delete all missing
arrange
deduplication
  - numbering rows
  - No difference - drop
  - Obviously an error - drop
  - Systematically do something and report it
  - Don't pick and choose, or even give the appearance of picking and choosing, rows with values that are aligned with the results you want to see.

Maybe modulo operator
Maybe logical indexes
-->
<p>Subsetting data frames is another one of the most common data management tasks I carryout in my data analysis projects. Subsetting data frames just refers to the process of deciding which columns and rows to keep in your data frame and which to drop.</p>
<p>For example, I may need to subset the rows of a data frame because I’m interested in understanding a subpopulation in my sample. Below, we only want to analyze the rows that correspond to participants from Texas.</p>
<p><img src="img/05_part_data_management/03_subsetting_data_frame/rows.png" width="900" /></p>
<p>Or, perhaps I’m only interested in a subset of the statistics returned to me in a data frame of analysis results. Below, I only want to view and present the variable name, variable category, count, and percent.</p>
<p><img src="img/05_part_data_management/03_subsetting_data_frame/columns.png" width="900" /></p>
<p>Fortunately, the <code>dplyr</code> package includes functions that make it really easy for us to subset our data frames – even in some fairly complicated ways. Let’s start by simulating the same drug trial data we simulated in the last chapter and use it to work through some examples.</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb513-1"><a href="subsetting-data-frames.html#cb513-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dplyr</span></span>
<span id="cb513-2"><a href="subsetting-data-frames.html#cb513-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code></pre></div>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="subsetting-data-frames.html#cb514-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb514-2"><a href="subsetting-data-frames.html#cb514-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb514-3"><a href="subsetting-data-frames.html#cb514-3" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb514-4"><a href="subsetting-data-frames.html#cb514-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Follow-up year, 0 = baseline, 1 = year one, 2 = year two.</span></span>
<span id="cb514-5"><a href="subsetting-data-frames.html#cb514-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="fu">rep</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">2</span>, <span class="at">times =</span> <span class="dv">20</span>),</span>
<span id="cb514-6"><a href="subsetting-data-frames.html#cb514-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Participant age a baseline. Must be between the ages of 35 and 75 at </span></span>
<span id="cb514-7"><a href="subsetting-data-frames.html#cb514-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># baseline to be eligible for the study</span></span>
<span id="cb514-8"><a href="subsetting-data-frames.html#cb514-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">age =</span> <span class="fu">sample</span>(<span class="dv">35</span><span class="sc">:</span><span class="dv">75</span>, <span class="dv">20</span>, <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">rep</span>(<span class="at">each =</span> <span class="dv">3</span>),</span>
<span id="cb514-9"><a href="subsetting-data-frames.html#cb514-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drug the participant received, Placebo or active</span></span>
<span id="cb514-10"><a href="subsetting-data-frames.html#cb514-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">drug =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">&quot;Placebo&quot;</span>, <span class="st">&quot;Active&quot;</span>), <span class="dv">20</span>, <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb514-11"><a href="subsetting-data-frames.html#cb514-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rep</span>(<span class="at">each =</span> <span class="dv">3</span>),</span>
<span id="cb514-12"><a href="subsetting-data-frames.html#cb514-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reported headaches side effect, Y/N</span></span>
<span id="cb514-13"><a href="subsetting-data-frames.html#cb514-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_headache =</span> <span class="fu">if_else</span>(</span>
<span id="cb514-14"><a href="subsetting-data-frames.html#cb514-14" aria-hidden="true" tabindex="-1"></a>    drug <span class="sc">==</span> <span class="st">&quot;Placebo&quot;</span>, </span>
<span id="cb514-15"><a href="subsetting-data-frames.html#cb514-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">95</span>,.<span class="dv">05</span>)), </span>
<span id="cb514-16"><a href="subsetting-data-frames.html#cb514-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">10</span>, .<span class="dv">90</span>))</span>
<span id="cb514-17"><a href="subsetting-data-frames.html#cb514-17" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-18"><a href="subsetting-data-frames.html#cb514-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Report diarrhea side effect, Y/N</span></span>
<span id="cb514-19"><a href="subsetting-data-frames.html#cb514-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_diarrhea =</span> <span class="fu">if_else</span>(</span>
<span id="cb514-20"><a href="subsetting-data-frames.html#cb514-20" aria-hidden="true" tabindex="-1"></a>    drug <span class="sc">==</span> <span class="st">&quot;Placebo&quot;</span>, </span>
<span id="cb514-21"><a href="subsetting-data-frames.html#cb514-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">98</span>,.<span class="dv">02</span>)), </span>
<span id="cb514-22"><a href="subsetting-data-frames.html#cb514-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">20</span>, .<span class="dv">80</span>))</span>
<span id="cb514-23"><a href="subsetting-data-frames.html#cb514-23" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-24"><a href="subsetting-data-frames.html#cb514-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Report dry mouth side effect, Y/N</span></span>
<span id="cb514-25"><a href="subsetting-data-frames.html#cb514-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_dry_mouth =</span> <span class="fu">if_else</span>(</span>
<span id="cb514-26"><a href="subsetting-data-frames.html#cb514-26" aria-hidden="true" tabindex="-1"></a>    drug <span class="sc">==</span> <span class="st">&quot;Placebo&quot;</span>, </span>
<span id="cb514-27"><a href="subsetting-data-frames.html#cb514-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">97</span>,.<span class="dv">03</span>)), </span>
<span id="cb514-28"><a href="subsetting-data-frames.html#cb514-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">30</span>, .<span class="dv">70</span>))</span>
<span id="cb514-29"><a href="subsetting-data-frames.html#cb514-29" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb514-30"><a href="subsetting-data-frames.html#cb514-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Participant had myocardial infarction in study year, Y/N</span></span>
<span id="cb514-31"><a href="subsetting-data-frames.html#cb514-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">mi =</span> <span class="fu">if_else</span>(</span>
<span id="cb514-32"><a href="subsetting-data-frames.html#cb514-32" aria-hidden="true" tabindex="-1"></a>    drug <span class="sc">==</span> <span class="st">&quot;Placebo&quot;</span>, </span>
<span id="cb514-33"><a href="subsetting-data-frames.html#cb514-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">85</span>, .<span class="dv">15</span>)), </span>
<span id="cb514-34"><a href="subsetting-data-frames.html#cb514-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">60</span>, <span class="cn">TRUE</span>, <span class="fu">c</span>(.<span class="dv">80</span>, .<span class="dv">20</span>))</span>
<span id="cb514-35"><a href="subsetting-data-frames.html#cb514-35" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb514-36"><a href="subsetting-data-frames.html#cb514-36" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>As a reminder, we are simulating some drug trial data that includes the following variables:</p>
<ul>
<li><p>id: Study id, there are 20 people enrolled in the trial.</p></li>
<li><p>year: Follow-up year, 0 = baseline, 1 = year one, 2 = year two.</p></li>
<li><p>age: Participant age a baseline. Must be between the ages of 35 and 75 at baseline to be eligible for the study.</p></li>
<li><p>drug: Drug the participant received, Placebo or active.</p></li>
<li><p>se_headache: Reported headaches side effect, Y/N.</p></li>
<li><p>se_diarrhea: Report diarrhea side effect, Y/N.</p></li>
<li><p>se_dry_mouth: Report dry mouth side effect, Y/N.</p></li>
<li><p>mi: Participant had myocardial infarction in study year, Y/N.</p></li>
</ul>
<p>Actually, this data is slightly different than the data we used in the last chapter. Did you catch the difference? Take another look:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb515-1"><a href="subsetting-data-frames.html#cb515-1" aria-hidden="true" tabindex="-1"></a>drug_trial</span></code></pre></div>
<pre><code>## # A tibble: 60 × 7
##     year   age drug    se_headache se_diarrhea se_dry_mouth    mi
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;
##  1     0    65 Active            0           1            1     0
##  2     1    65 Active            1           1            1     0
##  3     2    65 Active            1           1            0     0
##  4     0    49 Active            1           1            1     0
##  5     1    49 Active            0           0            1     0
##  6     2    49 Active            1           1            1     0
##  7     0    48 Placebo           0           0            0     0
##  8     1    48 Placebo           0           0            0     0
##  9     2    48 Placebo           0           0            0     0
## 10     0    37 Placebo           0           0            0     0
## # … with 50 more rows</code></pre>
<p>We forgot to put a study id in our data. Because we simulated this data above, the best way to fix this oversite is to make the necessary change to the simulation code above. But, let’s pretend that someone sent us this data instead, and we have to add a new study id column to it. Well, we now know how to use the <code>mutate()</code> function to columns to our data frame. We can do so like this:</p>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb517-1"><a href="subsetting-data-frames.html#cb517-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="ot">&lt;-</span> drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb517-2"><a href="subsetting-data-frames.html#cb517-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb517-3"><a href="subsetting-data-frames.html#cb517-3" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Study id, there are 20 people enrolled in the trial.</span></span>
<span id="cb517-4"><a href="subsetting-data-frames.html#cb517-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>, <span class="at">each =</span> <span class="dv">3</span>)</span>
<span id="cb517-5"><a href="subsetting-data-frames.html#cb517-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb517-6"><a href="subsetting-data-frames.html#cb517-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 60 × 8
##     year   age drug    se_headache se_diarrhea se_dry_mouth    mi    id
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1     0    65 Active            0           1            1     0     1
##  2     1    65 Active            1           1            1     0     1
##  3     2    65 Active            1           1            0     0     1
##  4     0    49 Active            1           1            1     0     2
##  5     1    49 Active            0           0            1     0     2
##  6     2    49 Active            1           1            1     0     2
##  7     0    48 Placebo           0           0            0     0     3
##  8     1    48 Placebo           0           0            0     0     3
##  9     2    48 Placebo           0           0            0     0     3
## 10     0    37 Placebo           0           0            0     0     4
## # … with 50 more rows</code></pre>
<p>And now we have the study id in our data. But, by default R adds new columns as the rightmost column of the data frame. In terms of analysis, it doesn’t really matter where this column is located in our data. R couldn’t care less. However, when humans look at this data, they typically expect the study id (or some other identifier) to be the first column in the data frame. That is a job for <code>select()</code>.</p>
<div id="the-select-function" class="section level2" number="26.1">
<h2><span class="header-section-number">26.1</span> The select() function</h2>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb519-1"><a href="subsetting-data-frames.html#cb519-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb519-2"><a href="subsetting-data-frames.html#cb519-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, year, age, se_headache, se_diarrhea, se_dry_mouth, mi)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 7
##       id  year   age se_headache se_diarrhea se_dry_mouth    mi
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;
##  1     1     0    65           0           1            1     0
##  2     1     1    65           1           1            1     0
##  3     1     2    65           1           1            0     0
##  4     2     0    49           1           1            1     0
##  5     2     1    49           0           0            1     0
##  6     2     2    49           1           1            1     0
##  7     3     0    48           0           0            0     0
##  8     3     1    48           0           0            0     0
##  9     3     2    48           0           0            0     0
## 10     4     0    37           0           0            0     0
## # … with 50 more rows</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>select()</code> function to change the order of the columns in the <code>drug_trial</code> data frame so that <code>id</code> would be the first variable in the data frame when reading from left to right.</p></li>
<li><p>You can type <code>?select</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>select()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% select()</code>).</p></li>
<li><p>The second argument to the <code>select()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should column names or expressions that return column positions. We’ll dive deeper into this soon.</p></li>
</ul>
<p>More generally, the <code>select()</code> function tells R which variables in your data frame to keep (or drop) and in what order.</p>
<p>The code above gave us the result we wanted. 👏 But, it can be tedious and error prone to manually type every variable name inside the <code>select()</code> function. Did you notice that I forgot the <code>drug</code> column “by accident?”</p>
<p>Thankfully, the <code>select()</code> function is one of several <code>dplyr</code> functions that accept <a href="https://dplyr.tidyverse.org/reference/dplyr_tidy_select.html">tidy-select</a> argument modifiers (i.e., functions and operators). In this chapter, I will show you some of the tidy-select argument modifiers I regularly use, but you can always type <code>?dplyr_tidy_select</code> into your console to see a complete list.</p>
<p>In our little example above, we could have used the tidy-select <code>everything()</code> function to make our code easier to write and we wouldn’t have accidently missed the <code>drug</code> column. We can do so like this:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb521-1"><a href="subsetting-data-frames.html#cb521-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="ot">&lt;-</span> drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb521-2"><a href="subsetting-data-frames.html#cb521-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, <span class="fu">everything</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb521-3"><a href="subsetting-data-frames.html#cb521-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 60 × 8
##       id  year   age drug    se_headache se_diarrhea se_dry_mouth    mi
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;
##  1     1     0    65 Active            0           1            1     0
##  2     1     1    65 Active            1           1            1     0
##  3     1     2    65 Active            1           1            0     0
##  4     2     0    49 Active            1           1            1     0
##  5     2     1    49 Active            0           0            1     0
##  6     2     2    49 Active            1           1            1     0
##  7     3     0    48 Placebo           0           0            0     0
##  8     3     1    48 Placebo           0           0            0     0
##  9     3     2    48 Placebo           0           0            0     0
## 10     4     0    37 Placebo           0           0            0     0
## # … with 50 more rows</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>select()</code> function to change the order of the columns in the <code>drug_trial</code> data frame so that <code>id</code> would be the first variable in the data frame when reading from left to right.</p></li>
<li><p>Rather than explicitly typing the other column names, we used the <code>everything()</code> tidy-select function. As you may have guessed, <code>everything()</code> tells R to do X (in this keep) to all the other variables not explicitly mentioned.</p></li>
</ul>
<p>For our next example, let’s go ahead and add our mean-centered age variable to our <code>drug_trial</code> data again. We did this for the first time in the last chapter, in case you missed.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb523-1"><a href="subsetting-data-frames.html#cb523-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="ot">&lt;-</span> drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb523-2"><a href="subsetting-data-frames.html#cb523-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">age_center =</span> age <span class="sc">-</span> <span class="fu">mean</span>(age)) <span class="sc">%&gt;%</span> </span>
<span id="cb523-3"><a href="subsetting-data-frames.html#cb523-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 60 × 9
##       id  year   age drug    se_headache se_diarrhea se_dry_mouth    mi age_center
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;      &lt;dbl&gt;
##  1     1     0    65 Active            0           1            1     0       11.3
##  2     1     1    65 Active            1           1            1     0       11.3
##  3     1     2    65 Active            1           1            0     0       11.3
##  4     2     0    49 Active            1           1            1     0       -4.7
##  5     2     1    49 Active            0           0            1     0       -4.7
##  6     2     2    49 Active            1           1            1     0       -4.7
##  7     3     0    48 Placebo           0           0            0     0       -5.7
##  8     3     1    48 Placebo           0           0            0     0       -5.7
##  9     3     2    48 Placebo           0           0            0     0       -5.7
## 10     4     0    37 Placebo           0           0            0     0      -16.7
## # … with 50 more rows</code></pre>
<p>One way I will often use <code>select()</code> is for performing quick little <strong>data checks</strong>. For example, let’s say that I wanted to make sure the code I wrote above actually <em>did</em> what I <em>intended</em> it to do. If I print the entire data frame to the screen, <code>age</code> and <code>age_center</code> aren’t directly side-by-side, and there’s a lot of other visual clutter from the other variables. In a case like this, I would use <code>select()</code> to get a clearer picture:</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb525-1"><a href="subsetting-data-frames.html#cb525-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb525-2"><a href="subsetting-data-frames.html#cb525-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(age, age_center)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 2
##      age age_center
##    &lt;int&gt;      &lt;dbl&gt;
##  1    65       11.3
##  2    65       11.3
##  3    65       11.3
##  4    49       -4.7
##  5    49       -4.7
##  6    49       -4.7
##  7    48       -5.7
##  8    48       -5.7
##  9    48       -5.7
## 10    37      -16.7
## # … with 50 more rows</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>select()</code> function to view the <code>age</code> and <code>age_center</code> columns <em>only</em>.</p></li>
<li><p>We can type individual column names, separated by commas, into <code>select()</code> to return a data frame containing only those columns, and in that order.</p></li>
</ul>
<p class="warning">
⚠️<strong>Warning:</strong> Notice that I didn’t assign our result above to anything (i.e., there’s no <code>drug_trial &lt;-</code>). If I had done so, the <code>drug_trial</code> data would have contained these two columns only. I didn’t want to drop the other columns. I could have assigned the result of the code to a different R object (e.g., <code>check_age &lt;-</code>, but it wasn’t really necessary. I just wanted to quickly view <code>age</code> and <code>age_center</code> side-by-side for data checking purposes. When I’m satisfied that I coded it correctly, I can move on. There’s no need to save those results to an R object.
</p>
<p>You may also recall that we wanted to subset the <code>drug_trial</code> data to include only the columns we needed for the rowwise demonstrations. Here is the code we used to do so:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb527-1"><a href="subsetting-data-frames.html#cb527-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb527-2"><a href="subsetting-data-frames.html#cb527-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, year, <span class="fu">starts_with</span>(<span class="st">&quot;se&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 60 × 5
##       id  year se_headache se_diarrhea se_dry_mouth
##    &lt;int&gt; &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt;
##  1     1     0           0           1            1
##  2     1     1           1           1            1
##  3     1     2           1           1            0
##  4     2     0           1           1            1
##  5     2     1           0           0            1
##  6     2     2           1           1            1
##  7     3     0           0           0            0
##  8     3     1           0           0            0
##  9     3     2           0           0            0
## 10     4     0           0           0            0
## # … with 50 more rows</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>select()</code> function to view the <code>id</code> <code>year</code>, <code>se_headache</code>, <code>se_diarrhea</code>, and <code>se_dry_mouth</code> columns <em>only</em>.</p></li>
<li><p>We used the tidy-select <code>starts_with()</code> function to select all the side effect variables.</p></li>
</ul>
<p>We already know that we can use <code>everything()</code> to select <em>all</em> of the other variables in a data frame, but what if we just want to grab a <em>range</em> or <em>group</em> of other variables in a data frame? tidy-select makes it easy for us. Above, we used the <code>starts_with()</code> function to select all the columns with names that literally start with the letters “se.” Because all of the side effect columns are directly next to each other (i.e., no columns in between them) we could have also used the colon operator <code>:</code> like this:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb529-1"><a href="subsetting-data-frames.html#cb529-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb529-2"><a href="subsetting-data-frames.html#cb529-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, year, se_headache<span class="sc">:</span>se_dry_mouth)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 5
##       id  year se_headache se_diarrhea se_dry_mouth
##    &lt;int&gt; &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt;
##  1     1     0           0           1            1
##  2     1     1           1           1            1
##  3     1     2           1           1            0
##  4     2     0           1           1            1
##  5     2     1           0           0            1
##  6     2     2           1           1            1
##  7     3     0           0           0            0
##  8     3     1           0           0            0
##  9     3     2           0           0            0
## 10     4     0           0           0            0
## # … with 50 more rows</code></pre>
<p>While either method gets us the same result, I tend to prefer using <code>starts_with()</code> when possible. I think it makes your code easier to read (i.e., “Oh, he’s selecting all the side effect columns here.”).</p>
<p>In addition to <code>starts_with()</code>, there is also an <code>ends_with()</code> tidy-select function that can also be useful. For example, we’ve named factors with the <code>_f</code> naming convention throughout the book. We could use that, along with the <code>ends-with()</code> function to create a subset of our data that includes only the factor versions of our side effects columns.</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="subsetting-data-frames.html#cb531-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add the side effect factor columns to our data frame again...</span></span>
<span id="cb531-2"><a href="subsetting-data-frames.html#cb531-2" aria-hidden="true" tabindex="-1"></a>yn_levs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb531-3"><a href="subsetting-data-frames.html#cb531-3" aria-hidden="true" tabindex="-1"></a>yn_labs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>)</span>
<span id="cb531-4"><a href="subsetting-data-frames.html#cb531-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb531-5"><a href="subsetting-data-frames.html#cb531-5" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="ot">&lt;-</span> drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb531-6"><a href="subsetting-data-frames.html#cb531-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb531-7"><a href="subsetting-data-frames.html#cb531-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_headache_f  =</span> <span class="fu">factor</span>(se_headache, yn_levs, yn_labs),</span>
<span id="cb531-8"><a href="subsetting-data-frames.html#cb531-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_diarrhea_f  =</span> <span class="fu">factor</span>(se_diarrhea, yn_levs, yn_labs),</span>
<span id="cb531-9"><a href="subsetting-data-frames.html#cb531-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_dry_mouth_f =</span> <span class="fu">factor</span>(se_dry_mouth, yn_levs, yn_labs)</span>
<span id="cb531-10"><a href="subsetting-data-frames.html#cb531-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb532-1"><a href="subsetting-data-frames.html#cb532-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb532-2"><a href="subsetting-data-frames.html#cb532-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, year, <span class="fu">ends_with</span>(<span class="st">&quot;_f&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 60 × 5
##       id  year se_headache_f se_diarrhea_f se_dry_mouth_f
##    &lt;int&gt; &lt;int&gt; &lt;fct&gt;         &lt;fct&gt;         &lt;fct&gt;         
##  1     1     0 No            Yes           Yes           
##  2     1     1 Yes           Yes           Yes           
##  3     1     2 Yes           Yes           No            
##  4     2     0 Yes           Yes           Yes           
##  5     2     1 No            No            Yes           
##  6     2     2 Yes           Yes           Yes           
##  7     3     0 No            No            No            
##  8     3     1 No            No            No            
##  9     3     2 No            No            No            
## 10     4     0 No            No            No            
## # … with 50 more rows</code></pre>
<p class="note">
🗒<strong>Side Note:</strong> Variable names are important! Throughout this book, I’ve tried to repeatedly emphasize the importance of coding style – including the way we name our R objects. Many people who are new to data management and analysis (and some who aren’t, <strong>MDL</strong>) don’t fully appreciate the importance of such things. I hope that the preceding two examples are helping you to see why the little details, like variable names, are important. Using consistent variable naming conventions, for example, allows us to write code that requires less typing, is easier for humans to skim and understand, and is less prone to typos and other related errors.
</p>
<p>We can also select columns we want to keep by position instead of name. I don’t do this often. I think it’s generally better to use column names or tidy-select argument modifiers when subsetting columns in your data frame. However, I do sometimes select columns by position when I’m writing my own functions. Therefore, I want to quickly show you what this looks like:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb534-1"><a href="subsetting-data-frames.html#cb534-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb534-2"><a href="subsetting-data-frames.html#cb534-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 3
##       id  year drug   
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
##  1     1     0 Active 
##  2     1     1 Active 
##  3     1     2 Active 
##  4     2     0 Active 
##  5     2     1 Active 
##  6     2     2 Active 
##  7     3     0 Placebo
##  8     3     1 Placebo
##  9     3     2 Placebo
## 10     4     0 Placebo
## # … with 50 more rows</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We passed column numbers to the <code>select()</code> function to keep the 1st, 2nd, and 4th columns from our <code>drug_trial</code> data frame.</li>
</ul>
<p>Finally, in addition to using <code>select()</code> to <em>keep</em> columns in our data frame, we can also use <code>select()</code> to explicitly <em>drop</em> columns from our data frame. To do so, we just need to use either the subtraction symbol (<code>-</code>) or the Not operator (<code>!</code>).</p>
<p>Think back to our example from the previous chapter. There we created some new variables that captured information about participants reporting <em>any</em> and <em>all</em> side effects. During that process we created a column that contained a count of the side effects experienced in each year – <code>n_se_year</code>.</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="subsetting-data-frames.html#cb536-1" aria-hidden="true" tabindex="-1"></a>drug_trial_sub <span class="ot">&lt;-</span> drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb536-2"><a href="subsetting-data-frames.html#cb536-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb536-3"><a href="subsetting-data-frames.html#cb536-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb536-4"><a href="subsetting-data-frames.html#cb536-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_se_year   =</span> <span class="fu">sum</span>(se_headache, se_diarrhea, se_dry_mouth),</span>
<span id="cb536-5"><a href="subsetting-data-frames.html#cb536-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">any_se_year =</span> n_se_year <span class="sc">&gt;</span> <span class="dv">0</span>,</span>
<span id="cb536-6"><a href="subsetting-data-frames.html#cb536-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">all_se_year =</span> n_se_year <span class="sc">==</span> <span class="dv">3</span></span>
<span id="cb536-7"><a href="subsetting-data-frames.html#cb536-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb536-8"><a href="subsetting-data-frames.html#cb536-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb536-9"><a href="subsetting-data-frames.html#cb536-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">any_se =</span> <span class="fu">sum</span>(any_se_year) <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb536-10"><a href="subsetting-data-frames.html#cb536-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb536-11"><a href="subsetting-data-frames.html#cb536-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id<span class="sc">:</span>year, n_se_year<span class="sc">:</span>any_se) <span class="sc">%&gt;%</span> </span>
<span id="cb536-12"><a href="subsetting-data-frames.html#cb536-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 60 × 6
##       id  year n_se_year any_se_year all_se_year any_se
##    &lt;int&gt; &lt;int&gt;     &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt; 
##  1     1     0         2 TRUE        FALSE       TRUE  
##  2     1     1         3 TRUE        TRUE        TRUE  
##  3     1     2         2 TRUE        FALSE       TRUE  
##  4     2     0         3 TRUE        TRUE        TRUE  
##  5     2     1         1 TRUE        FALSE       TRUE  
##  6     2     2         3 TRUE        TRUE        TRUE  
##  7     3     0         0 FALSE       FALSE       FALSE 
##  8     3     1         0 FALSE       FALSE       FALSE 
##  9     3     2         0 FALSE       FALSE       FALSE 
## 10     4     0         0 FALSE       FALSE       FALSE 
## # … with 50 more rows</code></pre>
<p>Let’s say we decided we don’t need <code>n_se_year</code> column now that we created <code>any_se_year</code>, <code>all_se_year</code>, and <code>any_se</code>. We can easily drop it from the data frame in a couple of ways:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb538-1"><a href="subsetting-data-frames.html#cb538-1" aria-hidden="true" tabindex="-1"></a>drug_trial_sub <span class="sc">%&gt;%</span> </span>
<span id="cb538-2"><a href="subsetting-data-frames.html#cb538-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>n_se_year)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 5
##       id  year any_se_year all_se_year any_se
##    &lt;int&gt; &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt; 
##  1     1     0 TRUE        FALSE       TRUE  
##  2     1     1 TRUE        TRUE        TRUE  
##  3     1     2 TRUE        FALSE       TRUE  
##  4     2     0 TRUE        TRUE        TRUE  
##  5     2     1 TRUE        FALSE       TRUE  
##  6     2     2 TRUE        TRUE        TRUE  
##  7     3     0 FALSE       FALSE       FALSE 
##  8     3     1 FALSE       FALSE       FALSE 
##  9     3     2 FALSE       FALSE       FALSE 
## 10     4     0 FALSE       FALSE       FALSE 
## # … with 50 more rows</code></pre>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="subsetting-data-frames.html#cb540-1" aria-hidden="true" tabindex="-1"></a>drug_trial_sub <span class="sc">%&gt;%</span> </span>
<span id="cb540-2"><a href="subsetting-data-frames.html#cb540-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span>n_se_year)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 5
##       id  year any_se_year all_se_year any_se
##    &lt;int&gt; &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt; 
##  1     1     0 TRUE        FALSE       TRUE  
##  2     1     1 TRUE        TRUE        TRUE  
##  3     1     2 TRUE        FALSE       TRUE  
##  4     2     0 TRUE        TRUE        TRUE  
##  5     2     1 TRUE        FALSE       TRUE  
##  6     2     2 TRUE        TRUE        TRUE  
##  7     3     0 FALSE       FALSE       FALSE 
##  8     3     1 FALSE       FALSE       FALSE 
##  9     3     2 FALSE       FALSE       FALSE 
## 10     4     0 FALSE       FALSE       FALSE 
## # … with 50 more rows</code></pre>
<p>Note that we could have also dropped it indirectly by selecting everything else:</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="subsetting-data-frames.html#cb542-1" aria-hidden="true" tabindex="-1"></a>drug_trial_sub <span class="sc">%&gt;%</span> </span>
<span id="cb542-2"><a href="subsetting-data-frames.html#cb542-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id<span class="sc">:</span>year, any_se_year<span class="sc">:</span>any_se)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 5
##       id  year any_se_year all_se_year any_se
##    &lt;int&gt; &lt;int&gt; &lt;lgl&gt;       &lt;lgl&gt;       &lt;lgl&gt; 
##  1     1     0 TRUE        FALSE       TRUE  
##  2     1     1 TRUE        TRUE        TRUE  
##  3     1     2 TRUE        FALSE       TRUE  
##  4     2     0 TRUE        TRUE        TRUE  
##  5     2     1 TRUE        FALSE       TRUE  
##  6     2     2 TRUE        TRUE        TRUE  
##  7     3     0 FALSE       FALSE       FALSE 
##  8     3     1 FALSE       FALSE       FALSE 
##  9     3     2 FALSE       FALSE       FALSE 
## 10     4     0 FALSE       FALSE       FALSE 
## # … with 50 more rows</code></pre>
<p>But, I think this is generally a bad idea. Not only is it more typing, but skimming through your code doesn’t really tell me (or future you) what you were trying to accomplish there.</p>
</div>
<div id="the-rename-function" class="section level2" number="26.2">
<h2><span class="header-section-number">26.2</span> The rename() function</h2>
<p>Sometimes, we want to change the names of some, or all, of the columns in our data frame. For me, this most commonly comes up with data I’ve imported from someone else. For example, let’s say I’m importing data that uses column names that aren’t super informative. We saw column names like that when we imported NHANES data. It looked something like this:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb544-1"><a href="subsetting-data-frames.html#cb544-1" aria-hidden="true" tabindex="-1"></a>nhanes <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb544-2"><a href="subsetting-data-frames.html#cb544-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">SEQN =</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>),</span>
<span id="cb544-3"><a href="subsetting-data-frames.html#cb544-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ALQ101 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb544-4"><a href="subsetting-data-frames.html#cb544-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ALQ110 =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb544-5"><a href="subsetting-data-frames.html#cb544-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb544-6"><a href="subsetting-data-frames.html#cb544-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##    SEQN ALQ101 ALQ110
##   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     1      1      2
## 2     2      2      2
## 3     3      1      2
## 4     4      2      1</code></pre>
<p>We previously learned how to change these column names on import (i.e., <code>col_names</code>), but let’s say we didn’t do that for whatever reason. We can rename columns in our data frame using the <code>rename()</code> function like so:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb546-1"><a href="subsetting-data-frames.html#cb546-1" aria-hidden="true" tabindex="-1"></a>nhanes <span class="sc">%&gt;%</span> </span>
<span id="cb546-2"><a href="subsetting-data-frames.html#cb546-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb546-3"><a href="subsetting-data-frames.html#cb546-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">id =</span> SEQN,</span>
<span id="cb546-4"><a href="subsetting-data-frames.html#cb546-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">drinks_12_year =</span> ALQ101,</span>
<span id="cb546-5"><a href="subsetting-data-frames.html#cb546-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">drinks_12_life =</span> ALQ110</span>
<span id="cb546-6"><a href="subsetting-data-frames.html#cb546-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##      id drinks_12_year drinks_12_life
##   &lt;int&gt;          &lt;dbl&gt;          &lt;dbl&gt;
## 1     1              1              2
## 2     2              2              2
## 3     3              1              2
## 4     4              2              1</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>rename()</code> function to change the name of each column in the <code>drug_trial</code> data frame to be more informative.</p></li>
<li><p>You can type <code>?rename</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>rename()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% rename()</code>).</p></li>
<li><p>The second argument to the <code>rename()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should be a name value pair, or series of name-value pairs separated by columns. The name-value pairs should be in the format <code>new name = original name</code>.</p></li>
</ul>
<p>I think these names are much better, but for the sake of argument let’s say that we wanted to keep the original names – just coerce them to lowercase. We can do that using the <code>rename_with()</code> variation of the <code>rename()</code> function in combination with the <code>tolower()</code> function:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb548-1"><a href="subsetting-data-frames.html#cb548-1" aria-hidden="true" tabindex="-1"></a>nhanes <span class="sc">%&gt;%</span> </span>
<span id="cb548-2"><a href="subsetting-data-frames.html#cb548-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename_with</span>(tolower)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##    seqn alq101 alq110
##   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     1      1      2
## 2     2      2      2
## 3     3      1      2
## 4     4      2      1</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>rename_with()</code> function to coerce all column names in the <code>drug_trial</code> data frame to lowercase.</p></li>
<li><p>You can type <code>?rename</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>rename_with()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% rename_with()</code>).</p></li>
<li><p>The second argument to the <code>rename_with()</code> function is <code>.fn</code>. The value passed to the <code>.fn</code> argument should be a function that you want to apply to all the columns selected in the <code>.cols</code> argument (see below).</p></li>
<li><p>The third argument to the <code>rename_with()</code> function is <code>.cols</code>. The value passed to the <code>.cols</code> argument should be the columns you want to apply the function passed to the <code>.fn</code> argument to. You can select the columns using tidy-select argument modifiers.</p></li>
</ul>
</div>
<div id="the-filter-function" class="section level2" number="26.3">
<h2><span class="header-section-number">26.3</span> The filter() function</h2>
<p>We just saw how to keep and drop <em>columns</em> in our data frame using the <code>select()</code> function. We can keep and drop <em>rows</em> in our data frame using the <em>filter()</em> function or the <em>slice()</em> function.</p>
<p>Similar to selecting columns by position instead of name:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb550-1"><a href="subsetting-data-frames.html#cb550-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb550-2"><a href="subsetting-data-frames.html#cb550-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## # A tibble: 60 × 3
##       id  year drug   
##    &lt;int&gt; &lt;int&gt; &lt;chr&gt;  
##  1     1     0 Active 
##  2     1     1 Active 
##  3     1     2 Active 
##  4     2     0 Active 
##  5     2     1 Active 
##  6     2     2 Active 
##  7     3     0 Placebo
##  8     3     1 Placebo
##  9     3     2 Placebo
## 10     4     0 Placebo
## # … with 50 more rows</code></pre>
<p>We can also select rows we want to keep by position. Again, I don’t do this often, but it is sometimes useful when I’m writing my own functions. Therefore, I want to quickly show you what this looks like:</p>
<div class="sourceCode" id="cb552"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb552-1"><a href="subsetting-data-frames.html#cb552-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb552-2"><a href="subsetting-data-frames.html#cb552-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 12
##      id  year   age drug   se_headache se_diarrhea se_dry_mouth    mi age_center se_headache_f se_diarrhea_f se_dry_mouth_f
##   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;        &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;      &lt;dbl&gt; &lt;fct&gt;         &lt;fct&gt;         &lt;fct&gt;         
## 1     1     0    65 Active           0           1            1     0       11.3 No            Yes           Yes           
## 2     1     1    65 Active           1           1            1     0       11.3 Yes           Yes           Yes           
## 3     1     2    65 Active           1           1            0     0       11.3 Yes           Yes           No            
## 4     2     0    49 Active           1           1            1     0       -4.7 Yes           Yes           Yes           
## 5     2     1    49 Active           0           0            1     0       -4.7 No            No            Yes</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>slice()</code> function to keep only the first 5 rows in the <code>drug_trial</code> data frame.</p></li>
<li><p>You can type <code>?slice</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>slice()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% slice()</code>).</p></li>
<li><p>The second argument to the <code>slice()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should be a row numbers you want returned to you.</p></li>
</ul>
<p>Generally speaking, I’m far more likely to use the <code>filter()</code> function to select only a subset of rows from my data frame. Two of the most common scenarios, of many possible scenarios, where want to subset rows include:</p>
<ul>
<li><p>Performing a subgroup analysis. This is a situation where I want my analysis to include only some of the people (or places, or things) in my data frame.</p></li>
<li><p>Performing a complete case analysis. This is a situation where I want to remove rows that contain missing values from my data frame before performing an analysis.</p></li>
</ul>
<div id="subgroup-analysis" class="section level3" number="26.3.1">
<h3><span class="header-section-number">26.3.1</span> Subgroup analysis</h3>
<p>Let’s say that I want to count the number of people in the drug trial who reported having headaches in the baseline year by drug status (active vs. placebo). We would first use <code>filter()</code> to keep only the rows that contain data from the baseline year:</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb554-1"><a href="subsetting-data-frames.html#cb554-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb554-2"><a href="subsetting-data-frames.html#cb554-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">0</span>)</span></code></pre></div>
<pre><code>## # A tibble: 20 × 12
##       id  year   age drug    se_headache se_diarrhea se_dry_mouth    mi age_center se_headache_f se_diarrhea_f se_dry_mouth_f
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;      &lt;dbl&gt; &lt;fct&gt;         &lt;fct&gt;         &lt;fct&gt;         
##  1     1     0    65 Active            0           1            1     0     11.3   No            Yes           Yes           
##  2     2     0    49 Active            1           1            1     0     -4.7   Yes           Yes           Yes           
##  3     3     0    48 Placebo           0           0            0     0     -5.7   No            No            No            
##  4     4     0    37 Placebo           0           0            0     0    -16.7   No            No            No            
##  5     5     0    71 Placebo           0           0            0     0     17.3   No            No            No            
##  6     6     0    48 Placebo           0           0            0     0     -5.7   No            No            No            
##  7     7     0    59 Active            1           1            1     0      5.3   Yes           Yes           Yes           
##  8     8     0    60 Placebo           0           0            0     0      6.3   No            No            No            
##  9     9     0    61 Active            1           1            1     0      7.3   Yes           Yes           Yes           
## 10    10     0    39 Active            1           0            1     0    -14.7   Yes           No            Yes           
## 11    11     0    61 Placebo           0           0            0     0      7.3   No            No            No            
## 12    12     0    62 Placebo           1           0            1     0      8.3   Yes           No            Yes           
## 13    13     0    43 Placebo           0           0            0     0    -10.7   No            No            No            
## 14    14     0    63 Placebo           0           0            0     0      9.3   No            No            No            
## 15    15     0    69 Active            1           1            1     0     15.3   Yes           Yes           Yes           
## 16    16     0    42 Placebo           0           0            0     0    -11.7   No            No            No            
## 17    17     0    60 Placebo           0           0            0     0      6.3   No            No            No            
## 18    18     0    41 Active            1           1            1     0    -12.7   Yes           Yes           Yes           
## 19    19     0    43 Placebo           0           0            0     0    -10.7   No            No            No            
## 20    20     0    53 Placebo           0           0            0     0     -0.700 No            No            No</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>filter()</code> function to keep only the rows in the <code>drug_trial</code> data frame that contain data from the baseline year.</p></li>
<li><p>You can type <code>?filter</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>filter()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% filter()</code>).</p></li>
<li><p>The second argument to the <code>filter()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should be a name-value pair or multiple name value pairs separated by commas. The <code>...</code> argument is where you will tell <code>filter()</code> how to decide which rows to keep.</p></li>
</ul>
<p class="warning">
⚠️<strong>Warning:</strong> Remember, that in the R language <code>=</code> (i.e., one equal sign) and <code>==</code> (i.e., two equal signs) are different things. The <code>=</code> operator <em>tells</em> R to <em>make</em> the thing on the left equal to the thing on the right. In other words, it <em>assigns</em> values. The <code>==</code> <em>asks</em> R if the thing on the left is equal to the thing on the right. In other words, it <em>test the equality</em> of values.
</p>
<p>Now, we can use the descriptive analysis techniques we’ve already learned to answer our research question:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb556-1"><a href="subsetting-data-frames.html#cb556-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb556-2"><a href="subsetting-data-frames.html#cb556-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb556-3"><a href="subsetting-data-frames.html#cb556-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drug, se_headache_f) <span class="sc">%&gt;%</span> </span>
<span id="cb556-4"><a href="subsetting-data-frames.html#cb556-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
## # Groups:   drug [2]
##   drug    se_headache_f     n
##   &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt;
## 1 Active  No                1
## 2 Active  Yes               6
## 3 Placebo No               12
## 4 Placebo Yes               1</code></pre>
<p>So, 6 out of 7 (~ 86%) of the people in our active drug group reported headaches in the baseline year. Now, let’s say that we have reason to suspect that the drug affects people differently based on their age. Let’s go ahead and repeat this analysis, but only in a subgroup of people who are below age 65. Again, we can use the <code>filter()</code> function to do this:</p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb558-1"><a href="subsetting-data-frames.html#cb558-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb558-2"><a href="subsetting-data-frames.html#cb558-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb558-3"><a href="subsetting-data-frames.html#cb558-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">65</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb558-4"><a href="subsetting-data-frames.html#cb558-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drug, se_headache_f) <span class="sc">%&gt;%</span> </span>
<span id="cb558-5"><a href="subsetting-data-frames.html#cb558-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   drug [2]
##   drug    se_headache_f     n
##   &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt;
## 1 Active  Yes               5
## 2 Placebo No               11
## 3 Placebo Yes               1</code></pre>
<p>Wow! It looks like everyone under age 65 who received active drug also reported headaches!</p>
<p>We can show this more explicitly by using passing the value <code>FALSE</code> to the <code>.drop</code> argument of <code>group_by()</code>. This tells R to keep all factor levels in the output, even if they were <em>observed</em> in the data zero times.</p>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb560-1"><a href="subsetting-data-frames.html#cb560-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb560-2"><a href="subsetting-data-frames.html#cb560-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb560-3"><a href="subsetting-data-frames.html#cb560-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(age <span class="sc">&lt;</span> <span class="dv">65</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb560-4"><a href="subsetting-data-frames.html#cb560-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drug, se_headache_f, <span class="at">.drop =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb560-5"><a href="subsetting-data-frames.html#cb560-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
## # Groups:   drug [2]
##   drug    se_headache_f     n
##   &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt;
## 1 Active  No                0
## 2 Active  Yes               5
## 3 Placebo No               11
## 4 Placebo Yes               1</code></pre>
<p>Finally, we could make our code above more succinct by combining our two filter functions into one:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb562-1"><a href="subsetting-data-frames.html#cb562-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb562-2"><a href="subsetting-data-frames.html#cb562-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> age <span class="sc">&lt;</span> <span class="dv">65</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb562-3"><a href="subsetting-data-frames.html#cb562-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drug, se_headache_f, <span class="at">.drop =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb562-4"><a href="subsetting-data-frames.html#cb562-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
## # Groups:   drug [2]
##   drug    se_headache_f     n
##   &lt;chr&gt;   &lt;fct&gt;         &lt;int&gt;
## 1 Active  No                0
## 2 Active  Yes               5
## 3 Placebo No               11
## 4 Placebo Yes               1</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We used the <code>filter()</code> function to keep only the rows in the <code>drug_trial</code> data frame that contain data from the baseline year <em>AND</em> (<code>&amp;</code>) contain data from rows with a value that is less than 65 in the <code>age</code> column. The <em>AND</em> (<code>&amp;</code>) here is important. A row must satisfy both of these conditions in order for R to keep it in the returned data frame. If we had used <em>OR</em> instead (<code>filter(year == 0 | age &lt; 65)</code>), then only one condition <em>OR</em> the other would need to be met for R to keep the row in the returned data frame.</li>
</ul>
<p class="note">
🗒<strong>Side Note:</strong> In the R language, we use the pipe operator to create <em>OR</em> conditions. The pipe operator looks like <code>|</code> and is probably the key immediately to the right of your enter/return key on your keyboard.
</p>
</div>
<div id="complete-case-analysis" class="section level3" number="26.3.2">
<h3><span class="header-section-number">26.3.2</span> Complete case analysis</h3>
<p>Now let’s say that we want to compare age at baseline by drug status (active vs. placebo). Additionally, let’s say that we have some missing values in our data.</p>
<p>Let’s first simulate some new data with missing values:</p>
<div class="sourceCode" id="cb564"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb564-1"><a href="subsetting-data-frames.html#cb564-1" aria-hidden="true" tabindex="-1"></a>drug_trial_short <span class="ot">&lt;-</span> drug_trial <span class="sc">%&gt;%</span></span>
<span id="cb564-2"><a href="subsetting-data-frames.html#cb564-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb564-3"><a href="subsetting-data-frames.html#cb564-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb564-4"><a href="subsetting-data-frames.html#cb564-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb564-5"><a href="subsetting-data-frames.html#cb564-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">age  =</span> <span class="fu">replace</span>(age, <span class="dv">1</span>, <span class="cn">NA</span>),</span>
<span id="cb564-6"><a href="subsetting-data-frames.html#cb564-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">drug =</span> <span class="fu">replace</span>(drug, <span class="dv">4</span>, <span class="cn">NA</span>)</span>
<span id="cb564-7"><a href="subsetting-data-frames.html#cb564-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb564-8"><a href="subsetting-data-frames.html#cb564-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 12
##       id  year   age drug    se_headache se_diarrhea se_dry_mouth    mi age_center se_headache_f se_diarrhea_f se_dry_mouth_f
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;         &lt;int&gt;       &lt;int&gt;        &lt;int&gt; &lt;int&gt;      &lt;dbl&gt; &lt;fct&gt;         &lt;fct&gt;         &lt;fct&gt;         
##  1     1     0    NA Active            0           1            1     0       11.3 No            Yes           Yes           
##  2     2     0    49 Active            1           1            1     0       -4.7 Yes           Yes           Yes           
##  3     3     0    48 Placebo           0           0            0     0       -5.7 No            No            No            
##  4     4     0    37 &lt;NA&gt;              0           0            0     0      -16.7 No            No            No            
##  5     5     0    71 Placebo           0           0            0     0       17.3 No            No            No            
##  6     6     0    48 Placebo           0           0            0     0       -5.7 No            No            No            
##  7     7     0    59 Active            1           1            1     0        5.3 Yes           Yes           Yes           
##  8     8     0    60 Placebo           0           0            0     0        6.3 No            No            No            
##  9     9     0    61 Active            1           1            1     0        7.3 Yes           Yes           Yes           
## 10    10     0    39 Active            1           0            1     0      -14.7 Yes           No            Yes</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>filter()</code> and <code>slice()</code> functions to create a new data frame that contains only a subset of our original <code>drug_trial</code> data frame. The subset includes only the first 10 rows of the data frame remaining after selecting only the baseline year rows from the original data frame.</p></li>
<li><p>We used the <code>replace()</code> function to replace the first value of age with <code>NA</code> and the fourth value of <code>drug</code> with <code>NA</code>.</p></li>
<li><p>You can type <code>?replace</code> into your R console to view the help documentation for this function.</p></li>
</ul>
<p>If we try to answer our research question above without dealing with the missing data, we get the following undesirable results:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb566-1"><a href="subsetting-data-frames.html#cb566-1" aria-hidden="true" tabindex="-1"></a>drug_trial_short <span class="sc">%&gt;%</span> </span>
<span id="cb566-2"><a href="subsetting-data-frames.html#cb566-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drug) <span class="sc">%&gt;%</span> </span>
<span id="cb566-3"><a href="subsetting-data-frames.html#cb566-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   drug    mean_age
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 Active      NA  
## 2 Placebo     56.8
## 3 &lt;NA&gt;        37</code></pre>
<p>One way we can improve our result is by adding the <code>na.rm</code> argument to the <code>mean()</code> function.</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb568-1"><a href="subsetting-data-frames.html#cb568-1" aria-hidden="true" tabindex="-1"></a>drug_trial_short <span class="sc">%&gt;%</span> </span>
<span id="cb568-2"><a href="subsetting-data-frames.html#cb568-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drug) <span class="sc">%&gt;%</span> </span>
<span id="cb568-3"><a href="subsetting-data-frames.html#cb568-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(age, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   drug    mean_age
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 Active      52  
## 2 Placebo     56.8
## 3 &lt;NA&gt;        37</code></pre>
<p>But, we previously saw how it can sometimes be more efficient to drop the row with missing data from the data frame explicitly. This is called a <strong>complete case analysis</strong> or <strong>list-wise deletion</strong>.</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb570-1"><a href="subsetting-data-frames.html#cb570-1" aria-hidden="true" tabindex="-1"></a>drug_trial_short <span class="sc">%&gt;%</span> </span>
<span id="cb570-2"><a href="subsetting-data-frames.html#cb570-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(age)) <span class="sc">%&gt;%</span> </span>
<span id="cb570-3"><a href="subsetting-data-frames.html#cb570-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drug) <span class="sc">%&gt;%</span> </span>
<span id="cb570-4"><a href="subsetting-data-frames.html#cb570-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   drug    mean_age
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 Active      52  
## 2 Placebo     56.8
## 3 &lt;NA&gt;        37</code></pre>
<p>However, we still have that missing value for <code>drug</code>. We can easily drop the row with the missing value by adding and additional value to the <code>...</code> argument of our <code>filter()</code> function:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb572-1"><a href="subsetting-data-frames.html#cb572-1" aria-hidden="true" tabindex="-1"></a>drug_trial_short <span class="sc">%&gt;%</span> </span>
<span id="cb572-2"><a href="subsetting-data-frames.html#cb572-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(age) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(drug)) <span class="sc">%&gt;%</span> </span>
<span id="cb572-3"><a href="subsetting-data-frames.html#cb572-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(drug) <span class="sc">%&gt;%</span> </span>
<span id="cb572-4"><a href="subsetting-data-frames.html#cb572-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_age =</span> <span class="fu">mean</span>(age))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 2
##   drug    mean_age
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 Active      52  
## 2 Placebo     56.8</code></pre>
</div>
</div>
<div id="deduplication" class="section level2" number="26.4">
<h2><span class="header-section-number">26.4</span> Deduplication</h2>
<p>Another common data management task that I want to discuss in this chapter is deduplicating data. Let’s go ahead and simulate some data to illustrate what I mean:</p>
<div class="sourceCode" id="cb574"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb574-1"><a href="subsetting-data-frames.html#cb574-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb574-2"><a href="subsetting-data-frames.html#cb574-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>id, <span class="sc">~</span>day, <span class="sc">~</span>x,</span>
<span id="cb574-3"><a href="subsetting-data-frames.html#cb574-3" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>,</span>
<span id="cb574-4"><a href="subsetting-data-frames.html#cb574-4" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">11</span>,</span>
<span id="cb574-5"><a href="subsetting-data-frames.html#cb574-5" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">12</span>,</span>
<span id="cb574-6"><a href="subsetting-data-frames.html#cb574-6" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">13</span>,</span>
<span id="cb574-7"><a href="subsetting-data-frames.html#cb574-7" aria-hidden="true" tabindex="-1"></a>    <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">14</span>,</span>
<span id="cb574-8"><a href="subsetting-data-frames.html#cb574-8" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">12</span>,</span>
<span id="cb574-9"><a href="subsetting-data-frames.html#cb574-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">12</span>,</span>
<span id="cb574-10"><a href="subsetting-data-frames.html#cb574-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">13</span>,</span>
<span id="cb574-11"><a href="subsetting-data-frames.html#cb574-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">13</span>,</span>
<span id="cb574-12"><a href="subsetting-data-frames.html#cb574-12" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">10</span>,</span>
<span id="cb574-13"><a href="subsetting-data-frames.html#cb574-13" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">11</span>,</span>
<span id="cb574-14"><a href="subsetting-data-frames.html#cb574-14" aria-hidden="true" tabindex="-1"></a>    <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">10</span></span>
<span id="cb574-15"><a href="subsetting-data-frames.html#cb574-15" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb574-16"><a href="subsetting-data-frames.html#cb574-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 12 × 3
##       id   day     x
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1     1     1
##  2     1     2    11
##  3     2     1    12
##  4     2     2    13
##  5     2     2    14
##  6     3     1    12
##  7     3     1    12
##  8     3     2    13
##  9     4     1    13
## 10     5     1    10
## 11     5     2    11
## 12     5     1    10</code></pre>
<ul>
<li><p>All id’s but 4 have multiple observations.</p></li>
<li><p>Id 2 has row with duplicate values for <code>id</code> and <code>day</code>, but a non-duplicate value for <code>x</code>. These rows are partial duplicates.</p></li>
<li><p>ID 3 has a row with duplicate values for all three columns (i.e., <code>3, 1, 12</code>). These rows are complete duplicates.</p></li>
<li><p>ID 5 has a row with duplicate values for all three columns (i.e., <code>5, 1, 10</code>). These rows are complete duplicates. However, they are not in sequential order in the dataset.</p></li>
</ul>
<div id="the-distinct-function" class="section level3" number="26.4.1">
<h3><span class="header-section-number">26.4.1</span> The distinct() function</h3>
<p>We can use <code>dplyr</code>’s <code>distinct()</code> function to remove all complete duplicates from the data frame:</p>
<div class="sourceCode" id="cb576"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb576-1"><a href="subsetting-data-frames.html#cb576-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb576-2"><a href="subsetting-data-frames.html#cb576-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##       id   day     x
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1     1     1     1
##  2     1     2    11
##  3     2     1    12
##  4     2     2    13
##  5     2     2    14
##  6     3     1    12
##  7     3     2    13
##  8     4     1    13
##  9     5     1    10
## 10     5     2    11</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>distinct()</code> function to keep only one row from a group of complete duplicate rows in the <code>df</code> data frame.</p></li>
<li><p>You can type <code>?distinct</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>The first argument to the <code>distinct()</code> function is <code>.data</code>. The value passed to <code>.data</code> should always be a data frame. In this book, we will often pass data frames to the <code>.data</code> argument using the pipe operator (e.g., <code>df %&gt;% distinct()</code>).</p></li>
<li><p>The second argument to the <code>distinct()</code> function is <code>...</code>. The value passed to the <code>...</code> argument should be the variables to use when determining uniqueness. Passing no variables to the <code>...</code> argument is equivalent to pass all variables to the <code>...</code> argument.</p></li>
</ul>
</div>
<div id="complete-duplicate-row-add-tag" class="section level3" number="26.4.2">
<h3><span class="header-section-number">26.4.2</span> Complete duplicate row add tag</h3>
<p>If want to identify the complete duplicate rows, without immediately dropping them, we can use the <code>duplicated()</code> function inside the <code>mutate()</code> function. This creates a new column in our data frame that has the value <code>TRUE</code> when the row is a complete duplicate and the value <code>FALSE</code> otherwise.</p>
<div class="sourceCode" id="cb578"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb578-1"><a href="subsetting-data-frames.html#cb578-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb578-2"><a href="subsetting-data-frames.html#cb578-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">duplicated</span>(df))</span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##       id   day     x dup  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;
##  1     1     1     1 FALSE
##  2     1     2    11 FALSE
##  3     2     1    12 FALSE
##  4     2     2    13 FALSE
##  5     2     2    14 FALSE
##  6     3     1    12 FALSE
##  7     3     1    12 TRUE 
##  8     3     2    13 FALSE
##  9     4     1    13 FALSE
## 10     5     1    10 FALSE
## 11     5     2    11 FALSE
## 12     5     1    10 TRUE</code></pre>
<p>Alternatively, we could get the same result using:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb580-1"><a href="subsetting-data-frames.html#cb580-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb580-2"><a href="subsetting-data-frames.html#cb580-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by_all</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb580-3"><a href="subsetting-data-frames.html#cb580-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb580-4"><a href="subsetting-data-frames.html#cb580-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">n_row =</span> <span class="fu">row_number</span>(),</span>
<span id="cb580-5"><a href="subsetting-data-frames.html#cb580-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">dup   =</span> n_row <span class="sc">&gt;</span> <span class="dv">1</span></span>
<span id="cb580-6"><a href="subsetting-data-frames.html#cb580-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 12 × 5
## # Groups:   id, day, x [10]
##       id   day     x n_row dup  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;lgl&gt;
##  1     1     1     1     1 FALSE
##  2     1     2    11     1 FALSE
##  3     2     1    12     1 FALSE
##  4     2     2    13     1 FALSE
##  5     2     2    14     1 FALSE
##  6     3     1    12     1 FALSE
##  7     3     1    12     2 TRUE 
##  8     3     2    13     1 FALSE
##  9     4     1    13     1 FALSE
## 10     5     1    10     1 FALSE
## 11     5     2    11     1 FALSE
## 12     5     1    10     2 TRUE</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>group_by_all()</code> function to split our data frame into multiple data frames grouped by all the columns in <code>df</code>.</p></li>
<li><p>We used the <code>row_number()</code> to sequentially count every row in each of the little data frames created by <code>group_by_all()</code>. We assigned the sequential count to a new column named <code>n_row</code>.</p></li>
<li><p>We created a new column named <code>dup</code> that has a value of <code>TRUE</code> when the value of <code>n_row</code> is greater than 1 and <code>FALSE</code> otherwise.</p></li>
</ul>
<p>Notice that R only tags the second in a set of duplicate rows as a duplicate. Below we tag both rows with complete duplicate values.</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb582-1"><a href="subsetting-data-frames.html#cb582-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb582-2"><a href="subsetting-data-frames.html#cb582-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dup =</span> <span class="fu">duplicated</span>(.) <span class="sc">|</span> <span class="fu">duplicated</span>(., <span class="at">fromLast =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 12 × 4
##       id   day     x dup  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;lgl&gt;
##  1     1     1     1 FALSE
##  2     1     2    11 FALSE
##  3     2     1    12 FALSE
##  4     2     2    13 FALSE
##  5     2     2    14 FALSE
##  6     3     1    12 TRUE 
##  7     3     1    12 TRUE 
##  8     3     2    13 FALSE
##  9     4     1    13 FALSE
## 10     5     1    10 TRUE 
## 11     5     2    11 FALSE
## 12     5     1    10 TRUE</code></pre>
</div>
<div id="partial-duplicate-rows" class="section level3" number="26.4.3">
<h3><span class="header-section-number">26.4.3</span> Partial duplicate rows</h3>
<div class="sourceCode" id="cb584"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb584-1"><a href="subsetting-data-frames.html#cb584-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb584-2"><a href="subsetting-data-frames.html#cb584-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(id, day, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 3
##      id   day     x
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1     1     1     1
## 2     1     2    11
## 3     2     1    12
## 4     2     2    13
## 5     3     1    12
## 6     3     2    13
## 7     4     1    13
## 8     5     1    10
## 9     5     2    11</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used the <code>distinct()</code> function to keep only one row from a group of duplicate rows in the <code>df</code> data frame.</p></li>
<li><p>You can type <code>?distinct</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>This time we passed the column names <code>id</code> and <code>day</code> to the <code>...</code> argument. This tells R to consider any rows that have the same value of <code>id</code> <em>AND</em> <code>day</code> to be duplicates – even if they have different values in their other columns.</p></li>
<li><p>The <code>.keep_all</code> argument tells R to return all of the columns in <code>df</code> to us – not just the columns that we are testing for uniqueness (i.e., <code>id</code> and <code>day</code>).</p></li>
</ul>
</div>
<div id="partial-duplicate-rows---add-tag" class="section level3" number="26.4.4">
<h3><span class="header-section-number">26.4.4</span> Partial duplicate rows - add tag</h3>
<p>We can tag partial duplicate rows in a similar fashion to the way we tagged complete duplicate rows above:</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb586-1"><a href="subsetting-data-frames.html#cb586-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb586-2"><a href="subsetting-data-frames.html#cb586-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id, day) <span class="sc">%&gt;%</span> </span>
<span id="cb586-3"><a href="subsetting-data-frames.html#cb586-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb586-4"><a href="subsetting-data-frames.html#cb586-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">row_number</span>(), <span class="co"># Counts rows by group</span></span>
<span id="cb586-5"><a href="subsetting-data-frames.html#cb586-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">dup   =</span> count <span class="sc">&gt;</span> <span class="dv">1</span>     <span class="co"># TRUE if there is more than one row per group</span></span>
<span id="cb586-6"><a href="subsetting-data-frames.html#cb586-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 12 × 5
## # Groups:   id, day [9]
##       id   day     x count dup  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;lgl&gt;
##  1     1     1     1     1 FALSE
##  2     1     2    11     1 FALSE
##  3     2     1    12     1 FALSE
##  4     2     2    13     1 FALSE
##  5     2     2    14     2 TRUE 
##  6     3     1    12     1 FALSE
##  7     3     1    12     2 TRUE 
##  8     3     2    13     1 FALSE
##  9     4     1    13     1 FALSE
## 10     5     1    10     1 FALSE
## 11     5     2    11     1 FALSE
## 12     5     1    10     2 TRUE</code></pre>
</div>
<div id="count-the-number-of-duplicates" class="section level3" number="26.4.5">
<h3><span class="header-section-number">26.4.5</span> Count the number of duplicates</h3>
<p>Finally, sometimes it can be useful to get a count of the number of duplicate rows. The code below returns a data frame that summarizes the number of rows that contain duplicate values for <code>id</code> and <code>day</code>, and what those duplicate values are.</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb588-1"><a href="subsetting-data-frames.html#cb588-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb588-2"><a href="subsetting-data-frames.html#cb588-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id, day) <span class="sc">%&gt;%</span> </span>
<span id="cb588-3"><a href="subsetting-data-frames.html#cb588-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb588-4"><a href="subsetting-data-frames.html#cb588-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
## # Groups:   id, day [3]
##      id   day     n
##   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
## 1     2     2     2
## 2     3     1     2
## 3     5     1     2</code></pre>
</div>
<div id="what-to-do-about-duplicates" class="section level3" number="26.4.6">
<h3><span class="header-section-number">26.4.6</span> What to do about duplicates</h3>
<p>Finding duplicates is only half the battle. After finding them, you have to decide what to do about them. In some ways it’s hard to give clear-cut advice on this because different situations require different decisions. However, here are some things you may want to consider:</p>
<ul>
<li><p>If two or more rows are complete duplicates, then the additional rows provide no additional information. I have a hard time thinking of a scenario where dropping them would be a problem. Additionally, because they are completely identical, it doesn’t matter which row you drop.</p></li>
<li><p>If have two more rows that are partial duplicates, then you will want to look for obvious errors in the other variables. When you have two rows that are partial duplicates, and one row has very obvious errors in it, then keeping the row without the obvious errors is <em>usually</em> the correct decision. Having said that, you should meticulously document which rows you dropped and why, and make that information known to anyone consuming the results of your analysis.</p></li>
<li><p>When there are no obvious errors, deciding which rows to keep and which to drop can be really tricky. In this situation the best advice I can give is to be systematic in your approach. What I mean by that is to choose a strategy that seems least likely to introduce bias into your data and then apply that strategy consistently throughout your data. So, something like always keeping the first row among a group of duplicate rows. However, keep in mind that if rows are ordered by data, this strategy could easily introduce bias. In that case, some other strategy may be more appropriate. And again, you should meticulously document which rows you dropped and why, and make that information known to anyone consuming the results of your analysis.</p></li>
<li><p>Finally, I can definitively tell you a strategy that you should <em>never</em> use. That is, you should never pick and choose, or even give the appearance of picking and choosing, rows with values that are aligned with the results you want to see. I hope the unethical nature of this strategy is blatantly obvious to you.</p></li>
</ul>
<p>Congratulations! 🎉 At this point, you are well-versed in all of the <code>dplyr</code> verbs. More importantly, you now have a foundation of tools you can call upon to complete the many of basic data management tasks that you will encounter. In the rest of the data management part of the book we will build on these tools, and learn some new tools, we can use to solve more complex data management problems.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="creating-and-modifying-columns.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="working-with-dates.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/brad-cannell/r4epi/edit/master/chapters/05_part_data_management/03_subsetting_data_frames.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
