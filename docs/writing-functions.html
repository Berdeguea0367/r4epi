<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>33 Writing functions | R for Epidemiology</title>
  <meta name="description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="33 Writing functions | R for Epidemiology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r4epi/" />
  
  <meta property="og:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="github-repo" content="brad-cannell/r4epi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="33 Writing functions | R for Epidemiology" />
  
  <meta name="twitter:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2020-08-03" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction-to-repeated-operations.html"/>
<link rel="next" href="column-wise-operations-in-dplyr.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.13/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Epidemiology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="" data-path="about-the-author.html"><a href="about-the-author.html"><i class="fa fa-check"></i>About the Author</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="part"><span><b>I Getting Started</b></span></li>
<li class="chapter" data-level="1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-mac"><i class="fa fa-check"></i><b>1.1</b> Download and install on a Mac</a></li>
<li class="chapter" data-level="1.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-pc"><i class="fa fa-check"></i><b>1.2</b> Download and install on a PC</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>2</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="what-is-r.html"><a href="what-is-r.html#what-is-data"><i class="fa fa-check"></i><b>2.1</b> What is data?</a></li>
<li class="chapter" data-level="2.2" data-path="what-is-r.html"><a href="what-is-r.html#what-is-r-1"><i class="fa fa-check"></i><b>2.2</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="what-is-r.html"><a href="what-is-r.html#transferring-data"><i class="fa fa-check"></i><b>2.2.1</b> Transferring data</a></li>
<li class="chapter" data-level="2.2.2" data-path="what-is-r.html"><a href="what-is-r.html#managing-data"><i class="fa fa-check"></i><b>2.2.2</b> Managing data</a></li>
<li class="chapter" data-level="2.2.3" data-path="what-is-r.html"><a href="what-is-r.html#analyzing-data"><i class="fa fa-check"></i><b>2.2.3</b> Analyzing data</a></li>
<li class="chapter" data-level="2.2.4" data-path="what-is-r.html"><a href="what-is-r.html#presenting-data"><i class="fa fa-check"></i><b>2.2.4</b> Presenting data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html"><i class="fa fa-check"></i><b>3</b> Navigating the RStudio interface</a>
<ul>
<li class="chapter" data-level="3.1" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-console"><i class="fa fa-check"></i><b>3.1</b> The console</a></li>
<li class="chapter" data-level="3.2" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-environment-pane"><i class="fa fa-check"></i><b>3.2</b> The environment pane</a></li>
<li class="chapter" data-level="3.3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-files-pane"><i class="fa fa-check"></i><b>3.3</b> The files pane</a></li>
<li class="chapter" data-level="3.4" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-source-pane"><i class="fa fa-check"></i><b>3.4</b> The source pane</a></li>
<li class="chapter" data-level="3.5" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#rstudio-preferences"><i class="fa fa-check"></i><b>3.5</b> RStudio preferences</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html"><i class="fa fa-check"></i><b>4</b> Speaking R’s language</a>
<ul>
<li class="chapter" data-level="4.1" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#r-is-a-language"><i class="fa fa-check"></i><b>4.1</b> R is a <em>language</em></a></li>
<li class="chapter" data-level="4.2" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#the-r-interpreter"><i class="fa fa-check"></i><b>4.2</b> The R interpreter</a></li>
<li class="chapter" data-level="4.3" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#errors"><i class="fa fa-check"></i><b>4.3</b> Errors</a></li>
<li class="chapter" data-level="4.4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#functions"><i class="fa fa-check"></i><b>4.4</b> Functions</a></li>
<li class="chapter" data-level="4.5" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#objects"><i class="fa fa-check"></i><b>4.5</b> Objects</a></li>
<li class="chapter" data-level="4.6" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#comments"><i class="fa fa-check"></i><b>4.6</b> Comments</a></li>
<li class="chapter" data-level="4.7" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#packages"><i class="fa fa-check"></i><b>4.7</b> Packages</a></li>
<li class="chapter" data-level="4.8" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#programming-style"><i class="fa fa-check"></i><b>4.8</b> Programming style</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lets-get-programming.html"><a href="lets-get-programming.html"><i class="fa fa-check"></i><b>5</b> Let’s get programming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#simulating-data"><i class="fa fa-check"></i><b>5.1</b> Simulating data</a></li>
<li class="chapter" data-level="5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vectors"><i class="fa fa-check"></i><b>5.2</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vector-types"><i class="fa fa-check"></i><b>5.2.1</b> Vector types</a></li>
<li class="chapter" data-level="5.2.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#double-vectors"><i class="fa fa-check"></i><b>5.2.2</b> Double vectors</a></li>
<li class="chapter" data-level="5.2.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#integer-vectors"><i class="fa fa-check"></i><b>5.2.3</b> Integer vectors</a></li>
<li class="chapter" data-level="5.2.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#logical-vectors"><i class="fa fa-check"></i><b>5.2.4</b> Logical vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#data-frames"><i class="fa fa-check"></i><b>5.3</b> Data frames</a></li>
<li class="chapter" data-level="5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#missing-data"><i class="fa fa-check"></i><b>5.4</b> Missing data</a></li>
<li class="chapter" data-level="5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#our-first-analysis"><i class="fa fa-check"></i><b>5.5</b> Our first analysis</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#manual-calculation-of-the-mean"><i class="fa fa-check"></i><b>5.5.1</b> Manual calculation of the mean</a></li>
<li class="chapter" data-level="5.5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#dollar-sign-notation"><i class="fa fa-check"></i><b>5.5.2</b> Dollar sign notation</a></li>
<li class="chapter" data-level="5.5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#bracket-notation"><i class="fa fa-check"></i><b>5.5.3</b> Bracket notation</a></li>
<li class="chapter" data-level="5.5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-sum-function"><i class="fa fa-check"></i><b>5.5.4</b> The sum function</a></li>
<li class="chapter" data-level="5.5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#nesting-functions"><i class="fa fa-check"></i><b>5.5.5</b> Nesting functions</a></li>
<li class="chapter" data-level="5.5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-length-function"><i class="fa fa-check"></i><b>5.5.6</b> The length function</a></li>
<li class="chapter" data-level="5.5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-mean-function"><i class="fa fa-check"></i><b>5.5.7</b> The mean function</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#some-common-errors"><i class="fa fa-check"></i><b>5.6</b> Some common errors</a></li>
<li class="chapter" data-level="5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#summary"><i class="fa fa-check"></i><b>5.7</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>II Coding Tools and Best Practices</b></span></li>
<li class="chapter" data-level="6" data-path="r-scripts.html"><a href="r-scripts.html"><i class="fa fa-check"></i><b>6</b> R scripts</a>
<ul>
<li class="chapter" data-level="6.1" data-path="r-scripts.html"><a href="r-scripts.html#creating-r-scripts"><i class="fa fa-check"></i><b>6.1</b> Creating R scripts</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>7</b> R markdown</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-markdown.html"><a href="r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>7.1</b> What is R markdown?</a></li>
<li class="chapter" data-level="7.2" data-path="r-markdown.html"><a href="r-markdown.html#why-use-r-markdown"><i class="fa fa-check"></i><b>7.2</b> Why use R markdown?</a></li>
<li class="chapter" data-level="7.3" data-path="r-markdown.html"><a href="r-markdown.html#create-an-r-notebook"><i class="fa fa-check"></i><b>7.3</b> Create an R Notebook</a></li>
<li class="chapter" data-level="7.4" data-path="r-markdown.html"><a href="r-markdown.html#yaml-headers"><i class="fa fa-check"></i><b>7.4</b> YAML headers</a></li>
<li class="chapter" data-level="7.5" data-path="r-markdown.html"><a href="r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>7.5</b> R code chunks</a></li>
<li class="chapter" data-level="7.6" data-path="r-markdown.html"><a href="r-markdown.html#markdown"><i class="fa fa-check"></i><b>7.6</b> Markdown</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-projects.html"><a href="r-projects.html"><i class="fa fa-check"></i><b>8</b> R projects</a></li>
<li class="chapter" data-level="9" data-path="coding-best-practices.html"><a href="coding-best-practices.html"><i class="fa fa-check"></i><b>9</b> Coding best practices</a>
<ul>
<li class="chapter" data-level="9.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#general-principles"><i class="fa fa-check"></i><b>9.1</b> General principles</a></li>
<li class="chapter" data-level="9.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#code-comments"><i class="fa fa-check"></i><b>9.2</b> Code comments</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#defining-key-variables"><i class="fa fa-check"></i><b>9.2.1</b> Defining key variables</a></li>
<li class="chapter" data-level="9.2.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#what-this-code-is-trying-to-accomplish"><i class="fa fa-check"></i><b>9.2.2</b> What this code is trying to accomplish</a></li>
<li class="chapter" data-level="9.2.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#why-i-chose-this-particular-strategy"><i class="fa fa-check"></i><b>9.2.3</b> Why I chose this particular strategy</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#style-guidelines"><i class="fa fa-check"></i><b>9.3</b> Style guidelines</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#object-variable-names"><i class="fa fa-check"></i><b>9.3.1</b> Object (variable) names</a></li>
<li class="chapter" data-level="9.3.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#use-names-that-are-informative"><i class="fa fa-check"></i><b>9.3.2</b> Use names that are informative</a></li>
<li class="chapter" data-level="9.3.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#file-names"><i class="fa fa-check"></i><b>9.3.3</b> File Names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="using-pipes.html"><a href="using-pipes.html"><i class="fa fa-check"></i><b>10</b> Using pipes</a>
<ul>
<li class="chapter" data-level="10.1" data-path="using-pipes.html"><a href="using-pipes.html#what-are-pipes"><i class="fa fa-check"></i><b>10.1</b> What are pipes?</a></li>
<li class="chapter" data-level="10.2" data-path="using-pipes.html"><a href="using-pipes.html#how-do-pipes-work"><i class="fa fa-check"></i><b>10.2</b> How do pipes work?</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="using-pipes.html"><a href="using-pipes.html#keyboard-shortcut"><i class="fa fa-check"></i><b>10.2.1</b> Keyboard shortcut</a></li>
<li class="chapter" data-level="10.2.2" data-path="using-pipes.html"><a href="using-pipes.html#pipe-style"><i class="fa fa-check"></i><b>10.2.2</b> Pipe style</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="using-pipes.html"><a href="using-pipes.html#final-thought-on-pipes"><i class="fa fa-check"></i><b>10.3</b> Final thought on pipes</a></li>
</ul></li>
<li class="part"><span><b>III Data Transfer</b></span></li>
<li class="chapter" data-level="11" data-path="introduction-to-data-transfer.html"><a href="introduction-to-data-transfer.html"><i class="fa fa-check"></i><b>11</b> Introduction to data transfer</a></li>
<li class="chapter" data-level="12" data-path="file-paths.html"><a href="file-paths.html"><i class="fa fa-check"></i><b>12</b> File paths</a>
<ul>
<li class="chapter" data-level="12.1" data-path="file-paths.html"><a href="file-paths.html#finding-file-paths"><i class="fa fa-check"></i><b>12.1</b> Finding file paths</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html"><i class="fa fa-check"></i><b>13</b> Importing plain text files</a>
<ul>
<li class="chapter" data-level="13.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#packages-for-importing-data"><i class="fa fa-check"></i><b>13.1</b> Packages for importing data</a></li>
<li class="chapter" data-level="13.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-space-delimited-files"><i class="fa fa-check"></i><b>13.2</b> Importing space delimited files</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#specifying-missing-data-values"><i class="fa fa-check"></i><b>13.2.1</b> Specifying missing data values</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-tab-delimited-files"><i class="fa fa-check"></i><b>13.3</b> Importing tab delimited files</a></li>
<li class="chapter" data-level="13.4" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-fixed-width-format-files"><i class="fa fa-check"></i><b>13.4</b> Importing fixed width format files</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#vector-of-column-widths"><i class="fa fa-check"></i><b>13.4.1</b> Vector of column widths</a></li>
<li class="chapter" data-level="13.4.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#paired-vector-of-start-and-end-positions"><i class="fa fa-check"></i><b>13.4.2</b> Paired vector of start and end positions</a></li>
<li class="chapter" data-level="13.4.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#using-named-arguments"><i class="fa fa-check"></i><b>13.4.3</b> Using named arguments</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-comma-separated-values-files"><i class="fa fa-check"></i><b>13.5</b> Importing comma separated values files</a></li>
<li class="chapter" data-level="13.6" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#additional-arguments"><i class="fa fa-check"></i><b>13.6</b> Additional arguments</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="importing-binary-files.html"><a href="importing-binary-files.html"><i class="fa fa-check"></i><b>14</b> Importing binary files</a>
<ul>
<li class="chapter" data-level="14.1" data-path="importing-binary-files.html"><a href="importing-binary-files.html#packages-for-importing-data-1"><i class="fa fa-check"></i><b>14.1</b> Packages for importing data</a></li>
<li class="chapter" data-level="14.2" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-microsoft-excel-spreadsheets"><i class="fa fa-check"></i><b>14.2</b> Importing Microsoft Excel spreadsheets</a></li>
<li class="chapter" data-level="14.3" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-data-from-other-statistical-analysis-software"><i class="fa fa-check"></i><b>14.3</b> Importing data from other statistical analysis software</a></li>
<li class="chapter" data-level="14.4" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-sas-data-sets"><i class="fa fa-check"></i><b>14.4</b> Importing SAS data sets</a></li>
<li class="chapter" data-level="14.5" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-stata-data-sets"><i class="fa fa-check"></i><b>14.5</b> Importing Stata data sets</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="rstudios-data-import-tool.html"><a href="rstudios-data-import-tool.html"><i class="fa fa-check"></i><b>15</b> RStudio’s data import tool</a></li>
<li class="chapter" data-level="16" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>16</b> Exporting data</a>
<ul>
<li class="chapter" data-level="16.1" data-path="exporting-data.html"><a href="exporting-data.html#plain-text-files"><i class="fa fa-check"></i><b>16.1</b> Plain text files</a></li>
<li class="chapter" data-level="16.2" data-path="exporting-data.html"><a href="exporting-data.html#factor-vectors"><i class="fa fa-check"></i><b>16.2</b> Factor vectors</a>
<ul>
<li class="chapter" data-level="16.2.1" data-path="exporting-data.html"><a href="exporting-data.html#coerce-a-numeric-variable"><i class="fa fa-check"></i><b>16.2.1</b> Coerce a numeric variable</a></li>
<li class="chapter" data-level="16.2.2" data-path="exporting-data.html"><a href="exporting-data.html#coerce-a-character-variable"><i class="fa fa-check"></i><b>16.2.2</b> Coerce a character variable</a></li>
</ul></li>
<li class="chapter" data-level="16.3" data-path="exporting-data.html"><a href="exporting-data.html#r-binary-files"><i class="fa fa-check"></i><b>16.3</b> R binary files</a></li>
</ul></li>
<li class="part"><span><b>IV Descriptive Analysis</b></span></li>
<li class="chapter" data-level="17" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html"><i class="fa fa-check"></i><b>17</b> Introduction to descriptive analysis</a>
<ul>
<li class="chapter" data-level="17.1" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-is-descriptive-analysis-and-why-would-we-do-it"><i class="fa fa-check"></i><b>17.1</b> What is descriptive analysis and why would we do it?</a></li>
<li class="chapter" data-level="17.2" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-kind-of-descriptive-analysis-should-we-perform"><i class="fa fa-check"></i><b>17.2</b> What kind of descriptive analysis should we perform?</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html"><i class="fa fa-check"></i><b>18</b> Numerical descriptions of categorical variables</a>
<ul>
<li class="chapter" data-level="18.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#height-and-weight-data"><i class="fa fa-check"></i><b>18.1</b> Height and Weight Data</a>
<ul>
<li class="chapter" data-level="18.1.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#view-the-data"><i class="fa fa-check"></i><b>18.1.1</b> View the data</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-frequencies"><i class="fa fa-check"></i><b>18.2</b> Calculating frequencies</a>
<ul>
<li class="chapter" data-level="18.2.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-base-r-table-function"><i class="fa fa-check"></i><b>18.2.1</b> The base R table function</a></li>
<li class="chapter" data-level="18.2.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-gmodels-crosstable-function"><i class="fa fa-check"></i><b>18.2.2</b> The gmodels CrossTable function</a></li>
<li class="chapter" data-level="18.2.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-tidyverse-way"><i class="fa fa-check"></i><b>18.2.3</b> The tidyverse way</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-percentages"><i class="fa fa-check"></i><b>18.3</b> Calculating percentages</a></li>
<li class="chapter" data-level="18.4" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#missing-data-1"><i class="fa fa-check"></i><b>18.4</b> Missing data</a></li>
<li class="chapter" data-level="18.5" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#formatting-results"><i class="fa fa-check"></i><b>18.5</b> Formatting results</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html"><i class="fa fa-check"></i><b>19</b> Measures of central tendency</a>
<ul>
<li class="chapter" data-level="19.1" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mean"><i class="fa fa-check"></i><b>19.1</b> Calculate the mean</a></li>
<li class="chapter" data-level="19.2" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-median"><i class="fa fa-check"></i><b>19.2</b> Calculate the median</a></li>
<li class="chapter" data-level="19.3" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mode"><i class="fa fa-check"></i><b>19.3</b> Calculate the mode</a></li>
<li class="chapter" data-level="19.4" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#compare-mean-median-and-mode"><i class="fa fa-check"></i><b>19.4</b> Compare mean, median, and mode</a></li>
<li class="chapter" data-level="19.5" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#data-checking"><i class="fa fa-check"></i><b>19.5</b> Data checking</a></li>
<li class="chapter" data-level="19.6" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#properties-of-mean-median-and-mode"><i class="fa fa-check"></i><b>19.6</b> Properties of mean, median, and mode</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html"><i class="fa fa-check"></i><b>20</b> Measures of dispersion</a>
<ul>
<li class="chapter" data-level="20.1" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html#comparing-distributions"><i class="fa fa-check"></i><b>20.1</b> Comparing distributions</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><i class="fa fa-check"></i><b>21</b> Describing the relationship between a continuous outcome and a continuous predictor</a>
<ul>
<li class="chapter" data-level="21.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#pearson-correlation-coefficient"><i class="fa fa-check"></i><b>21.1</b> Pearson Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="21.1.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#calculating-r"><i class="fa fa-check"></i><b>21.1.1</b> Calculating r</a></li>
<li class="chapter" data-level="21.1.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#correlation-intuition"><i class="fa fa-check"></i><b>21.1.2</b> Correlation intuition</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="22" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>22</b> Describing the relationship between a continuous outcome and a categorical predictor</a>
<ul>
<li class="chapter" data-level="22.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#single-predictor-and-single-outcome"><i class="fa fa-check"></i><b>22.1</b> Single predictor and single outcome</a></li>
<li class="chapter" data-level="22.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#multiple-predictors"><i class="fa fa-check"></i><b>22.2</b> Multiple predictors</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>23</b> Describing the relationship between a categorical outcome and a categorical predictor</a>
<ul>
<li class="chapter" data-level="23.1" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html#comparing-two-variables"><i class="fa fa-check"></i><b>23.1</b> Comparing two variables</a></li>
</ul></li>
<li class="part"><span><b>V Data Management</b></span></li>
<li class="chapter" data-level="24" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html"><i class="fa fa-check"></i><b>24</b> Introduction to data management</a>
<ul>
<li class="chapter" data-level="24.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#multiple-paradigms-for-data-management-in-r"><i class="fa fa-check"></i><b>24.1</b> Multiple paradigms for data management in R</a></li>
<li class="chapter" data-level="24.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-package"><i class="fa fa-check"></i><b>24.2</b> The dplyr package</a>
<ul>
<li class="chapter" data-level="24.2.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-verbs"><i class="fa fa-check"></i><b>24.2.1</b> The dplyr verbs</a></li>
<li class="chapter" data-level="24.2.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-.data-argument"><i class="fa fa-check"></i><b>24.2.2</b> The .data argument</a></li>
<li class="chapter" data-level="24.2.3" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-argument"><i class="fa fa-check"></i><b>24.2.3</b> The … argument</a></li>
<li class="chapter" data-level="24.2.4" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#non-standard-evaluation"><i class="fa fa-check"></i><b>24.2.4</b> Non-standard evaluation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="25" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html"><i class="fa fa-check"></i><b>25</b> Creating and modifying columns</a>
<ul>
<li class="chapter" data-level="25.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#creating-data-frames"><i class="fa fa-check"></i><b>25.1</b> Creating data frames</a></li>
<li class="chapter" data-level="25.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#dollar-sign-notation-1"><i class="fa fa-check"></i><b>25.2</b> Dollar sign notation</a></li>
<li class="chapter" data-level="25.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#bracket-notation-1"><i class="fa fa-check"></i><b>25.3</b> Bracket notation</a></li>
<li class="chapter" data-level="25.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#modify-individual-values"><i class="fa fa-check"></i><b>25.4</b> Modify individual values</a></li>
<li class="chapter" data-level="25.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#the-mutate-function"><i class="fa fa-check"></i><b>25.5</b> The mutate() function</a>
<ul>
<li class="chapter" data-level="25.5.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-a-single-column"><i class="fa fa-check"></i><b>25.5.1</b> Adding or modifying a single column</a></li>
<li class="chapter" data-level="25.5.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#recycling-rules"><i class="fa fa-check"></i><b>25.5.2</b> Recycling rules</a></li>
<li class="chapter" data-level="25.5.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#using-existing-variables-in-name-value-pairs"><i class="fa fa-check"></i><b>25.5.3</b> Using existing variables in name-value pairs</a></li>
<li class="chapter" data-level="25.5.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-multiple-columns"><i class="fa fa-check"></i><b>25.5.4</b> Adding or modifying multiple columns</a></li>
<li class="chapter" data-level="25.5.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#rowwise-mutations"><i class="fa fa-check"></i><b>25.5.5</b> Rowwise mutations</a></li>
<li class="chapter" data-level="25.5.6" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#group_by-mutations"><i class="fa fa-check"></i><b>25.5.6</b> Group_by mutations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html"><i class="fa fa-check"></i><b>26</b> Subsetting data frames</a>
<ul>
<li class="chapter" data-level="26.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-select-function"><i class="fa fa-check"></i><b>26.1</b> The select() function</a></li>
<li class="chapter" data-level="26.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-rename-function"><i class="fa fa-check"></i><b>26.2</b> The rename() function</a></li>
<li class="chapter" data-level="26.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-filter-function"><i class="fa fa-check"></i><b>26.3</b> The filter() function</a>
<ul>
<li class="chapter" data-level="26.3.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#subgroup-analysis"><i class="fa fa-check"></i><b>26.3.1</b> Subgroup analysis</a></li>
<li class="chapter" data-level="26.3.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-case-analysis"><i class="fa fa-check"></i><b>26.3.2</b> Complete case analysis</a></li>
</ul></li>
<li class="chapter" data-level="26.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#deduplication"><i class="fa fa-check"></i><b>26.4</b> Deduplication</a>
<ul>
<li class="chapter" data-level="26.4.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-distinct-function"><i class="fa fa-check"></i><b>26.4.1</b> The distinct() function</a></li>
<li class="chapter" data-level="26.4.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-duplicate-row-add-tag"><i class="fa fa-check"></i><b>26.4.2</b> Complete duplicate row add tag</a></li>
<li class="chapter" data-level="26.4.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows"><i class="fa fa-check"></i><b>26.4.3</b> Partial duplicate rows</a></li>
<li class="chapter" data-level="26.4.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows---add-tag"><i class="fa fa-check"></i><b>26.4.4</b> Partial duplicate rows - add tag</a></li>
<li class="chapter" data-level="26.4.5" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#count-the-number-of-duplicates"><i class="fa fa-check"></i><b>26.4.5</b> Count the number of duplicates</a></li>
<li class="chapter" data-level="26.4.6" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#what-to-do-about-duplicates"><i class="fa fa-check"></i><b>26.4.6</b> What to do about duplicates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="working-with-dates.html"><a href="working-with-dates.html"><i class="fa fa-check"></i><b>27</b> Working with dates</a>
<ul>
<li class="chapter" data-level="27.1" data-path="working-with-dates.html"><a href="working-with-dates.html#date-vector-types"><i class="fa fa-check"></i><b>27.1</b> Date vector types</a></li>
<li class="chapter" data-level="27.2" data-path="working-with-dates.html"><a href="working-with-dates.html#dates-under-the-hood"><i class="fa fa-check"></i><b>27.2</b> Dates under the hood</a></li>
<li class="chapter" data-level="27.3" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-date-times-to-dates"><i class="fa fa-check"></i><b>27.3</b> Coercing date-times to dates</a></li>
<li class="chapter" data-level="27.4" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-character-strings-to-dates"><i class="fa fa-check"></i><b>27.4</b> Coercing character strings to dates</a></li>
<li class="chapter" data-level="27.5" data-path="working-with-dates.html"><a href="working-with-dates.html#change-the-appearance-of-dates-with-format"><i class="fa fa-check"></i><b>27.5</b> Change the appearance of dates with format()</a></li>
<li class="chapter" data-level="27.6" data-path="working-with-dates.html"><a href="working-with-dates.html#some-useful-built-in-dates"><i class="fa fa-check"></i><b>27.6</b> Some useful built-in dates</a>
<ul>
<li class="chapter" data-level="27.6.1" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date"><i class="fa fa-check"></i><b>27.6.1</b> Today’s date</a></li>
<li class="chapter" data-level="27.6.2" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date-time"><i class="fa fa-check"></i><b>27.6.2</b> Today’s date-time</a></li>
<li class="chapter" data-level="27.6.3" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-full-month-names"><i class="fa fa-check"></i><b>27.6.3</b> Character vector of full month names</a></li>
<li class="chapter" data-level="27.6.4" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-abbreviated-month-names"><i class="fa fa-check"></i><b>27.6.4</b> Character vector of abbreviated month names</a></li>
<li class="chapter" data-level="27.6.5" data-path="working-with-dates.html"><a href="working-with-dates.html#creating-a-vector-containing-a-sequence-of-dates"><i class="fa fa-check"></i><b>27.6.5</b> Creating a vector containing a sequence of dates</a></li>
</ul></li>
<li class="chapter" data-level="27.7" data-path="working-with-dates.html"><a href="working-with-dates.html#calculating-date-intervals"><i class="fa fa-check"></i><b>27.7</b> Calculating date intervals</a>
<ul>
<li class="chapter" data-level="27.7.1" data-path="working-with-dates.html"><a href="working-with-dates.html#calculate-age-as-the-difference-in-time-between-dob-and-today"><i class="fa fa-check"></i><b>27.7.1</b> Calculate age as the difference in time between dob and today</a></li>
<li class="chapter" data-level="27.7.2" data-path="working-with-dates.html"><a href="working-with-dates.html#rounding-time-intervals"><i class="fa fa-check"></i><b>27.7.2</b> Rounding time intervals</a></li>
</ul></li>
<li class="chapter" data-level="27.8" data-path="working-with-dates.html"><a href="working-with-dates.html#extracting-out-date-parts"><i class="fa fa-check"></i><b>27.8</b> Extracting out date parts</a></li>
<li class="chapter" data-level="27.9" data-path="working-with-dates.html"><a href="working-with-dates.html#sorting-dates"><i class="fa fa-check"></i><b>27.9</b> Sorting dates</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html"><i class="fa fa-check"></i><b>28</b> Working with character strings</a>
<ul>
<li class="chapter" data-level="28.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#coerce-to-lowercase"><i class="fa fa-check"></i><b>28.1</b> Coerce to lowercase</a>
<ul>
<li class="chapter" data-level="28.1.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#lowercase"><i class="fa fa-check"></i><b>28.1.1</b> Lowercase</a></li>
<li class="chapter" data-level="28.1.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#upper-case"><i class="fa fa-check"></i><b>28.1.2</b> Upper case</a></li>
<li class="chapter" data-level="28.1.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#title-case"><i class="fa fa-check"></i><b>28.1.3</b> Title case</a></li>
<li class="chapter" data-level="28.1.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#sentence-case"><i class="fa fa-check"></i><b>28.1.4</b> Sentence case</a></li>
</ul></li>
<li class="chapter" data-level="28.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#trim-white-space"><i class="fa fa-check"></i><b>28.2</b> Trim white space</a></li>
<li class="chapter" data-level="28.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#regular-expressions"><i class="fa fa-check"></i><b>28.3</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="28.3.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-the-comma"><i class="fa fa-check"></i><b>28.3.1</b> Remove the comma</a></li>
<li class="chapter" data-level="28.3.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-middle-initial"><i class="fa fa-check"></i><b>28.3.2</b> Remove middle initial</a></li>
<li class="chapter" data-level="28.3.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-double-spaces"><i class="fa fa-check"></i><b>28.3.3</b> Remove double spaces</a></li>
</ul></li>
<li class="chapter" data-level="28.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#separate-values-into-component-parts"><i class="fa fa-check"></i><b>28.4</b> Separate values into component parts</a></li>
<li class="chapter" data-level="28.5" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#dummy-variables"><i class="fa fa-check"></i><b>28.5</b> Dummy variables</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="conditional-operations.html"><a href="conditional-operations.html"><i class="fa fa-check"></i><b>29</b> Conditional Operations</a>
<ul>
<li class="chapter" data-level="29.1" data-path="conditional-operations.html"><a href="conditional-operations.html#operands-and-operators"><i class="fa fa-check"></i><b>29.1</b> Operands and operators</a></li>
<li class="chapter" data-level="29.2" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-multiple-conditions-simultaneously"><i class="fa fa-check"></i><b>29.2</b> Testing multiple conditions simultaneously</a></li>
<li class="chapter" data-level="29.3" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-a-sequence-of-conditions"><i class="fa fa-check"></i><b>29.3</b> Testing a sequence of conditions</a></li>
<li class="chapter" data-level="29.4" data-path="conditional-operations.html"><a href="conditional-operations.html#recoding-variables"><i class="fa fa-check"></i><b>29.4</b> Recoding variables</a></li>
<li class="chapter" data-level="29.5" data-path="conditional-operations.html"><a href="conditional-operations.html#case_when-is-lazy"><i class="fa fa-check"></i><b>29.5</b> case_when() is lazy</a></li>
<li class="chapter" data-level="29.6" data-path="conditional-operations.html"><a href="conditional-operations.html#recode-missing"><i class="fa fa-check"></i><b>29.6</b> Recode missing</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html"><i class="fa fa-check"></i><b>30</b> Working with multiple data frames</a>
<ul>
<li class="chapter" data-level="30.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-vertically-adding-rows"><i class="fa fa-check"></i><b>30.1</b> Combining data frames vertically: Adding rows</a>
<ul>
<li class="chapter" data-level="30.1.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-more-than-2-data-frames"><i class="fa fa-check"></i><b>30.1.1</b> Combining more than 2 data frames</a></li>
<li class="chapter" data-level="30.1.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#adding-rows-with-differing-columns"><i class="fa fa-check"></i><b>30.1.2</b> Adding rows with differing columns</a></li>
<li class="chapter" data-level="30.1.3" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-positions"><i class="fa fa-check"></i><b>30.1.3</b> Differing column positions</a></li>
<li class="chapter" data-level="30.1.4" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-names"><i class="fa fa-check"></i><b>30.1.4</b> Differing column names</a></li>
</ul></li>
<li class="chapter" data-level="30.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-adding-columns"><i class="fa fa-check"></i><b>30.2</b> Combining data frames horizontally: Adding columns</a>
<ul>
<li class="chapter" data-level="30.2.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-position"><i class="fa fa-check"></i><b>30.2.1</b> Combining data frames horizontally by position</a></li>
<li class="chapter" data-level="30.2.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-key-values"><i class="fa fa-check"></i><b>30.2.2</b> Combining data frames horizontally by key values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="31" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html"><i class="fa fa-check"></i><b>31</b> Restructuring data frames</a>
<ul>
<li class="chapter" data-level="31.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-tidyr-package"><i class="fa fa-check"></i><b>31.1</b> The tidyr package</a></li>
<li class="chapter" data-level="31.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-longer"><i class="fa fa-check"></i><b>31.2</b> Pivoting longer</a>
<ul>
<li class="chapter" data-level="31.2.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_to-argument"><i class="fa fa-check"></i><b>31.2.1</b> The names_to argument</a></li>
<li class="chapter" data-level="31.2.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_prefix-argument"><i class="fa fa-check"></i><b>31.2.2</b> The names_prefix argument</a></li>
<li class="chapter" data-level="31.2.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-values_to-argument"><i class="fa fa-check"></i><b>31.2.3</b> The values_to argument</a></li>
<li class="chapter" data-level="31.2.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_transform-argument"><i class="fa fa-check"></i><b>31.2.4</b> The names_transform argument</a></li>
<li class="chapter" data-level="31.2.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-multiple-sets-of-columns"><i class="fa fa-check"></i><b>31.2.5</b> Pivoting multiple sets of columns</a></li>
<li class="chapter" data-level="31.2.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_sep-argument"><i class="fa fa-check"></i><b>31.2.6</b> The names_sep argument</a></li>
<li class="chapter" data-level="31.2.7" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-.value-special-value"><i class="fa fa-check"></i><b>31.2.7</b> The .value special value</a></li>
<li class="chapter" data-level="31.2.8" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-period"><i class="fa fa-check"></i><b>31.2.8</b> Why person-period?</a></li>
</ul></li>
<li class="chapter" data-level="31.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-wider"><i class="fa fa-check"></i><b>31.3</b> Pivoting wider</a>
<ul>
<li class="chapter" data-level="31.3.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-level"><i class="fa fa-check"></i><b>31.3.1</b> Why person-level?</a></li>
</ul></li>
<li class="chapter" data-level="31.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics"><i class="fa fa-check"></i><b>31.4</b> Pivoting summary statistics</a>
<ul>
<li class="chapter" data-level="31.4.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-wide-to-long"><i class="fa fa-check"></i><b>31.4.1</b> Pivoting summary statistics wide to long</a></li>
<li class="chapter" data-level="31.4.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-long-to-wide"><i class="fa fa-check"></i><b>31.4.2</b> Pivoting summary statistics long to wide</a></li>
</ul></li>
<li class="chapter" data-level="31.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#tidy-data"><i class="fa fa-check"></i><b>31.5</b> Tidy data</a>
<ul>
<li class="chapter" data-level="31.5.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-variable-must-have-its-own-column"><i class="fa fa-check"></i><b>31.5.1</b> Each variable must have its own column</a></li>
<li class="chapter" data-level="31.5.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-observation-must-have-its-own-row"><i class="fa fa-check"></i><b>31.5.2</b> Each observation must have its own row</a></li>
<li class="chapter" data-level="31.5.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-value-must-have-its-own-cell"><i class="fa fa-check"></i><b>31.5.3</b> Each value must have its own cell</a></li>
</ul></li>
<li class="chapter" data-level="31.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-complete-function"><i class="fa fa-check"></i><b>31.6</b> The complete() function</a></li>
</ul></li>
<li class="part"><span><b>VI Repeated Operations</b></span></li>
<li class="chapter" data-level="32" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html"><i class="fa fa-check"></i><b>32</b> Introduction to repeated operations</a>
<ul>
<li class="chapter" data-level="32.1" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#multiple-methods-for-repeated-operations-in-r"><i class="fa fa-check"></i><b>32.1</b> Multiple methods for repeated operations in R</a></li>
<li class="chapter" data-level="32.2" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#tidy-evaluation"><i class="fa fa-check"></i><b>32.2</b> Tidy evaluation</a></li>
</ul></li>
<li class="chapter" data-level="33" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>33</b> Writing functions</a>
<ul>
<li class="chapter" data-level="33.1" data-path="writing-functions.html"><a href="writing-functions.html#when-to-write-functions"><i class="fa fa-check"></i><b>33.1</b> When to write functions</a></li>
<li class="chapter" data-level="33.2" data-path="writing-functions.html"><a href="writing-functions.html#how-to-write-functions"><i class="fa fa-check"></i><b>33.2</b> How to write functions</a>
<ul>
<li class="chapter" data-level="33.2.1" data-path="writing-functions.html"><a href="writing-functions.html#the-function-function"><i class="fa fa-check"></i><b>33.2.1</b> The function() function</a></li>
<li class="chapter" data-level="33.2.2" data-path="writing-functions.html"><a href="writing-functions.html#the-function-writing-process"><i class="fa fa-check"></i><b>33.2.2</b> The function writing process</a></li>
</ul></li>
<li class="chapter" data-level="33.3" data-path="writing-functions.html"><a href="writing-functions.html#giving-your-function-arguments-default-values"><i class="fa fa-check"></i><b>33.3</b> Giving your function arguments default values</a></li>
<li class="chapter" data-level="33.4" data-path="writing-functions.html"><a href="writing-functions.html#the-values-your-functions-return"><i class="fa fa-check"></i><b>33.4</b> The values your functions return</a></li>
<li class="chapter" data-level="33.5" data-path="writing-functions.html"><a href="writing-functions.html#lexical-scoping-and-functions"><i class="fa fa-check"></i><b>33.5</b> Lexical scoping and functions</a></li>
<li class="chapter" data-level="33.6" data-path="writing-functions.html"><a href="writing-functions.html#tidy-evaluation-1"><i class="fa fa-check"></i><b>33.6</b> Tidy evaluation</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html"><i class="fa fa-check"></i><b>34</b> Column-wise operations in dplyr</a>
<ul>
<li class="chapter" data-level="34.1" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#the-across-function"><i class="fa fa-check"></i><b>34.1</b> The across() function</a></li>
<li class="chapter" data-level="34.2" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-filter"><i class="fa fa-check"></i><b>34.2</b> Across with filter</a></li>
<li class="chapter" data-level="34.3" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-mutate"><i class="fa fa-check"></i><b>34.3</b> Across with mutate</a></li>
<li class="chapter" data-level="34.4" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-summarise"><i class="fa fa-check"></i><b>34.4</b> Across with summarise</a></li>
</ul></li>
<li class="part"><span><b>VII Presenting Results</b></span></li>
<li class="chapter" data-level="35" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html"><i class="fa fa-check"></i><b>35</b> Creating tables with R and Microsoft Word</a>
<ul>
<li class="chapter" data-level="35.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-1"><i class="fa fa-check"></i><b>35.1</b> Table 1</a></li>
<li class="chapter" data-level="35.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#opioid-drug-use"><i class="fa fa-check"></i><b>35.2</b> Opioid drug use</a></li>
<li class="chapter" data-level="35.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-columns"><i class="fa fa-check"></i><b>35.3</b> Table columns</a></li>
<li class="chapter" data-level="35.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-rows"><i class="fa fa-check"></i><b>35.4</b> Table rows</a></li>
<li class="chapter" data-level="35.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#make-the-table-skeleton"><i class="fa fa-check"></i><b>35.5</b> Make the table skeleton</a></li>
<li class="chapter" data-level="35.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-column-headers"><i class="fa fa-check"></i><b>35.6</b> Fill in column headers</a>
<ul>
<li class="chapter" data-level="35.6.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#group-sample-sizes"><i class="fa fa-check"></i><b>35.6.1</b> Group sample sizes</a></li>
<li class="chapter" data-level="35.6.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-column-headers"><i class="fa fa-check"></i><b>35.6.2</b> Formatting column headers</a></li>
</ul></li>
<li class="chapter" data-level="35.7" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-row-headers"><i class="fa fa-check"></i><b>35.7</b> Fill in row headers</a>
<ul>
<li class="chapter" data-level="35.7.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#label-statistics"><i class="fa fa-check"></i><b>35.7.1</b> Label statistics</a></li>
<li class="chapter" data-level="35.7.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-row-headers"><i class="fa fa-check"></i><b>35.7.2</b> Formatting row headers</a></li>
</ul></li>
<li class="chapter" data-level="35.8" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-data-values"><i class="fa fa-check"></i><b>35.8</b> Fill in data values</a>
<ul>
<li class="chapter" data-level="35.8.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#manually-type-values"><i class="fa fa-check"></i><b>35.8.1</b> Manually type values</a></li>
<li class="chapter" data-level="35.8.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#copy-and-paste-values"><i class="fa fa-check"></i><b>35.8.2</b> Copy and paste values</a></li>
<li class="chapter" data-level="35.8.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#knit-a-word-document"><i class="fa fa-check"></i><b>35.8.3</b> Knit a Word document</a></li>
<li class="chapter" data-level="35.8.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#flextable-and-officer"><i class="fa fa-check"></i><b>35.8.4</b> flextable and officer</a></li>
<li class="chapter" data-level="35.8.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#significant-digits"><i class="fa fa-check"></i><b>35.8.5</b> Significant digits</a></li>
<li class="chapter" data-level="35.8.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-data-values"><i class="fa fa-check"></i><b>35.8.6</b> Formatting data values</a></li>
</ul></li>
<li class="chapter" data-level="35.9" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-title"><i class="fa fa-check"></i><b>35.9</b> Fill in title</a></li>
<li class="chapter" data-level="35.10" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-footnotes"><i class="fa fa-check"></i><b>35.10</b> Fill in footnotes</a>
<ul>
<li class="chapter" data-level="35.10.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-footnotes"><i class="fa fa-check"></i><b>35.10.1</b> Formatting footnotes</a></li>
</ul></li>
<li class="chapter" data-level="35.11" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#final-formatting"><i class="fa fa-check"></i><b>35.11</b> Final formatting</a>
<ul>
<li class="chapter" data-level="35.11.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#adjust-column-widths"><i class="fa fa-check"></i><b>35.11.1</b> Adjust column widths</a></li>
<li class="chapter" data-level="35.11.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#merge-cells"><i class="fa fa-check"></i><b>35.11.2</b> Merge cells</a></li>
<li class="chapter" data-level="35.11.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#remove-cell-borders"><i class="fa fa-check"></i><b>35.11.3</b> Remove cell borders</a></li>
</ul></li>
<li class="chapter" data-level="35.12" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#summary-1"><i class="fa fa-check"></i><b>35.12</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>VIII Appendix</b></span></li>
<li class="chapter" data-level="" data-path="appendix-a-glossary.html"><a href="appendix-a-glossary.html"><i class="fa fa-check"></i>Appendix A: Glossary</a></li>
<li class="chapter" data-level="" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html"><i class="fa fa-check"></i>Appendix: Alternative table formats</a>
<ul>
<li class="chapter" data-level="35.13" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#smaller-data-frame"><i class="fa fa-check"></i><b>35.13</b> Smaller data frame</a>
<ul>
<li class="chapter" data-level="35.13.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen"><i class="fa fa-check"></i><b>35.13.1</b> Default method for printing the data frame to the screen</a></li>
<li class="chapter" data-level="35.13.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function"><i class="fa fa-check"></i><b>35.13.2</b> Using the kable function</a></li>
<li class="chapter" data-level="35.13.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function"><i class="fa fa-check"></i><b>35.13.3</b> Using the datatable function</a></li>
</ul></li>
<li class="chapter" data-level="35.14" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#larger-data-frame"><i class="fa fa-check"></i><b>35.14</b> Larger data frame</a>
<ul>
<li class="chapter" data-level="35.14.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen-1"><i class="fa fa-check"></i><b>35.14.1</b> Default method for printing the data frame to the screen</a></li>
<li class="chapter" data-level="35.14.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function-1"><i class="fa fa-check"></i><b>35.14.2</b> Using the kable function</a></li>
<li class="chapter" data-level="35.14.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function-1"><i class="fa fa-check"></i><b>35.14.3</b> Using the datatable function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Epidemiology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="writing-functions" class="section level1" number="33">
<h1><span class="header-section-number">33</span> Writing functions</h1>
<!--

-->
<p>Have you noticed how we will often calculate the same statistical measures for many different variables in our data? For example, let’s say that we have some pretty standard data about some study participants:</p>
<div class="sourceCode" id="cb925"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb925-1"><a href="writing-functions.html#cb925-1"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<div class="sourceCode" id="cb926"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb926-1"><a href="writing-functions.html#cb926-1"></a>study &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb926-2"><a href="writing-functions.html#cb926-2"></a>  <span class="dt">age       =</span> <span class="kw">c</span>(<span class="dv">32</span>, <span class="dv">30</span>, <span class="dv">32</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">38</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">48</span>, <span class="dv">29</span>, <span class="dv">22</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">28</span>, <span class="dv">24</span>, <span class="dv">25</span>, </span>
<span id="cb926-3"><a href="writing-functions.html#cb926-3"></a>                <span class="dv">25</span>, <span class="dv">22</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">31</span>, <span class="dv">24</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">26</span>, <span class="dv">23</span>, </span>
<span id="cb926-4"><a href="writing-functions.html#cb926-4"></a>                <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">33</span>, <span class="dv">27</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">24</span>, <span class="dv">43</span>, <span class="dv">25</span>, <span class="dv">24</span>, </span>
<span id="cb926-5"><a href="writing-functions.html#cb926-5"></a>                <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">28</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">31</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">31</span>, <span class="dv">34</span>, </span>
<span id="cb926-6"><a href="writing-functions.html#cb926-6"></a>                <span class="dv">26</span>, <span class="dv">25</span>, <span class="dv">27</span>, <span class="ot">NA</span>),</span>
<span id="cb926-7"><a href="writing-functions.html#cb926-7"></a>  <span class="dt">age_group =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb926-8"><a href="writing-functions.html#cb926-8"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb926-9"><a href="writing-functions.html#cb926-9"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, </span>
<span id="cb926-10"><a href="writing-functions.html#cb926-10"></a>                <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="ot">NA</span>),</span>
<span id="cb926-11"><a href="writing-functions.html#cb926-11"></a>  <span class="dt">gender    =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb926-12"><a href="writing-functions.html#cb926-12"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, </span>
<span id="cb926-13"><a href="writing-functions.html#cb926-13"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, </span>
<span id="cb926-14"><a href="writing-functions.html#cb926-14"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="ot">NA</span>),</span>
<span id="cb926-15"><a href="writing-functions.html#cb926-15"></a>  <span class="dt">ht_in     =</span> <span class="kw">c</span>(<span class="dv">70</span>, <span class="dv">63</span>, <span class="dv">62</span>, <span class="dv">67</span>, <span class="dv">67</span>, <span class="dv">58</span>, <span class="dv">64</span>, <span class="dv">69</span>, <span class="dv">65</span>, <span class="dv">68</span>, <span class="dv">63</span>, <span class="dv">68</span>, <span class="dv">69</span>, <span class="dv">66</span>, <span class="dv">67</span>, <span class="dv">65</span>, </span>
<span id="cb926-16"><a href="writing-functions.html#cb926-16"></a>                <span class="dv">64</span>, <span class="dv">75</span>, <span class="dv">67</span>, <span class="dv">63</span>, <span class="dv">60</span>, <span class="dv">67</span>, <span class="dv">64</span>, <span class="dv">73</span>, <span class="dv">62</span>, <span class="dv">69</span>, <span class="dv">67</span>, <span class="dv">62</span>, <span class="dv">68</span>, <span class="dv">66</span>, <span class="dv">66</span>, <span class="dv">62</span>, </span>
<span id="cb926-17"><a href="writing-functions.html#cb926-17"></a>                <span class="dv">64</span>, <span class="dv">68</span>, <span class="ot">NA</span>, <span class="dv">68</span>, <span class="dv">70</span>, <span class="dv">68</span>, <span class="dv">68</span>, <span class="dv">66</span>, <span class="dv">71</span>, <span class="dv">61</span>, <span class="dv">62</span>, <span class="dv">64</span>, <span class="dv">64</span>, <span class="dv">63</span>, <span class="dv">67</span>, <span class="dv">66</span>, </span>
<span id="cb926-18"><a href="writing-functions.html#cb926-18"></a>                <span class="dv">69</span>, <span class="dv">76</span>, <span class="ot">NA</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">71</span>, <span class="dv">66</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">71</span>, <span class="dv">64</span>, <span class="dv">71</span>, <span class="dv">60</span>, <span class="dv">62</span>, </span>
<span id="cb926-19"><a href="writing-functions.html#cb926-19"></a>                <span class="dv">61</span>, <span class="dv">69</span>, <span class="dv">66</span>, <span class="ot">NA</span>),</span>
<span id="cb926-20"><a href="writing-functions.html#cb926-20"></a>  <span class="dt">wt_lbs    =</span> <span class="kw">c</span>(<span class="dv">216</span>, <span class="dv">106</span>, <span class="dv">145</span>, <span class="dv">195</span>, <span class="dv">143</span>, <span class="dv">125</span>, <span class="dv">138</span>, <span class="dv">140</span>, <span class="dv">158</span>, <span class="dv">167</span>, <span class="dv">145</span>, <span class="dv">297</span>, <span class="dv">146</span>, </span>
<span id="cb926-21"><a href="writing-functions.html#cb926-21"></a>                <span class="dv">125</span>, <span class="dv">111</span>, <span class="dv">125</span>, <span class="dv">130</span>, <span class="dv">182</span>, <span class="dv">170</span>, <span class="dv">121</span>, <span class="dv">98</span>, <span class="dv">150</span>, <span class="dv">132</span>, <span class="dv">250</span>, <span class="dv">137</span>, <span class="dv">124</span>, </span>
<span id="cb926-22"><a href="writing-functions.html#cb926-22"></a>                <span class="dv">186</span>, <span class="dv">148</span>, <span class="dv">134</span>, <span class="dv">155</span>, <span class="dv">122</span>, <span class="dv">142</span>, <span class="dv">110</span>, <span class="dv">132</span>, <span class="dv">188</span>, <span class="dv">176</span>, <span class="dv">188</span>, <span class="dv">166</span>, <span class="dv">136</span>, </span>
<span id="cb926-23"><a href="writing-functions.html#cb926-23"></a>                <span class="dv">147</span>, <span class="dv">178</span>, <span class="dv">125</span>, <span class="dv">102</span>, <span class="dv">140</span>, <span class="dv">139</span>, <span class="dv">60</span>, <span class="dv">147</span>, <span class="dv">147</span>, <span class="dv">141</span>, <span class="dv">232</span>, <span class="dv">186</span>, <span class="dv">212</span>, </span>
<span id="cb926-24"><a href="writing-functions.html#cb926-24"></a>                <span class="dv">110</span>, <span class="dv">110</span>, <span class="dv">115</span>, <span class="dv">154</span>, <span class="dv">140</span>, <span class="dv">150</span>, <span class="dv">130</span>, <span class="ot">NA</span>, <span class="dv">171</span>, <span class="dv">156</span>, <span class="dv">92</span>, <span class="dv">122</span>, <span class="dv">102</span>, </span>
<span id="cb926-25"><a href="writing-functions.html#cb926-25"></a>                <span class="dv">163</span>, <span class="dv">141</span>, <span class="ot">NA</span>),</span>
<span id="cb926-26"><a href="writing-functions.html#cb926-26"></a>  <span class="dt">bmi       =</span> <span class="kw">c</span>(<span class="fl">30.99</span>, <span class="fl">18.78</span>, <span class="fl">26.52</span>, <span class="fl">30.54</span>, <span class="fl">22.39</span>, <span class="fl">26.12</span>, <span class="fl">23.69</span>, <span class="fl">20.67</span>, <span class="fl">26.29</span>, </span>
<span id="cb926-27"><a href="writing-functions.html#cb926-27"></a>                <span class="fl">25.39</span>, <span class="fl">25.68</span>, <span class="fl">45.15</span>, <span class="fl">21.56</span>, <span class="fl">20.17</span>, <span class="fl">17.38</span>, <span class="fl">20.8</span>, <span class="fl">22.31</span>, <span class="fl">22.75</span>, </span>
<span id="cb926-28"><a href="writing-functions.html#cb926-28"></a>                <span class="fl">26.62</span>, <span class="fl">21.43</span>, <span class="fl">19.14</span>, <span class="fl">23.49</span>, <span class="fl">22.66</span>, <span class="fl">32.98</span>, <span class="fl">25.05</span>, <span class="fl">18.31</span>, <span class="fl">29.13</span>, </span>
<span id="cb926-29"><a href="writing-functions.html#cb926-29"></a>                <span class="fl">27.07</span>, <span class="fl">20.37</span>, <span class="fl">25.01</span>, <span class="fl">19.69</span>, <span class="fl">25.97</span>, <span class="fl">18.88</span>, <span class="fl">20.07</span>, <span class="ot">NA</span>, <span class="fl">26.76</span>, </span>
<span id="cb926-30"><a href="writing-functions.html#cb926-30"></a>                <span class="fl">26.97</span>, <span class="fl">25.24</span>, <span class="fl">20.68</span>, <span class="fl">23.72</span>, <span class="fl">24.82</span>, <span class="fl">23.62</span>, <span class="fl">18.65</span>, <span class="fl">24.03</span>, <span class="fl">23.86</span>, </span>
<span id="cb926-31"><a href="writing-functions.html#cb926-31"></a>                <span class="fl">10.63</span>, <span class="fl">23.02</span>, <span class="fl">23.72</span>, <span class="fl">20.82</span>, <span class="fl">28.24</span>, <span class="ot">NA</span>, <span class="fl">37.55</span>, <span class="fl">18.88</span>, <span class="fl">18.3</span>, </span>
<span id="cb926-32"><a href="writing-functions.html#cb926-32"></a>                <span class="fl">19.13</span>, <span class="fl">21.48</span>, <span class="fl">22.59</span>, <span class="fl">24.96</span>, <span class="fl">21.63</span>, <span class="ot">NA</span>, <span class="fl">29.35</span>, <span class="fl">21.76</span>, <span class="fl">17.97</span>, </span>
<span id="cb926-33"><a href="writing-functions.html#cb926-33"></a>                <span class="fl">22.31</span>, <span class="fl">19.27</span>, <span class="fl">24.07</span>, <span class="fl">22.76</span>, <span class="ot">NA</span>),</span>
<span id="cb926-34"><a href="writing-functions.html#cb926-34"></a>  <span class="dt">bmi_3cat  =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb926-35"><a href="writing-functions.html#cb926-35"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb926-36"><a href="writing-functions.html#cb926-36"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="ot">NA</span>, <span class="dv">2</span>, <span class="dv">1</span>, </span>
<span id="cb926-37"><a href="writing-functions.html#cb926-37"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="ot">NA</span>)</span>
<span id="cb926-38"><a href="writing-functions.html#cb926-38"></a>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb926-39"><a href="writing-functions.html#cb926-39"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb926-40"><a href="writing-functions.html#cb926-40"></a>    <span class="dt">age_group =</span> <span class="kw">factor</span>(age_group, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Younger than 30&quot;</span>, <span class="st">&quot;30 and Older&quot;</span>)),</span>
<span id="cb926-41"><a href="writing-functions.html#cb926-41"></a>    <span class="dt">gender    =</span> <span class="kw">factor</span>(gender, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>)),</span>
<span id="cb926-42"><a href="writing-functions.html#cb926-42"></a>    <span class="dt">bmi_3cat  =</span> <span class="kw">factor</span>(bmi_3cat, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Normal&quot;</span>, <span class="st">&quot;Overweight&quot;</span>, <span class="st">&quot;Obese&quot;</span>))</span>
<span id="cb926-43"><a href="writing-functions.html#cb926-43"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb926-44"><a href="writing-functions.html#cb926-44"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 68 x 7
##      age age_group       gender ht_in wt_lbs   bmi bmi_3cat  
##    &lt;dbl&gt; &lt;fct&gt;           &lt;fct&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;     
##  1    32 30 and Older    Male      70    216  31.0 Obese     
##  2    30 30 and Older    Female    63    106  18.8 Normal    
##  3    32 30 and Older    Female    62    145  26.5 Overweight
##  4    29 Younger than 30 Male      67    195  30.5 Obese     
##  5    24 Younger than 30 Female    67    143  22.4 Normal    
##  6    38 30 and Older    Female    58    125  26.1 Overweight
##  7    25 Younger than 30 Female    64    138  23.7 Normal    
##  8    24 Younger than 30 Male      69    140  20.7 Normal    
##  9    48 30 and Older    Male      65    158  26.3 Overweight
## 10    29 Younger than 30 Male      68    167  25.4 Overweight
## # … with 58 more rows</code></pre>
<p>When we have data like this, it’s pretty common to calculate something like the number of missing values, mean, median, min, and max for all of the continuous variables. So, we might use the following code to calculate these measures for <code>age</code> first:</p>
<div class="sourceCode" id="cb928"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb928-1"><a href="writing-functions.html#cb928-1"></a>study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb928-2"><a href="writing-functions.html#cb928-2"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb928-3"><a href="writing-functions.html#cb928-3"></a>    <span class="dt">n_miss =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(age)),</span>
<span id="cb928-4"><a href="writing-functions.html#cb928-4"></a>    <span class="dt">mean   =</span> <span class="kw">mean</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb928-5"><a href="writing-functions.html#cb928-5"></a>    <span class="dt">median =</span> <span class="kw">median</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb928-6"><a href="writing-functions.html#cb928-6"></a>    <span class="dt">min    =</span> <span class="kw">min</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb928-7"><a href="writing-functions.html#cb928-7"></a>    <span class="dt">max    =</span> <span class="kw">max</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb928-8"><a href="writing-functions.html#cb928-8"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      1  26.9     26    22    48</code></pre>
<p>Great! Next, we want to do the same calculations for <code>ht_in</code>. Of course, we don’t want to type everything in that code chunk again, so we copy and paste. And change all the instances of <code>age</code> to <code>ht_in</code>:</p>
<div class="sourceCode" id="cb930"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb930-1"><a href="writing-functions.html#cb930-1"></a>study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb930-2"><a href="writing-functions.html#cb930-2"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb930-3"><a href="writing-functions.html#cb930-3"></a>    <span class="dt">n_miss =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(ht_in)),</span>
<span id="cb930-4"><a href="writing-functions.html#cb930-4"></a>    <span class="dt">mean   =</span> <span class="kw">mean</span>(ht_in, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb930-5"><a href="writing-functions.html#cb930-5"></a>    <span class="dt">median =</span> <span class="kw">median</span>(ht_in, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb930-6"><a href="writing-functions.html#cb930-6"></a>    <span class="dt">min    =</span> <span class="kw">min</span>(ht_in, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb930-7"><a href="writing-functions.html#cb930-7"></a>    <span class="dt">max    =</span> <span class="kw">max</span>(ht_in, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb930-8"><a href="writing-functions.html#cb930-8"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      3  66.0     66    58    76</code></pre>
<p>Now, let’s do the same calculations for <code>wt_lbs</code> and <code>bmi</code>. Again, we will copy and paste, and change the variable name as needed:</p>
<div class="sourceCode" id="cb932"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb932-1"><a href="writing-functions.html#cb932-1"></a>study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb932-2"><a href="writing-functions.html#cb932-2"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb932-3"><a href="writing-functions.html#cb932-3"></a>    <span class="dt">n_miss =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(wt_lbs)),</span>
<span id="cb932-4"><a href="writing-functions.html#cb932-4"></a>    <span class="dt">mean   =</span> <span class="kw">mean</span>(wt_lbs, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb932-5"><a href="writing-functions.html#cb932-5"></a>    <span class="dt">median =</span> <span class="kw">median</span>(wt_lbs, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb932-6"><a href="writing-functions.html#cb932-6"></a>    <span class="dt">min    =</span> <span class="kw">min</span>(ht_in, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb932-7"><a href="writing-functions.html#cb932-7"></a>    <span class="dt">max    =</span> <span class="kw">max</span>(wt_lbs, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb932-8"><a href="writing-functions.html#cb932-8"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      2  148.   142.    58   297</code></pre>
<div class="sourceCode" id="cb934"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb934-1"><a href="writing-functions.html#cb934-1"></a>study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb934-2"><a href="writing-functions.html#cb934-2"></a><span class="st">  </span><span class="kw">summarise</span>(</span>
<span id="cb934-3"><a href="writing-functions.html#cb934-3"></a>    <span class="dt">n_miss =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>(bmi)),</span>
<span id="cb934-4"><a href="writing-functions.html#cb934-4"></a>    <span class="dt">mean   =</span> <span class="kw">mean</span>(bmi, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb934-5"><a href="writing-functions.html#cb934-5"></a>    <span class="dt">median =</span> <span class="kw">median</span>(bmi, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb934-6"><a href="writing-functions.html#cb934-6"></a>    <span class="dt">min    =</span> <span class="kw">min</span>(bmi, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb934-7"><a href="writing-functions.html#cb934-7"></a>    <span class="dt">max    =</span> <span class="kw">max</span>(bmi, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb934-8"><a href="writing-functions.html#cb934-8"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      4  23.6   22.9  10.6  45.2</code></pre>
<p>And, we’re done! We got the stats we wanted. However, there’s a problem. Did you spot it? We accidently forgot to change <code>ht_in</code> to <code>wt_lbs</code> in the min calculation above. Therefore, our results incorrectly indicate that the minimum weight was 58 lbs. Part of the reason for making this mistake in the first place is that there is a fair amount of visual clutter in each code chunk. What I mean is that it’s hard to quickly scan each chunk and see only the elements that are <em>changing</em>. Finally, each code chunk was about 8 lines of code. Even with only 4 variables, that’s still 32 lines. I think we can improve on this code by writing our own function:</p>
<div class="sourceCode" id="cb936"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb936-1"><a href="writing-functions.html#cb936-1"></a>continuous_stats &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb936-2"><a href="writing-functions.html#cb936-2"></a>  study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb936-3"><a href="writing-functions.html#cb936-3"></a><span class="st">    </span><span class="kw">summarise</span>(</span>
<span id="cb936-4"><a href="writing-functions.html#cb936-4"></a>      <span class="dt">n_miss =</span> <span class="kw">sum</span>(<span class="kw">is.na</span>({{ var }})),</span>
<span id="cb936-5"><a href="writing-functions.html#cb936-5"></a>      <span class="dt">mean   =</span> <span class="kw">mean</span>({{ var }}, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb936-6"><a href="writing-functions.html#cb936-6"></a>      <span class="dt">median =</span> <span class="kw">median</span>({{ var }}, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb936-7"><a href="writing-functions.html#cb936-7"></a>      <span class="dt">min    =</span> <span class="kw">min</span>({{ var }}, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb936-8"><a href="writing-functions.html#cb936-8"></a>      <span class="dt">max    =</span> <span class="kw">max</span>({{ var }}, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</span>
<span id="cb936-9"><a href="writing-functions.html#cb936-9"></a>    )</span>
<span id="cb936-10"><a href="writing-functions.html#cb936-10"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb937"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb937-1"><a href="writing-functions.html#cb937-1"></a><span class="kw">continuous_stats</span>(age)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      1  26.9     26    22    48</code></pre>
<div class="sourceCode" id="cb939"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb939-1"><a href="writing-functions.html#cb939-1"></a><span class="kw">continuous_stats</span>(ht_in)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      3  66.0     66    58    76</code></pre>
<div class="sourceCode" id="cb941"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb941-1"><a href="writing-functions.html#cb941-1"></a><span class="kw">continuous_stats</span>(wt_lbs)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      2  148.   142.    60   297</code></pre>
<div class="sourceCode" id="cb943"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb943-1"><a href="writing-functions.html#cb943-1"></a><span class="kw">continuous_stats</span>(bmi)</span></code></pre></div>
<pre><code>## # A tibble: 1 x 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      4  23.6   22.9  10.6  45.2</code></pre>
<p>We’ve now reduced 32 lines of code to 13 lines of code! Additionally, it’s very easy to quickly scan our code and see that the only thing changing from chunk-to-chunk is the name of the variable that we are passing to our function and ensure that it is <em>actually</em> changing. As an added bonus, because we’ve strategically given our function an informative name, the intent behind what we are trying to accomplish is clearer now – we are calculating summary statistics about our continuous variables.</p>
<p>I hope that this little demonstration has left you feeling like writing your own functions can be really useful, and maybe even kind of cool. I’m going to get into the nuts and bolts of <em>how</em> to write your own functions shortly, but first I want to briefly discuss <em>when</em> to write your own functions.</p>
<div id="when-to-write-functions" class="section level2" number="33.1">
<h2><span class="header-section-number">33.1</span> When to write functions</h2>
<p>I’ll again quote Hadley Wickham, prolific R developer and teacher. He says, “You should consider writing a function whenever you’ve copied and pasted a block of code more than twice (i.e. you now have three copies of the same code).” <span class="citation"><a href="#ref-Grolemund2017-qp" role="doc-biblioref">2</a></span> I’m agree completely with this general sentiment. I’m only going to amend my advice to you slightly. Specifically, you should consider using an appropriate method for repeating operations whenever you’ve copied and pasted a block of code more than twice. In other words, <em>writing a function</em> is not the <em>only</em> option available to us when we notice ourselves copying and pasting code.</p>
</div>
<div id="how-to-write-functions" class="section level2" number="33.2">
<h2><span class="header-section-number">33.2</span> How to write functions</h2>
<p>Now, the fun part – writing our own functions. I know that writing functions can seem intimidating to many people at first. However, the basics are actually pretty simple.</p>
<div id="the-function-function" class="section level3" number="33.2.1">
<h3><span class="header-section-number">33.2.1</span> The function() function</h3>
<p>It all starts with the <code>function()</code> function. It is how you tell the R interpreter that you are about to write your own function.</p>
<div class="figure"><span id="fig:unnamed-chunk-696"></span>
<img src="img/07_part_repeated_operations/02_functions/function.png" alt="The function() function." width="900" />
<p class="caption">
Figure 33.1: The function() function.
</p>
</div>
<p>If you think back to the chapter on <a href="speaking-rs-language.html#functions">Speaking R’s language</a>, we talked about the analogy that is sometimes drawn between functions and factories.</p>
<div class="figure"><span id="fig:unnamed-chunk-697"></span>
<img src="img/01_part_getting_started/04_speaking_r/factory1.png" alt="A factory making bicycles." width="900" />
<p class="caption">
Figure 33.2: A factory making bicycles.
</p>
</div>
<p>To build on that analogy, the<code>function()</code> is sort of like the factory building. Without it, there is no factory, but an empty building alone doesn’t do anything interesting:</p>
<div class="sourceCode" id="cb945"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb945-1"><a href="writing-functions.html#cb945-1"></a><span class="cf">function</span>()</span></code></pre></div>
<pre><code>## Error: &lt;text&gt;:2:0: unexpected end of input
## 1: function()
##    ^</code></pre>
<p>In order to build our bicycles, we need to add some workers and equipment to our empty factory building. The R function equivalent to the workers and equipment is the <strong>function body.</strong></p>
<div class="figure"><span id="fig:unnamed-chunk-699"></span>
<img src="img/07_part_repeated_operations/02_functions/body.png" alt="The function body." width="900" />
<p class="caption">
Figure 33.3: The function body.
</p>
</div>
<p>And just like the factory needs doors to contain our workers and equipment and keep them safe (I’m admittedly reaching a little on this one, but just go with it), our function body needs to be wrapped with curly braces.</p>
<div class="figure"><span id="fig:unnamed-chunk-700"></span>
<img src="img/07_part_repeated_operations/02_functions/braces.png" alt="Curly braces around the function body." width="900" />
<p class="caption">
Figure 33.4: Curly braces around the function body.
</p>
</div>
<p>We already talked about how, in this analogy, <strong>arguments</strong> are raw material inputs that go into the factory.</p>
<div class="figure"><span id="fig:unnamed-chunk-701"></span>
<img src="img/07_part_repeated_operations/02_functions/arguments.png" alt="The function argument(s)." width="900" />
<p class="caption">
Figure 33.5: The function argument(s).
</p>
</div>
<p>In the bicycle factory example, the raw materials were steel and rubber. In the function displayed above, the raw materials are variables.</p>
<p>If we want to be able to call our function (i.e., use it), then we have to have some way to refer to it. Therefore, we will assign our function a name.</p>
<div class="figure"><span id="fig:unnamed-chunk-702"></span>
<img src="img/07_part_repeated_operations/02_functions/name.png" alt="The named function." width="900" />
<p class="caption">
Figure 33.6: The named function.
</p>
</div>
<p>I should mention that I’ve intentionally left out some technical details above. I’ve done so for two reasons. First, I’m trying to prevent you from feeling afraid of writing functions. Second, many of the technical details are irrelevant for the level we are currently at. However, there is one technical detail that may be worth mentioning now. Most of the functions we will create will have a name. However, functions do not technically <em>have</em> to have a name. When functions don’t have a name, they are called ** anonymous functions.** For now, just be aware that anonymous functions are a thing. Later, I will show you how they can sometimes be useful.</p>
</div>
<div id="the-function-writing-process" class="section level3" number="33.2.2">
<h3><span class="header-section-number">33.2.2</span> The function writing process</h3>
<p>So, we have some idea about <em>why</em> writing our own functions can be a good idea. We have some idea about <em>when</em> to write functions (i.e., don’t repeat yourself… more than twice). And, we now know what the basic components of functions are. They are the <code>function()</code> function, the function body (wrapped in curly braces), the function argument(s), and the function name. But, if this is your first time dealing with functions, then you may still be feeling like you aren’t quite sure where to start. So, here’s a little example of how my workflow typically goes.</p>
<p>First, let’s simulate some new data for this example. Let’s say we have two data frames that contain peoples first and last names:</p>
<div class="sourceCode" id="cb947"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb947-1"><a href="writing-functions.html#cb947-1"></a>people_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb947-2"><a href="writing-functions.html#cb947-2"></a>  <span class="op">~</span>id_<span class="dv">1</span>, <span class="op">~</span>name_first_<span class="dv">1</span>, <span class="op">~</span>name_last_<span class="dv">1</span>, <span class="op">~</span>street_<span class="dv">1</span>,</span>
<span id="cb947-3"><a href="writing-functions.html#cb947-3"></a>  <span class="dv">1</span>,     <span class="st">&quot;Easton&quot;</span>,      <span class="ot">NA</span>,           <span class="st">&quot;Alameda&quot;</span>,</span>
<span id="cb947-4"><a href="writing-functions.html#cb947-4"></a>  <span class="dv">2</span>,     <span class="st">&quot;Elias&quot;</span>,       <span class="st">&quot;Salazar&quot;</span>,    <span class="st">&quot;Crissy Field&quot;</span>,</span>
<span id="cb947-5"><a href="writing-functions.html#cb947-5"></a>  <span class="dv">3</span>,     <span class="st">&quot;Colton&quot;</span>,      <span class="st">&quot;Fox&quot;</span>,        <span class="st">&quot;San Bruno&quot;</span>,</span>
<span id="cb947-6"><a href="writing-functions.html#cb947-6"></a>  <span class="dv">4</span>,     <span class="st">&quot;Cameron&quot;</span>,     <span class="st">&quot;Warren&quot;</span>,     <span class="st">&quot;Nottingham&quot;</span>,</span>
<span id="cb947-7"><a href="writing-functions.html#cb947-7"></a>  <span class="dv">5</span>,     <span class="st">&quot;Carson&quot;</span>,      <span class="st">&quot;Mills&quot;</span>,      <span class="st">&quot;Jersey&quot;</span>,</span>
<span id="cb947-8"><a href="writing-functions.html#cb947-8"></a>  <span class="dv">6</span>,     <span class="st">&quot;Addison&quot;</span>,     <span class="st">&quot;Meyer&quot;</span>,      <span class="st">&quot;Tingley&quot;</span>,</span>
<span id="cb947-9"><a href="writing-functions.html#cb947-9"></a>  <span class="dv">7</span>,     <span class="st">&quot;Aubrey&quot;</span>,      <span class="st">&quot;Rice&quot;</span>,       <span class="st">&quot;Buena Vista&quot;</span>,</span>
<span id="cb947-10"><a href="writing-functions.html#cb947-10"></a>  <span class="dv">8</span>,     <span class="st">&quot;Ellie&quot;</span>,       <span class="st">&quot;Schmidt&quot;</span>,    <span class="st">&quot;Division&quot;</span>,</span>
<span id="cb947-11"><a href="writing-functions.html#cb947-11"></a>  <span class="dv">9</span>,     <span class="st">&quot;Robert&quot;</span>,      <span class="st">&quot;Garza&quot;</span>,      <span class="st">&quot;Red Rock&quot;</span>,</span>
<span id="cb947-12"><a href="writing-functions.html#cb947-12"></a>  <span class="dv">10</span>,    <span class="st">&quot;Stella&quot;</span>,      <span class="st">&quot;Daniels&quot;</span>,    <span class="st">&quot;Holland&quot;</span></span>
<span id="cb947-13"><a href="writing-functions.html#cb947-13"></a>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb947-14"><a href="writing-functions.html#cb947-14"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 x 4
##     id_1 name_first_1 name_last_1 street_1    
##    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;       
##  1     1 Easton       &lt;NA&gt;        Alameda     
##  2     2 Elias        Salazar     Crissy Field
##  3     3 Colton       Fox         San Bruno   
##  4     4 Cameron      Warren      Nottingham  
##  5     5 Carson       Mills       Jersey      
##  6     6 Addison      Meyer       Tingley     
##  7     7 Aubrey       Rice        Buena Vista 
##  8     8 Ellie        Schmidt     Division    
##  9     9 Robert       Garza       Red Rock    
## 10    10 Stella       Daniels     Holland</code></pre>
<div class="sourceCode" id="cb949"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb949-1"><a href="writing-functions.html#cb949-1"></a>people_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb949-2"><a href="writing-functions.html#cb949-2"></a>  <span class="op">~</span>id_<span class="dv">2</span>, <span class="op">~</span>name_first_<span class="dv">2</span>, <span class="op">~</span>name_last_<span class="dv">2</span>, <span class="op">~</span>street_<span class="dv">2</span>,</span>
<span id="cb949-3"><a href="writing-functions.html#cb949-3"></a>  <span class="dv">1</span>,     <span class="st">&quot;Easton&quot;</span>,      <span class="st">&quot;Stone&quot;</span>,      <span class="st">&quot;Alameda&quot;</span>,</span>
<span id="cb949-4"><a href="writing-functions.html#cb949-4"></a>  <span class="dv">2</span>,     <span class="st">&quot;Elas&quot;</span>,        <span class="st">&quot;Salazar&quot;</span>,    <span class="st">&quot;Field&quot;</span>,</span>
<span id="cb949-5"><a href="writing-functions.html#cb949-5"></a>  <span class="dv">3</span>,     <span class="ot">NA</span>,            <span class="st">&quot;Fox&quot;</span>,        <span class="ot">NA</span>,</span>
<span id="cb949-6"><a href="writing-functions.html#cb949-6"></a>  <span class="dv">4</span>,     <span class="st">&quot;Cameron&quot;</span>,     <span class="st">&quot;Waren&quot;</span>,      <span class="st">&quot;Notingham&quot;</span>,</span>
<span id="cb949-7"><a href="writing-functions.html#cb949-7"></a>  <span class="dv">5</span>,     <span class="st">&quot;Carsen&quot;</span>,      <span class="st">&quot;Mills&quot;</span>,      <span class="st">&quot;Jersey&quot;</span>,</span>
<span id="cb949-8"><a href="writing-functions.html#cb949-8"></a>  <span class="dv">6</span>,     <span class="st">&quot;Adison&quot;</span>,      <span class="ot">NA</span>,           <span class="ot">NA</span>,</span>
<span id="cb949-9"><a href="writing-functions.html#cb949-9"></a>  <span class="dv">7</span>,     <span class="st">&quot;Aubrey&quot;</span>,      <span class="st">&quot;Rice&quot;</span>,       <span class="st">&quot;Buena Vista&quot;</span>,</span>
<span id="cb949-10"><a href="writing-functions.html#cb949-10"></a>  <span class="dv">8</span>,     <span class="ot">NA</span>,            <span class="st">&quot;Schmidt&quot;</span>,    <span class="st">&quot;Division&quot;</span>,</span>
<span id="cb949-11"><a href="writing-functions.html#cb949-11"></a>  <span class="dv">9</span>,     <span class="st">&quot;Bob&quot;</span>,         <span class="st">&quot;Garza&quot;</span>,      <span class="st">&quot;Red Rock&quot;</span>,</span>
<span id="cb949-12"><a href="writing-functions.html#cb949-12"></a>  <span class="dv">10</span>,    <span class="st">&quot;Stella&quot;</span>,      <span class="ot">NA</span>,           <span class="st">&quot;Holland&quot;</span></span>
<span id="cb949-13"><a href="writing-functions.html#cb949-13"></a>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb949-14"><a href="writing-functions.html#cb949-14"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 x 4
##     id_2 name_first_2 name_last_2 street_2   
##    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;      
##  1     1 Easton       Stone       Alameda    
##  2     2 Elas         Salazar     Field      
##  3     3 &lt;NA&gt;         Fox         &lt;NA&gt;       
##  4     4 Cameron      Waren       Notingham  
##  5     5 Carsen       Mills       Jersey     
##  6     6 Adison       &lt;NA&gt;        &lt;NA&gt;       
##  7     7 Aubrey       Rice        Buena Vista
##  8     8 &lt;NA&gt;         Schmidt     Division   
##  9     9 Bob          Garza       Red Rock   
## 10    10 Stella       &lt;NA&gt;        Holland</code></pre>
<p>In this scenario, we want to see if first name, last name, and street name match at each ID between our data frames. More specifically, we want to combine the two data frames into a single data frame and create three new dummy variables that indicate whether first name, last name, and address match respectively. Let’s go ahead and combine the data frames now:</p>
<div class="sourceCode" id="cb951"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb951-1"><a href="writing-functions.html#cb951-1"></a>people &lt;-<span class="st"> </span>people_<span class="dv">1</span> <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb951-2"><a href="writing-functions.html#cb951-2"></a><span class="st">  </span><span class="kw">bind_cols</span>(people_<span class="dv">2</span>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb951-3"><a href="writing-functions.html#cb951-3"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 x 8
##     id_1 name_first_1 name_last_1 street_1  id_2 name_first_2 name_last_2
##    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;      
##  1     1 Easton       &lt;NA&gt;        Alameda      1 Easton       Stone      
##  2     2 Elias        Salazar     Crissy …     2 Elas         Salazar    
##  3     3 Colton       Fox         San Bru…     3 &lt;NA&gt;         Fox        
##  4     4 Cameron      Warren      Notting…     4 Cameron      Waren      
##  5     5 Carson       Mills       Jersey       5 Carsen       Mills      
##  6     6 Addison      Meyer       Tingley      6 Adison       &lt;NA&gt;       
##  7     7 Aubrey       Rice        Buena V…     7 Aubrey       Rice       
##  8     8 Ellie        Schmidt     Division     8 &lt;NA&gt;         Schmidt    
##  9     9 Robert       Garza       Red Rock     9 Bob          Garza      
## 10    10 Stella       Daniels     Holland     10 Stella       &lt;NA&gt;       
## # … with 1 more variable: street_2 &lt;chr&gt;</code></pre>
<p>Now, our first attempt might look something like this:</p>
<div class="sourceCode" id="cb953"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb953-1"><a href="writing-functions.html#cb953-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb953-2"><a href="writing-functions.html#cb953-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb953-3"><a href="writing-functions.html#cb953-3"></a>    <span class="dt">name_first_match =</span> name_first_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span>name_first_<span class="dv">2</span>,</span>
<span id="cb953-4"><a href="writing-functions.html#cb953-4"></a>    <span class="dt">name_last_match  =</span> name_last_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span>name_last_<span class="dv">2</span>,</span>
<span id="cb953-5"><a href="writing-functions.html#cb953-5"></a>    <span class="dt">street_match     =</span> street_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span>street_<span class="dv">2</span></span>
<span id="cb953-6"><a href="writing-functions.html#cb953-6"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb953-7"><a href="writing-functions.html#cb953-7"></a><span class="st">  </span><span class="co"># Order like columns next to each other for easier comparison</span></span>
<span id="cb953-8"><a href="writing-functions.html#cb953-8"></a><span class="st">  </span><span class="kw">select</span>(id_<span class="dv">1</span>, <span class="kw">starts_with</span>(<span class="st">&quot;name_f&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;name_l&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;s&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 10 x 10
##     id_1 name_first_1 name_first_2 name_first_match name_last_1 name_last_2
##    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;        &lt;lgl&gt;            &lt;chr&gt;       &lt;chr&gt;      
##  1     1 Easton       Easton       TRUE             &lt;NA&gt;        Stone      
##  2     2 Elias        Elas         FALSE            Salazar     Salazar    
##  3     3 Colton       &lt;NA&gt;         NA               Fox         Fox        
##  4     4 Cameron      Cameron      TRUE             Warren      Waren      
##  5     5 Carson       Carsen       FALSE            Mills       Mills      
##  6     6 Addison      Adison       FALSE            Meyer       &lt;NA&gt;       
##  7     7 Aubrey       Aubrey       TRUE             Rice        Rice       
##  8     8 Ellie        &lt;NA&gt;         NA               Schmidt     Schmidt    
##  9     9 Robert       Bob          FALSE            Garza       Garza      
## 10    10 Stella       Stella       TRUE             Daniels     &lt;NA&gt;       
## # … with 4 more variables: name_last_match &lt;lgl&gt;, street_1 &lt;chr&gt;,
## #   street_2 &lt;chr&gt;, street_match &lt;lgl&gt;</code></pre>
<p>Ok, in row 1 we see that “Easton” and “Easton” match, and the value for <code>name_first_match</code> is <code>TRUE</code>. So far, so good. In row 2, we see that “Elias” and “Ela” do not match, and the value for <code>name_first_match</code> is <code>FALSE</code>. That is also the result we wanted. In row 3, we see that “Colton” and “NA” do not match; however, the value in <code>name_first_match</code> is <code>NA</code>. In this case, this is not the result we want. We have a problem. That brings us to the first step in my typical workflow.</p>
<div id="i-spot-a-need-for-a-function" class="section level4" number="33.2.2.1">
<h4><span class="header-section-number">33.2.2.1</span> I spot a need for a function</h4>
<p>In some cases, the need I spot is purely repetitive code – like the example at the beginning of this chapter. In other cases, like this one, a built-in R function is not giving me the result I want.</p>
<p>Here is the basic problem:</p>
<div class="sourceCode" id="cb955"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb955-1"><a href="writing-functions.html#cb955-1"></a><span class="dv">1</span> <span class="op">==</span><span class="st"> </span><span class="dv">1</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb957"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb957-1"><a href="writing-functions.html#cb957-1"></a><span class="dv">1</span> <span class="op">==</span><span class="st"> </span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb959"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb959-1"><a href="writing-functions.html#cb959-1"></a><span class="dv">1</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb961"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb961-1"><a href="writing-functions.html#cb961-1"></a><span class="ot">NA</span> <span class="op">==</span><span class="st"> </span><span class="dv">2</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb963"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb963-1"><a href="writing-functions.html#cb963-1"></a><span class="ot">NA</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>The equality operator (<code>==</code>) always returns <code>NA</code> when one, or both, of the values being tested is <code>NA</code>. Often, that is exactly the result we want. In this case, however, it is not. Fortunately, we can get the result we want by writing our own function. That brings us to step 2 in the workflow.</p>
</div>
<div id="i-make-the-code-work-for-one-specific-case" class="section level4" number="33.2.2.2">
<h4><span class="header-section-number">33.2.2.2</span> I make the code work for one specific case</h4>
<p>Don’t try to solve the entire problem for every case right out of the gate. Instead, solve one problem for a specific case, and then build on that win! Let’s start by trying to figure out how to get the result we want for <code>name_first_match</code> in row 3 of our example data.</p>
<div class="sourceCode" id="cb965"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb965-1"><a href="writing-functions.html#cb965-1"></a><span class="st">&quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>This is essentially what we already had above. But, we want to change our result from <code>NA</code> to <code>FALSE</code>. Let’s start by saving the result to an object that we can manipulate:</p>
<div class="sourceCode" id="cb967"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb967-1"><a href="writing-functions.html#cb967-1"></a>result &lt;-<span class="st"> &quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb967-2"><a href="writing-functions.html#cb967-2"></a>result</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>So, now the value returned by the equality comparison is saved to an object named <code>result</code>. Let’s go ahead and use a conditional operation to change the value of <code>result</code> to <code>FALSE</code> when it is initially <code>NA</code>, and leave it alone otherwise:</p>
<div class="sourceCode" id="cb969"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb969-1"><a href="writing-functions.html#cb969-1"></a>result &lt;-<span class="st"> &quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb969-2"><a href="writing-functions.html#cb969-2"></a>result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb969-3"><a href="writing-functions.html#cb969-3"></a>result</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Alright! This worked! At least, it worked for this case. That brings us to step 3 in the workflow.</p>
</div>
<div id="i-make-the-solution-into-a-function" class="section level4" number="33.2.2.3">
<h4><span class="header-section-number">33.2.2.3</span> I make the solution into a “function”</h4>
<p>How do I do that? Well, first I start with a skeleton of most the function components we discussed above. They are the <code>function()</code> function, the function body (wrapped in curly braces), and the function name. At the moment, we don’t have any arguments. I’ll explain why soon.</p>
<div class="sourceCode" id="cb971"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb971-1"><a href="writing-functions.html#cb971-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb971-2"><a href="writing-functions.html#cb971-2"></a>  </span>
<span id="cb971-3"><a href="writing-functions.html#cb971-3"></a>}</span></code></pre></div>
<p>Then, I literally copy the solution from above and paste it into the function body, making sure to indent the code. Next, we need to run the code chunk to <em>create</em> the function. After doing so, you should see the function appear in your global environment. Keep in mind, this <em>creates</em> the function so that we can use it later, but the function isn’t immediately <em>run</em>.</p>
<div class="sourceCode" id="cb972"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb972-1"><a href="writing-functions.html#cb972-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb972-2"><a href="writing-functions.html#cb972-2"></a>  result &lt;-<span class="st"> &quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb972-3"><a href="writing-functions.html#cb972-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb972-4"><a href="writing-functions.html#cb972-4"></a>  result</span>
<span id="cb972-5"><a href="writing-functions.html#cb972-5"></a>}</span></code></pre></div>
<p>Now, let’s test out our shiny new function. To <em>run</em> the function, we can simply type the function name, with the parentheses, and run the code chunk.</p>
<div class="sourceCode" id="cb973"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb973-1"><a href="writing-functions.html#cb973-1"></a><span class="kw">is_match</span>()</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>And, it works! When we ask R to run a function we are really asking R to run the <em>code</em> in the <em>body</em> of the function. In this case, we know that the code in the body of the function results in the value <code>FALSE</code> because this results in <code>FALSE</code>:</p>
<div class="sourceCode" id="cb975"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb975-1"><a href="writing-functions.html#cb975-1"></a>result &lt;-<span class="st"> &quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb975-2"><a href="writing-functions.html#cb975-2"></a>result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb975-3"><a href="writing-functions.html#cb975-3"></a>result</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>And all we did was stick that code in the function body. Said another way, this:</p>
<div class="sourceCode" id="cb977"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb977-1"><a href="writing-functions.html#cb977-1"></a>result &lt;-<span class="st"> &quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb977-2"><a href="writing-functions.html#cb977-2"></a>result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb977-3"><a href="writing-functions.html#cb977-3"></a>result</span></code></pre></div>
<p>and this:</p>
<div class="sourceCode" id="cb978"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb978-1"><a href="writing-functions.html#cb978-1"></a><span class="kw">is_match</span>()</span></code></pre></div>
<p>mean essentially the same thing to R now. I hope that makes sense. Stick with me even if it still isn’t quite clear. We’ll get more practice soon.</p>
<p>At this point, you may be wondering about the function arguments, and why there aren’t any. Well, we can try passing a value to our <code>is_match()</code> function. How about we pass the name “Easton” from the first row of our example data above:</p>
<div class="sourceCode" id="cb979"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb979-1"><a href="writing-functions.html#cb979-1"></a><span class="kw">is_match</span>(<span class="dt">name =</span> <span class="st">&quot;Easton&quot;</span>)</span></code></pre></div>
<pre><code>## Error in is_match(name = &quot;Easton&quot;): unused argument (name = &quot;Easton&quot;)</code></pre>
<p>But, we get an error. R doesn’t know what the <code>name</code> argument is or what to do with the values we are passing to it. That’s because we never said anything about any arguments when we created the <code>is_match()</code> function. We left the parentheses where the function arguments go empty.</p>
<div class="sourceCode" id="cb981"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb981-1"><a href="writing-functions.html#cb981-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>() {</span>
<span id="cb981-2"><a href="writing-functions.html#cb981-2"></a>  result &lt;-<span class="st"> &quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb981-3"><a href="writing-functions.html#cb981-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb981-4"><a href="writing-functions.html#cb981-4"></a>  result</span>
<span id="cb981-5"><a href="writing-functions.html#cb981-5"></a>}</span></code></pre></div>
<p>Well, let’s create <code>is_match()</code> again, but this time, let’s add an argument:</p>
<div class="sourceCode" id="cb982"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb982-1"><a href="writing-functions.html#cb982-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>(name) {</span>
<span id="cb982-2"><a href="writing-functions.html#cb982-2"></a>  result &lt;-<span class="st"> &quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb982-3"><a href="writing-functions.html#cb982-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb982-4"><a href="writing-functions.html#cb982-4"></a>  result</span>
<span id="cb982-5"><a href="writing-functions.html#cb982-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb983"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb983-1"><a href="writing-functions.html#cb983-1"></a><span class="kw">is_match</span>(<span class="dt">name =</span> <span class="st">&quot;Easton&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Hmmm, let’s add another argument and see what happens:</p>
<div class="sourceCode" id="cb985"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb985-1"><a href="writing-functions.html#cb985-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>(name_<span class="dv">1</span>, name_<span class="dv">2</span>) {</span>
<span id="cb985-2"><a href="writing-functions.html#cb985-2"></a>  result &lt;-<span class="st"> &quot;Colton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb985-3"><a href="writing-functions.html#cb985-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb985-4"><a href="writing-functions.html#cb985-4"></a>  result</span>
<span id="cb985-5"><a href="writing-functions.html#cb985-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb986"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb986-1"><a href="writing-functions.html#cb986-1"></a><span class="kw">is_match</span>(<span class="dt">name_1 =</span> <span class="st">&quot;Easton&quot;</span>, <span class="dt">name_2 =</span> <span class="st">&quot;Easton&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>It looks as though the arguments we are adding don’t have any effect on our returned value. That’s because they don’t. I oversimplified how function arguments work just a little bit in our factory analogy earlier. When add arguments to function definition (i.e., when we create the function) it’s really more like adding a loading dock to our factory. It’s a place where our factory can receive raw materials. However, there still needs to be equipment inside the factory that can <em>use</em> those raw materials. If we drop off a load of rubber at our bicycle factor, but there’s nothing inside our bicycle factory that uses rubber, then we wouldn’t expect dropping off the rubber to have any effect on the outputs coming out of the factory.</p>
<p>We have similar situation above. We dropped the name “Easton” off at our <code>is_match()</code> function, but nothing <em>inside</em> our <code>is_match()</code> function can <em>use</em> the name “Easton”. There’s no machinery to plug that name into. That brings us to step 4 in the workflow.</p>
</div>
<div id="i-start-generalizing-the-function" class="section level4" number="33.2.2.4">
<h4><span class="header-section-number">33.2.2.4</span> I start generalizing the function</h4>
<p>As it stands right now, our <code>is_match()</code> function can’t accept any new names. The only result we will ever get from the current version of our <code>is_match()</code> function is the result of testing the equality between the values “Colton” and NA, and then converting that value to <code>FALSE</code>. This isn’t a problem if the only values we care about comparing are “Colton” and NA, but of course, that isn’t the case. We need a way to make our function work for other values too. Said another way, we need to make our function more general.</p>
<p>As you may have guessed already, that will require us creating an argument to receive input values <em>and</em> a place to use those input values in the function body. Let’s start by adding a <code>first_name</code> argument:</p>
<div class="sourceCode" id="cb988"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb988-1"><a href="writing-functions.html#cb988-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>(first_name) {</span>
<span id="cb988-2"><a href="writing-functions.html#cb988-2"></a>  result &lt;-<span class="st"> </span>first_name <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb988-3"><a href="writing-functions.html#cb988-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb988-4"><a href="writing-functions.html#cb988-4"></a>  result</span>
<span id="cb988-5"><a href="writing-functions.html#cb988-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb989"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb989-1"><a href="writing-functions.html#cb989-1"></a><span class="kw">is_match</span>(<span class="dt">first_name =</span> <span class="st">&quot;Easton&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We created once again created our <code>is_match()</code> function. However, this time we created it with a single argument – <code>first_name</code>. We didn’t have to name the argument <code>first_name</code>. We could have named it anything that we can name any other variable in R. But, <code>first_name</code> seemed like a reasonable choice since the value we want to pass to this argument is a person’s first name.</p></li>
<li><p>The <code>first_name</code> argument will receive the first name values that we want to pass to this function.</p></li>
<li><p>We replaced the constant value “Colton” in the function body with the variable <code>first_name</code>. It isn’t a coincidence that the name of the variable <code>first_name</code> matches the name of the argument <code>first_name</code>. R will take whatever value we give to the <code>first_name</code> argument and <em>pass</em> it to the variable with a matching name inside the function body. Then, R will run the code inside the function body as though the variable <em>is</em> the value we passed to it.</p></li>
</ul>
<p>So, when we type:</p>
<div class="sourceCode" id="cb991"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb991-1"><a href="writing-functions.html#cb991-1"></a><span class="kw">is_match</span>(<span class="dt">first_name =</span> <span class="st">&quot;Easton&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>R sees:</p>
<div class="sourceCode" id="cb993"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb993-1"><a href="writing-functions.html#cb993-1"></a>result &lt;-<span class="st"> &quot;Easton&quot;</span> <span class="op">==</span><span class="st"> </span><span class="ot">NA</span></span>
<span id="cb993-2"><a href="writing-functions.html#cb993-2"></a>result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb993-3"><a href="writing-functions.html#cb993-3"></a>result</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>It looks like our <code>is_match()</code> function is still going to return a value of <code>FALSE</code> no matter what value we pass to the <code>first_name</code> function. That’s because no matter what value we pass to <code>result &lt;- first_name == NA</code>, <code>result</code> will equal <code>NA</code>. Then, <code>result &lt;- if_else(is.na(result), FALSE, result)</code> will change the value of <code>result</code> to <code>FALSE</code>. So, we still need to make our function more general. As you may have guessed, we can do that by adding a second argument:</p>
<div class="sourceCode" id="cb995"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb995-1"><a href="writing-functions.html#cb995-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>(first_name, first_name) {</span>
<span id="cb995-2"><a href="writing-functions.html#cb995-2"></a>  result &lt;-<span class="st"> </span>first_name <span class="op">==</span><span class="st"> </span>first_name</span>
<span id="cb995-3"><a href="writing-functions.html#cb995-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb995-4"><a href="writing-functions.html#cb995-4"></a>  result</span>
<span id="cb995-5"><a href="writing-functions.html#cb995-5"></a>}</span></code></pre></div>
<pre><code>## Error: repeated formal argument &#39;first_name&#39; on line 1</code></pre>
<p>Uh, oh! We got an error. This error is telling us that each function argument must have a unique name. Let’s try again:</p>
<div class="sourceCode" id="cb997"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb997-1"><a href="writing-functions.html#cb997-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>(first_name_<span class="dv">1</span>, first_name_<span class="dv">2</span>) {</span>
<span id="cb997-2"><a href="writing-functions.html#cb997-2"></a>  result &lt;-<span class="st"> </span>first_name_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span>first_name_<span class="dv">2</span></span>
<span id="cb997-3"><a href="writing-functions.html#cb997-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb997-4"><a href="writing-functions.html#cb997-4"></a>  result</span>
<span id="cb997-5"><a href="writing-functions.html#cb997-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb998"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb998-1"><a href="writing-functions.html#cb998-1"></a><span class="kw">is_match</span>(<span class="dt">first_name_1 =</span> <span class="st">&quot;Easton&quot;</span>, <span class="dt">first_name_2 =</span> <span class="st">&quot;Colton&quot;</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Is this working or is our function still just returning <code>FALSE</code> no matter what we pass to the arguments? Let’s try to pass “Easton” to <code>first_name_1</code> and <code>first_name_2</code> and see what happens:</p>
<div class="sourceCode" id="cb1000"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1000-1"><a href="writing-functions.html#cb1000-1"></a><span class="kw">is_match</span>(<span class="dt">first_name_1 =</span> <span class="st">&quot;Easton&quot;</span>, <span class="dt">first_name_2 =</span> <span class="st">&quot;Easton&quot;</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We got a <code>TRUE</code>! That’s exactly what we were wanting! Let’s do one final check. Let’s see what happens when we pass <code>NA</code> to our <code>is_match()</code> function:</p>
<div class="sourceCode" id="cb1002"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1002-1"><a href="writing-functions.html#cb1002-1"></a><span class="kw">is_match</span>(<span class="dt">first_name_1 =</span> <span class="st">&quot;Easton&quot;</span>, <span class="dt">first_name_2 =</span> <span class="ot">NA</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Perfect! It looks like our function is finally ready to help us solve the problem we identified way back at step one. But, while we are talking about <em>generalizing</em> our function, shouldn’t we go ahead and use more general names for our function arguments? I mean, we were only using first names when we were <em>developing</em> our function, but we are going to <em>use</em> our function to compare last names and street names as well. In fact, our function will compare any two values and tell us whether or not they are a match. So, let’s go ahead and change the argument names to <code>value_1</code> and <code>value_2</code>:</p>
<div class="sourceCode" id="cb1004"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1004-1"><a href="writing-functions.html#cb1004-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>(value_<span class="dv">1</span>, value_<span class="dv">2</span>) {</span>
<span id="cb1004-2"><a href="writing-functions.html#cb1004-2"></a>  result &lt;-<span class="st"> </span>value_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span>value_<span class="dv">2</span>  <span class="co"># Don&#39;t forget to change the variable names here!!</span></span>
<span id="cb1004-3"><a href="writing-functions.html#cb1004-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb1004-4"><a href="writing-functions.html#cb1004-4"></a>  result</span>
<span id="cb1004-5"><a href="writing-functions.html#cb1004-5"></a>}</span></code></pre></div>
<p>Now, we are ready to put our function to work testing whether or not the first name, last name, and street name match at each ID between our data frames:</p>
<div class="sourceCode" id="cb1005"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1005-1"><a href="writing-functions.html#cb1005-1"></a>people <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1005-2"><a href="writing-functions.html#cb1005-2"></a><span class="st">  </span><span class="kw">mutate</span>(</span>
<span id="cb1005-3"><a href="writing-functions.html#cb1005-3"></a>    <span class="dt">name_first_match =</span> <span class="kw">is_match</span>(name_first_<span class="dv">1</span>, name_first_<span class="dv">2</span>),</span>
<span id="cb1005-4"><a href="writing-functions.html#cb1005-4"></a>    <span class="dt">name_last_match  =</span> <span class="kw">is_match</span>(name_last_<span class="dv">1</span>, name_last_<span class="dv">2</span>),</span>
<span id="cb1005-5"><a href="writing-functions.html#cb1005-5"></a>    <span class="dt">street_match     =</span> <span class="kw">is_match</span>(street_<span class="dv">1</span>, street_<span class="dv">2</span>)</span>
<span id="cb1005-6"><a href="writing-functions.html#cb1005-6"></a>  ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1005-7"><a href="writing-functions.html#cb1005-7"></a><span class="st">  </span><span class="co"># Order like columns next to each other for easier comparison</span></span>
<span id="cb1005-8"><a href="writing-functions.html#cb1005-8"></a><span class="st">  </span><span class="kw">select</span>(id_<span class="dv">1</span>, <span class="kw">starts_with</span>(<span class="st">&quot;name_f&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;name_l&quot;</span>), <span class="kw">starts_with</span>(<span class="st">&quot;s&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 10 x 10
##     id_1 name_first_1 name_first_2 name_first_match name_last_1 name_last_2
##    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;        &lt;lgl&gt;            &lt;chr&gt;       &lt;chr&gt;      
##  1     1 Easton       Easton       TRUE             &lt;NA&gt;        Stone      
##  2     2 Elias        Elas         FALSE            Salazar     Salazar    
##  3     3 Colton       &lt;NA&gt;         FALSE            Fox         Fox        
##  4     4 Cameron      Cameron      TRUE             Warren      Waren      
##  5     5 Carson       Carsen       FALSE            Mills       Mills      
##  6     6 Addison      Adison       FALSE            Meyer       &lt;NA&gt;       
##  7     7 Aubrey       Aubrey       TRUE             Rice        Rice       
##  8     8 Ellie        &lt;NA&gt;         FALSE            Schmidt     Schmidt    
##  9     9 Robert       Bob          FALSE            Garza       Garza      
## 10    10 Stella       Stella       TRUE             Daniels     &lt;NA&gt;       
## # … with 4 more variables: name_last_match &lt;lgl&gt;, street_1 &lt;chr&gt;,
## #   street_2 &lt;chr&gt;, street_match &lt;lgl&gt;</code></pre>
<p>Works like a charm! Notice, however, that we still have a lot of repetition in the code above. Unfortunately, we still don’t have all the tools we need to remove it. But, we will soon.</p>
<p>At this point in the chapter, my hope is that you are developing a feel for how to write your own functions and why that might be useful. With R, it’s possible to write functions that are very complicated. But, I hope the examples above show you that functions don’t have to be complicated to be useful. In that spirit, I’m hesitant to dive too much deeper into the details and technicalities of function writing at this point. However, there are a few details that I feel like I should at least mention so that you aren’t caught off guard by them as you begin to write your own functions. I will touch on each below, and then wrap us this chapter with resources for those of you who wish to dive deeper.</p>
</div>
</div>
</div>
<div id="giving-your-function-arguments-default-values" class="section level2" number="33.3">
<h2><span class="header-section-number">33.3</span> Giving your function arguments default values</h2>
<p>I’ve been introducing new functions to you all throughout the book so far. Each time I do, I try to discuss some, or all, of the function’s arguments – including the default values that are passed to the arguments. I imagine that most of you have developed some sort of intuitive understanding of just what it meant for the argument to have a default value. However, this seems like an appropriate point in the book to talk about default arguments a little more explicitly and show you how to add them to the functions you write.</p>
<p>Let’s say that we want to write a function that will increase the value of a number, or set of numbers, incrementally. We may start with something like this:</p>
<div class="sourceCode" id="cb1007"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1007-1"><a href="writing-functions.html#cb1007-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb1007-2"><a href="writing-functions.html#cb1007-2"></a>  x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></span>
<span id="cb1007-3"><a href="writing-functions.html#cb1007-3"></a>}</span></code></pre></div>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We <em>created</em> our own function that will increase the value of a number, or set of numbers, incrementally. Specifically, when we pass a number to the <code>x</code> argument the value of that number plus one will be returned.</li>
</ul>
<p>Let’s go ahead and use our function now:</p>
<div class="sourceCode" id="cb1008"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1008-1"><a href="writing-functions.html#cb1008-1"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We passed the value <code>2</code> to the <code>x</code> argument of our <code>increment()</code> function. The <code>x</code> argument then passed the value <code>2</code> to the <code>x</code> variable in the function body. Said another way, R replaced the <code>x</code> variable in the function body with the value <code>2</code>. Then, R executed the code in the function body. In this case, the code in the function body added the values <code>2</code> and <code>1</code>. Finally, the function returned the value <code>3</code>.</li>
</ul>
<p>Believe it or not, our simple little <code>increment()</code> function is a full-fledged R function. It is just as legitimate as any other R function we’ve used in this book. But, let’s go ahead and add a little more to its functionality. For example, maybe we want to be able to increment by other values other than just one. How might we do that?</p>
<p>Hopefully, your first thought was to replace the constant value <code>1</code> in the function body with a variable that can have <em>any</em> number passed to it. That’s exactly what we will do next:</p>
<div class="sourceCode" id="cb1010"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1010-1"><a href="writing-functions.html#cb1010-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, by) {</span>
<span id="cb1010-2"><a href="writing-functions.html#cb1010-2"></a>  x <span class="op">+</span><span class="st"> </span>by</span>
<span id="cb1010-3"><a href="writing-functions.html#cb1010-3"></a>}</span></code></pre></div>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We <em>created</em> our own function that will increase the value of a number, or set of numbers, incrementally. Specifically, when we pass a number to the <code>x</code> argument the value of that number will be incremented by the value passed to the <code>by</code> argument.</li>
</ul>
<p>What value should <code>increment()</code> return if we pass <code>2</code> to the <code>x</code> argument and <code>2</code> to the <code>by</code> argument?</p>
<div class="sourceCode" id="cb1011"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1011-1"><a href="writing-functions.html#cb1011-1"></a><span class="kw">increment</span>(<span class="dv">2</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Hopefully, that’s what you were expecting. But, now what happens if we don’t pass any value to the <code>by</code> argument?</p>
<div class="sourceCode" id="cb1013"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1013-1"><a href="writing-functions.html#cb1013-1"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Error in increment(2): argument &quot;by&quot; is missing, with no default</code></pre>
<p>We get an error saying that there wasn’t any value passed to the <code>by</code> argument, and the <code>by</code> argument doesn’t have a default value. But, we are really lazy, and it takes a lot of work to pass a value to the <code>by</code> argument every time we use the <code>increment()</code> function. Plus, we <em>almost</em> always only want to increment our numbers by one. In this case, our best course of action is to set the default value of <code>by</code> to <code>1</code>. Fortunately for us, doing so is really easy!</p>
<div class="sourceCode" id="cb1015"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1015-1"><a href="writing-functions.html#cb1015-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1015-2"><a href="writing-functions.html#cb1015-2"></a>  x <span class="op">+</span><span class="st"> </span>by</span>
<span id="cb1015-3"><a href="writing-functions.html#cb1015-3"></a>}</span></code></pre></div>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We <em>created</em> our own function that will increase the value of a number, or set of numbers, incrementally. Specifically, when we pass a number to the <code>x</code> argument the value of that number will be incremented by the value passed to the <code>by</code> argument. The default value passed to the <code>by</code> argument is <code>1</code>. Said another way, R will <em>pretend</em> that we passed the value <code>1</code> to the <code>by</code> argument if we don’t explicitly pass a number other than <code>1</code> to the <code>by</code> argument.</p></li>
<li><p>All we had to do to give <code>by</code> a default value was type <code>=</code> followed by the value (i.e., <code>1</code>) when we created the function.</p></li>
</ul>
<p>Now let’s try out our latest version of <code>increment()</code>:</p>
<div class="sourceCode" id="cb1016"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1016-1"><a href="writing-functions.html#cb1016-1"></a><span class="co"># Default value</span></span>
<span id="cb1016-2"><a href="writing-functions.html#cb1016-2"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb1018"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1018-1"><a href="writing-functions.html#cb1018-1"></a><span class="co"># Passing the value 1</span></span>
<span id="cb1018-2"><a href="writing-functions.html#cb1018-2"></a><span class="kw">increment</span>(<span class="dv">2</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb1020"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1020-1"><a href="writing-functions.html#cb1020-1"></a><span class="co"># Passing a value other than 1</span></span>
<span id="cb1020-2"><a href="writing-functions.html#cb1020-2"></a><span class="kw">increment</span>(<span class="dv">2</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb1022"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1022-1"><a href="writing-functions.html#cb1022-1"></a><span class="co"># Passing a vector of numbers to the x argument</span></span>
<span id="cb1022-2"><a href="writing-functions.html#cb1022-2"></a><span class="kw">increment</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3 4 5</code></pre>
</div>
<div id="the-values-your-functions-return" class="section level2" number="33.4">
<h2><span class="header-section-number">33.4</span> The values your functions return</h2>
<p>When we run our functions, they typically execute each line of code in the function body, one after another, starting with the first line and ending at the last line. Therefore, the value that your function <em>returns</em> (i.e., the thing that comes out of the factory) is typically dictated by the last line of code in your function body.</p>
<p>To show you what I mean, let’s take another look at our <code>is_match()</code> function:</p>
<div class="sourceCode" id="cb1024"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1024-1"><a href="writing-functions.html#cb1024-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>(value_<span class="dv">1</span>, value_<span class="dv">2</span>) {</span>
<span id="cb1024-2"><a href="writing-functions.html#cb1024-2"></a>  result &lt;-<span class="st"> </span>value_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span>value_<span class="dv">2</span>                     <span class="co"># Do this first</span></span>
<span id="cb1024-3"><a href="writing-functions.html#cb1024-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)  <span class="co"># Then this</span></span>
<span id="cb1024-4"><a href="writing-functions.html#cb1024-4"></a>  result                                           <span class="co"># Then this</span></span>
<span id="cb1024-5"><a href="writing-functions.html#cb1024-5"></a>}</span></code></pre></div>
<p>Why did we type that third line of code? Afterall, that line of code isn’t <em>doing</em> anything. Well, let’s see what happens if we take it out:</p>
<div class="sourceCode" id="cb1025"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1025-1"><a href="writing-functions.html#cb1025-1"></a>is_match &lt;-<span class="st"> </span><span class="cf">function</span>(value_<span class="dv">1</span>, value_<span class="dv">2</span>) {</span>
<span id="cb1025-2"><a href="writing-functions.html#cb1025-2"></a>  result &lt;-<span class="st"> </span>value_<span class="dv">1</span> <span class="op">==</span><span class="st"> </span>value_<span class="dv">2</span> </span>
<span id="cb1025-3"><a href="writing-functions.html#cb1025-3"></a>  result &lt;-<span class="st"> </span><span class="kw">if_else</span>(<span class="kw">is.na</span>(result), <span class="ot">FALSE</span>, result)</span>
<span id="cb1025-4"><a href="writing-functions.html#cb1025-4"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1026"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1026-1"><a href="writing-functions.html#cb1026-1"></a><span class="kw">is_match</span>(<span class="st">&quot;Easton&quot;</span>, <span class="st">&quot;Easton&quot;</span>)</span></code></pre></div>
<p>It appears as though nothing happened! Did our function break?</p>
<p>Let’s think about with typically happens when we use R’s built-in functions. When we don’t <em>assign</em> the value returned by the function to an object, then the returned value is printed to the screen:</p>
<div class="sourceCode" id="cb1027"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1027-1"><a href="writing-functions.html#cb1027-1"></a><span class="kw">sum</span>(<span class="dv">1</span>, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>But, when we do assign the value returned by the function to an object, then nothing is printed to the screen:</p>
<div class="sourceCode" id="cb1029"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1029-1"><a href="writing-functions.html#cb1029-1"></a>x &lt;-<span class="st"> </span><span class="kw">sum</span>(<span class="dv">1</span>, <span class="dv">1</span>)</span></code></pre></div>
<p>The same thing is happening in our function above. The last line of our function body is assigning a value (i.e., <code>TRUE</code> or <code>FALSE</code>) to the variable <code>result</code>. Just like <code>x &lt;- sum(1, 1)</code> didn’t print to the screen, <code>result &lt;- if_else(is.na(result), FALSE, result)</code> doesn’t print to the screen when we run <code>is_match("Easton", "Easton")</code> using this version of <code>is_match()</code>.</p>
<p>However, we can see in the example below that result of the operations being executed inside the function body can still be assigned to an object in our global environment, and we can print the contents of that object to screen:</p>
<div class="sourceCode" id="cb1030"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1030-1"><a href="writing-functions.html#cb1030-1"></a>x &lt;-<span class="st"> </span><span class="kw">is_match</span>(<span class="st">&quot;Easton&quot;</span>, <span class="st">&quot;Easton&quot;</span>)</span>
<span id="cb1030-2"><a href="writing-functions.html#cb1030-2"></a>x</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>If all of that seems confusing, here is the bottom line. In general, it’s a best practice for your function to print its return value to the screen. You can do this in one of three ways:</p>
<p>1️⃣ The value that results from the code in the last line of the function body isn’t assigned to anything. We saw an example of this above with our <code>increment()</code> function:</p>
<div class="sourceCode" id="cb1032"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1032-1"><a href="writing-functions.html#cb1032-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1032-2"><a href="writing-functions.html#cb1032-2"></a>  x <span class="op">+</span><span class="st"> </span>by <span class="co"># Last line doesn&#39;t assign the value to an object</span></span>
<span id="cb1032-3"><a href="writing-functions.html#cb1032-3"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1033"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1033-1"><a href="writing-functions.html#cb1033-1"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>2️⃣ If you assign values to objects inside your function, then type the name of the object that contains the value you want your function to return on the last line of the function body. We saw an example of this with our <code>is_match()</code> function. We can also amend our <code>increment()</code> function follow this pattern:</p>
<div class="sourceCode" id="cb1035"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1035-1"><a href="writing-functions.html#cb1035-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1035-2"><a href="writing-functions.html#cb1035-2"></a>  out &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>by <span class="co"># Now we assign the value to an object</span></span>
<span id="cb1035-3"><a href="writing-functions.html#cb1035-3"></a>  out           <span class="co"># Type object name on last line of the function body </span></span>
<span id="cb1035-4"><a href="writing-functions.html#cb1035-4"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1036"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1036-1"><a href="writing-functions.html#cb1036-1"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>3️⃣ Use the <code>return()</code> function.</p>
<div class="sourceCode" id="cb1038"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1038-1"><a href="writing-functions.html#cb1038-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1038-2"><a href="writing-functions.html#cb1038-2"></a>  out &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>by </span>
<span id="cb1038-3"><a href="writing-functions.html#cb1038-3"></a>  <span class="kw">return</span>(out)   </span>
<span id="cb1038-4"><a href="writing-functions.html#cb1038-4"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1039"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1039-1"><a href="writing-functions.html#cb1039-1"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>So, which method <em>should</em> you use? Well, for all but the simplest functions (like the one above) method 1 is not considered good coding practice. Method 3 may seem like it’s the most explicit; however, it actually considered best practice to use the <code>return()</code> function only when you want your function to return its value before R reaches the last line of the function body. For example, let’s add another line of code to our function body that adds another <code>1</code> to the value of out:</p>
<div class="sourceCode" id="cb1041"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1041-1"><a href="writing-functions.html#cb1041-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1041-2"><a href="writing-functions.html#cb1041-2"></a>  out &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>by </span>
<span id="cb1041-3"><a href="writing-functions.html#cb1041-3"></a>  out &lt;-<span class="st"> </span>out <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co"># Adding an extra 1</span></span>
<span id="cb1041-4"><a href="writing-functions.html#cb1041-4"></a>  <span class="kw">return</span>(out)    <span class="co"># Return still in the last line</span></span>
<span id="cb1041-5"><a href="writing-functions.html#cb1041-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1042"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1042-1"><a href="writing-functions.html#cb1042-1"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Now, let’s move <code>return(out)</code> to the second line of the function body – above the line of code that adds an additional <code>1</code> to the value of <code>out</code>:</p>
<div class="sourceCode" id="cb1044"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1044-1"><a href="writing-functions.html#cb1044-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1044-2"><a href="writing-functions.html#cb1044-2"></a>  out &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>by </span>
<span id="cb1044-3"><a href="writing-functions.html#cb1044-3"></a>  <span class="kw">return</span>(out)    <span class="co"># Return in the second line above adding an extra 1</span></span>
<span id="cb1044-4"><a href="writing-functions.html#cb1044-4"></a>  out &lt;-<span class="st"> </span>out <span class="op">+</span><span class="st"> </span><span class="dv">1</span> <span class="co"># Adding an extra 1</span></span>
<span id="cb1044-5"><a href="writing-functions.html#cb1044-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1045"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1045-1"><a href="writing-functions.html#cb1045-1"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>In the example above, the last <code>1</code> wasn’t added to the value of <code>out</code> because we used the <code>return()</code> function. Said another way, <code>increment()</code> returned the value of <code>out</code> “early”, and the last line of the function body was never executed.</p>
<p>In the example above, using the <code>return()</code> function in the way that we did obviously makes no sense. I was just meant to illustrate what the <code>return()</code> function <em>can</em> do. The <code>return()</code> function doesn’t actually become useful until we start writing more complex functions. But, because the <code>return()</code> function has the special ability to end the execution of the function body early, it’s considered a best practice to only it for that purpose.</p>
<p>Therefore, in most situations, you will want to use method 2 (i.e., object name on last line) when writing your own functions.</p>
<p>One final note before we move on to the next section. Notice that we never used the <code>print()</code> function on the last line of our code. This was intentional. Using <code>print()</code> will give you the result you expect when you don’t assign the value that your function returns to an object in your global environment:</p>
<div class="sourceCode" id="cb1047"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1047-1"><a href="writing-functions.html#cb1047-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1047-2"><a href="writing-functions.html#cb1047-2"></a>  out &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>by </span>
<span id="cb1047-3"><a href="writing-functions.html#cb1047-3"></a>  <span class="kw">print</span>(out)   </span>
<span id="cb1047-4"><a href="writing-functions.html#cb1047-4"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1048"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1048-1"><a href="writing-functions.html#cb1048-1"></a><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>But, it will not give you the result you want if you do assign the value that your function returns to an object in your global environment:</p>
<div class="sourceCode" id="cb1050"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1050-1"><a href="writing-functions.html#cb1050-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1050-2"><a href="writing-functions.html#cb1050-2"></a>  out &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>by </span>
<span id="cb1050-3"><a href="writing-functions.html#cb1050-3"></a>  <span class="kw">print</span>(out)   </span>
<span id="cb1050-4"><a href="writing-functions.html#cb1050-4"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1051"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1051-1"><a href="writing-functions.html#cb1051-1"></a>x &lt;-<span class="st"> </span><span class="kw">increment</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb1053"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1053-1"><a href="writing-functions.html#cb1053-1"></a>x</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
</div>
<div id="lexical-scoping-and-functions" class="section level2" number="33.5">
<h2><span class="header-section-number">33.5</span> Lexical scoping and functions</h2>
<p>If you have been following along with the code above on your computer, you may have noticed that the objects we create inside our functions do not appear in our global environment. If you haven’t been following along, you may want to jump on your computer really quickly for this section (or just take my word for it).</p>
<p>The reason the objects we created inside our functions do not appear in our global environment is that R actually has <em>multiple</em> environments were objects can live. Additionally, R uses something called <strong>lexical scoping rules</strong> to look for the objects you refer to in your R code. The vast majority of the time, we won’t need to concern ourselves much with any of these other environments or the lexical scoping rules. However, function writing does require us to have some minimal understanding of these concepts. At the very least, you should be aware of the following when writing your own functions:</p>
<p>1️⃣ Objects we create inside of functions don’t live in our global environment and we can’t do anything with them outside of the function we created them in.</p>
<p>In the example below, we create an object named <code>out</code> inside of the <code>increment()</code> function:</p>
<div class="sourceCode" id="cb1055"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1055-1"><a href="writing-functions.html#cb1055-1"></a>increment &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">by =</span> <span class="dv">1</span>) {</span>
<span id="cb1055-2"><a href="writing-functions.html#cb1055-2"></a>  out &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>by <span class="co"># Assign the value to the out object inside the function</span></span>
<span id="cb1055-3"><a href="writing-functions.html#cb1055-3"></a>  out           </span>
<span id="cb1055-4"><a href="writing-functions.html#cb1055-4"></a>}</span></code></pre></div>
<p>We then use the function:</p>
<div class="sourceCode" id="cb1056"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1056-1"><a href="writing-functions.html#cb1056-1"></a>x &lt;-<span class="st"> </span><span class="kw">increment</span>(<span class="dv">2</span>)</span>
<span id="cb1056-2"><a href="writing-functions.html#cb1056-2"></a>x</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>However, the <code>out</code> object is not available to us:</p>
<div class="sourceCode" id="cb1058"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1058-1"><a href="writing-functions.html#cb1058-1"></a>out</span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;out&#39; not found</code></pre>
<p>2️⃣ If the function we write can’t find the object it’s looking for inside the function body, then it will try to find it in the global environment.</p>
<p>For example, let’s create a new function named <code>add</code> that adds the values of <code>x</code> and <code>y</code> together in its function body. Notice, however, that there is no <code>y</code> argument to pass a value to, and that <code>y</code> is never assigned a value inside of the <code>add()</code> function:</p>
<div class="sourceCode" id="cb1060"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1060-1"><a href="writing-functions.html#cb1060-1"></a>add &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb1060-2"><a href="writing-functions.html#cb1060-2"></a>  x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb1060-3"><a href="writing-functions.html#cb1060-3"></a>}</span></code></pre></div>
<p>When we call the function:</p>
<div class="sourceCode" id="cb1061"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1061-1"><a href="writing-functions.html#cb1061-1"></a><span class="kw">add</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Error in add(2): object &#39;y&#39; not found</code></pre>
<p>We get an error. R can’t find the object <code>y</code>. Now let’s create a <code>y</code> object in our global environment:</p>
<div class="sourceCode" id="cb1063"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1063-1"><a href="writing-functions.html#cb1063-1"></a>y &lt;-<span class="st"> </span><span class="dv">100</span></span></code></pre></div>
<p>And call the <code>add()</code> function again:</p>
<div class="sourceCode" id="cb1064"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1064-1"><a href="writing-functions.html#cb1064-1"></a><span class="kw">add</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 102</code></pre>
<p>As you can see, R wasn’t able to find a value for <code>y</code> <em>inside</em> of the function body so it looked <em>outside</em> of the function in the global environment. This is definitely something to be aware of, but usually isn’t an actual problem.</p>
<p>For starters, I can’t think of a good reason to add a variable to your function body without assigning it a value inside the function body or matching it to a function argument. In other words, there’s generally no good reason to have variables that serve no purpose floating around inside your functions.</p>
<p>If you do assign it a value inside the function, then R will not look outside of the function for a value:</p>
<div class="sourceCode" id="cb1066"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1066-1"><a href="writing-functions.html#cb1066-1"></a>add &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</span>
<span id="cb1066-2"><a href="writing-functions.html#cb1066-2"></a>  y &lt;-<span class="st"> </span><span class="dv">1</span></span>
<span id="cb1066-3"><a href="writing-functions.html#cb1066-3"></a>  x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb1066-4"><a href="writing-functions.html#cb1066-4"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1067"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1067-1"><a href="writing-functions.html#cb1067-1"></a>y &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb1067-2"><a href="writing-functions.html#cb1067-2"></a><span class="kw">add</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p>Likewise, if you create the function with a matching argument, then R will not look outside of the function for a value:</p>
<div class="sourceCode" id="cb1069"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1069-1"><a href="writing-functions.html#cb1069-1"></a>add &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</span>
<span id="cb1069-2"><a href="writing-functions.html#cb1069-2"></a>  x <span class="op">+</span><span class="st"> </span>y</span>
<span id="cb1069-3"><a href="writing-functions.html#cb1069-3"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1070"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1070-1"><a href="writing-functions.html#cb1070-1"></a>y &lt;-<span class="st"> </span><span class="dv">100</span></span>
<span id="cb1070-2"><a href="writing-functions.html#cb1070-2"></a><span class="kw">add</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## Error in add(2): argument &quot;y&quot; is missing, with no default</code></pre>
<p>Again, this aspect of the lexical scoping rules is something to be aware of, but generally isn’t a problem in practice.</p>
</div>
<div id="tidy-evaluation-1" class="section level2" number="33.6">
<h2><span class="header-section-number">33.6</span> Tidy evaluation</h2>
<p>Now that you have all the basics of function writing under your belt, let’s take look at what happens when we try to write functions that use <code>tidyverse</code> package functions in the function body.</p>
<p>For this section, let’s return to our study data we used for the first example in this chapter. As a reminder, here’s what the data looks like:</p>
<div class="sourceCode" id="cb1072"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1072-1"><a href="writing-functions.html#cb1072-1"></a>study</span></code></pre></div>
<pre><code>## # A tibble: 68 x 7
##      age age_group       gender ht_in wt_lbs   bmi bmi_3cat  
##    &lt;dbl&gt; &lt;fct&gt;           &lt;fct&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;     
##  1    32 30 and Older    Male      70    216  31.0 Obese     
##  2    30 30 and Older    Female    63    106  18.8 Normal    
##  3    32 30 and Older    Female    62    145  26.5 Overweight
##  4    29 Younger than 30 Male      67    195  30.5 Obese     
##  5    24 Younger than 30 Female    67    143  22.4 Normal    
##  6    38 30 and Older    Female    58    125  26.1 Overweight
##  7    25 Younger than 30 Female    64    138  23.7 Normal    
##  8    24 Younger than 30 Male      69    140  20.7 Normal    
##  9    48 30 and Older    Male      65    158  26.3 Overweight
## 10    29 Younger than 30 Male      68    167  25.4 Overweight
## # … with 58 more rows</code></pre>
<p>We already calculated the number of missing values, mean, median, min, and max for all of the continuous variables. So, let’s go ahead and calculate the number and percent of observations for each level of our categorical variables.</p>
<p>We know that we have 3 categorical variables (i.e., <code>age_group</code>, <code>gender</code>, and <code>bmi_3cat</code>), and we know that we want to perform the same calculation on all of them. So, we decide to write our own function. Following the workflow we discussed earlier, our next step is to make the code work for one specific case:</p>
<div class="sourceCode" id="cb1074"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1074-1"><a href="writing-functions.html#cb1074-1"></a>study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1074-2"><a href="writing-functions.html#cb1074-2"></a><span class="st">  </span><span class="kw">count</span>(age_group) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1074-3"><a href="writing-functions.html#cb1074-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">percent =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   age_group           n percent
##   &lt;fct&gt;           &lt;int&gt;   &lt;dbl&gt;
## 1 Younger than 30    56   82.4 
## 2 30 and Older       11   16.2 
## 3 &lt;NA&gt;                1    1.47</code></pre>
<p>Great! Thanks to <code>dplyr</code>, we have the result we were looking for! The next step in the workflow is to make our solution into a function. Let’s copy and paste our solution into a function skeleton like we did before:</p>
<div class="sourceCode" id="cb1076"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1076-1"><a href="writing-functions.html#cb1076-1"></a>cat_stats &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb1076-2"><a href="writing-functions.html#cb1076-2"></a>  study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1076-3"><a href="writing-functions.html#cb1076-3"></a><span class="st">    </span><span class="kw">count</span>(age_group) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1076-4"><a href="writing-functions.html#cb1076-4"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">percent =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span>
<span id="cb1076-5"><a href="writing-functions.html#cb1076-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1077"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1077-1"><a href="writing-functions.html#cb1077-1"></a><span class="kw">cat_stats</span>()</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   age_group           n percent
##   &lt;fct&gt;           &lt;int&gt;   &lt;dbl&gt;
## 1 Younger than 30    56   82.4 
## 2 30 and Older       11   16.2 
## 3 &lt;NA&gt;                1    1.47</code></pre>
<p>So far, so good! Now, let’s replace <code>age_group</code> with <code>var</code> in the function body to generalize our function:</p>
<div class="sourceCode" id="cb1079"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1079-1"><a href="writing-functions.html#cb1079-1"></a>cat_stats &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb1079-2"><a href="writing-functions.html#cb1079-2"></a>  study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1079-3"><a href="writing-functions.html#cb1079-3"></a><span class="st">    </span><span class="kw">count</span>(var) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1079-4"><a href="writing-functions.html#cb1079-4"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">percent =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span>
<span id="cb1079-5"><a href="writing-functions.html#cb1079-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1080"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1080-1"><a href="writing-functions.html#cb1080-1"></a><span class="kw">cat_stats</span>(age_group)</span></code></pre></div>
<pre><code>## Error: Must group by variables found in `.data`.
## * Column `var` is not found.</code></pre>
<p>Unfortunately, this doesn’t work. As I said in the introduction to this part of the book, non-standard evaluation prevents us from using <code>dplyr</code> and other <code>tidyverse</code> packages inside of our functions in the same way that we might use other functions. Fortunately, the fix for this is pretty easy. All we need to do is <strong>embrace</strong> (i.e., wrap) the <code>var</code> variable with double curly braces:</p>
<div class="sourceCode" id="cb1082"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1082-1"><a href="writing-functions.html#cb1082-1"></a>cat_stats &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb1082-2"><a href="writing-functions.html#cb1082-2"></a>  study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1082-3"><a href="writing-functions.html#cb1082-3"></a><span class="st">    </span><span class="kw">count</span>({{ var }}) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1082-4"><a href="writing-functions.html#cb1082-4"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">percent =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span>
<span id="cb1082-5"><a href="writing-functions.html#cb1082-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1083"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1083-1"><a href="writing-functions.html#cb1083-1"></a><span class="kw">cat_stats</span>(age_group)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   age_group           n percent
##   &lt;fct&gt;           &lt;int&gt;   &lt;dbl&gt;
## 1 Younger than 30    56   82.4 
## 2 30 and Older       11   16.2 
## 3 &lt;NA&gt;                1    1.47</code></pre>
<p>Now, we can use our new function on the rest of our categorical variables:</p>
<div class="sourceCode" id="cb1085"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1085-1"><a href="writing-functions.html#cb1085-1"></a><span class="kw">cat_stats</span>(gender)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   gender     n percent
##   &lt;fct&gt;  &lt;int&gt;   &lt;dbl&gt;
## 1 Female    43   63.2 
## 2 Male      24   35.3 
## 3 &lt;NA&gt;       1    1.47</code></pre>
<div class="sourceCode" id="cb1087"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1087-1"><a href="writing-functions.html#cb1087-1"></a><span class="kw">cat_stats</span>(bmi_3cat)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   bmi_3cat       n percent
##   &lt;fct&gt;      &lt;int&gt;   &lt;dbl&gt;
## 1 Normal        43   63.2 
## 2 Overweight    16   23.5 
## 3 Obese          5    7.35
## 4 &lt;NA&gt;           4    5.88</code></pre>
<p>This is working beautifully! However, we should probably make one final adjustment to our <code>cat_stats()</code> function. Let’s say that we had another data frame with categorical variable we wanted to analyze:</p>
<div class="sourceCode" id="cb1089"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1089-1"><a href="writing-functions.html#cb1089-1"></a>other_study &lt;-<span class="st"> </span><span class="kw">tibble</span>(</span>
<span id="cb1089-2"><a href="writing-functions.html#cb1089-2"></a>  <span class="dt">id =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>,</span>
<span id="cb1089-3"><a href="writing-functions.html#cb1089-3"></a>  <span class="dt">age_group =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;Younger&quot;</span>, <span class="dv">9</span>), <span class="st">&quot;Older&quot;</span>),</span>
<span id="cb1089-4"><a href="writing-functions.html#cb1089-4"></a>) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1089-5"><a href="writing-functions.html#cb1089-5"></a><span class="st">  </span><span class="kw">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##       id age_group
##    &lt;int&gt; &lt;chr&gt;    
##  1     1 Younger  
##  2     2 Younger  
##  3     3 Younger  
##  4     4 Younger  
##  5     5 Younger  
##  6     6 Younger  
##  7     7 Younger  
##  8     8 Younger  
##  9     9 Younger  
## 10    10 Older</code></pre>
<p>Now, let’s pass age_group to our <code>cat_stats()</code> function:</p>
<div class="sourceCode" id="cb1091"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1091-1"><a href="writing-functions.html#cb1091-1"></a><span class="kw">cat_stats</span>(age_group)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   age_group           n percent
##   &lt;fct&gt;           &lt;int&gt;   &lt;dbl&gt;
## 1 Younger than 30    56   82.4 
## 2 30 and Older       11   16.2 
## 3 &lt;NA&gt;                1    1.47</code></pre>
<p>Is that the result you expected? I hope not! That’s the same result we got from the original study data. Have you figured out why this happened? Take another look at our function definition:</p>
<div class="sourceCode" id="cb1093"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1093-1"><a href="writing-functions.html#cb1093-1"></a>cat_stats &lt;-<span class="st"> </span><span class="cf">function</span>(var) {</span>
<span id="cb1093-2"><a href="writing-functions.html#cb1093-2"></a>  study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1093-3"><a href="writing-functions.html#cb1093-3"></a><span class="st">    </span><span class="kw">count</span>({{ var }}) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1093-4"><a href="writing-functions.html#cb1093-4"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">percent =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span>
<span id="cb1093-5"><a href="writing-functions.html#cb1093-5"></a>}</span></code></pre></div>
<p>We have the <code>study</code> data frame hard coded into the first line of the function body. In the same way we need a matching argument-variable pair to pass multiple different columns into our function, we need a matching argument-variable pair to pass multiple different data frames into our function. We start by adding an argument to accept the data frame:</p>
<div class="sourceCode" id="cb1094"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1094-1"><a href="writing-functions.html#cb1094-1"></a>cat_stats &lt;-<span class="st"> </span><span class="cf">function</span>(data, var) {</span>
<span id="cb1094-2"><a href="writing-functions.html#cb1094-2"></a>  study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1094-3"><a href="writing-functions.html#cb1094-3"></a><span class="st">    </span><span class="kw">count</span>({{ var }}) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1094-4"><a href="writing-functions.html#cb1094-4"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">percent =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span>
<span id="cb1094-5"><a href="writing-functions.html#cb1094-5"></a>}</span></code></pre></div>
<p>Again, we could name this argument almost anything, but <code>data</code> seems like a reasonable choice. Then, we replace <code>study</code> with <code>data</code> in the function body to generalize our function:</p>
<div class="sourceCode" id="cb1095"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1095-1"><a href="writing-functions.html#cb1095-1"></a>cat_stats &lt;-<span class="st"> </span><span class="cf">function</span>(data, var) {</span>
<span id="cb1095-2"><a href="writing-functions.html#cb1095-2"></a>  {{data}} <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1095-3"><a href="writing-functions.html#cb1095-3"></a><span class="st">    </span><span class="kw">count</span>({{ var }}) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1095-4"><a href="writing-functions.html#cb1095-4"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">percent =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span>
<span id="cb1095-5"><a href="writing-functions.html#cb1095-5"></a>}</span></code></pre></div>
<p>And now we can use our <code>cat_stats()</code> function on any data frame – including the <code>other_study</code> data frame we created above:</p>
<div class="sourceCode" id="cb1096"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1096-1"><a href="writing-functions.html#cb1096-1"></a><span class="kw">cat_stats</span>(other_study, age_group)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   age_group     n percent
##   &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;
## 1 Older         1      10
## 2 Younger       9      90</code></pre>
<p>We can even use it with a pipe:</p>
<div class="sourceCode" id="cb1098"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1098-1"><a href="writing-functions.html#cb1098-1"></a>other_study <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1098-2"><a href="writing-functions.html#cb1098-2"></a><span class="st">  </span><span class="kw">cat_stats</span>(age_group)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   age_group     n percent
##   &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;
## 1 Older         1      10
## 2 Younger       9      90</code></pre>
<p>Some of you may be wondering why we didn’t have to wrap <code>data</code> with double curly braces in the code above. Remember, we only have to use the curly braces with column names because of non-standard evaluation. More specifically, because of one aspect of non-standard evaluation called data masking. Data masking is what lets us refer to a column in a data frame without using dollar sign or bracket notation. For example, <code>age_group</code> doesn’t exist in our global environment as a standalone object:</p>
<div class="sourceCode" id="cb1100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1100-1"><a href="writing-functions.html#cb1100-1"></a>age_group</span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;age_group&#39; not found</code></pre>
<p>It only exists as a part of (i.e. column in) the <code>other_study</code> object:</p>
<div class="sourceCode" id="cb1102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1102-1"><a href="writing-functions.html#cb1102-1"></a>other_study<span class="op">$</span>age_group</span></code></pre></div>
<pre><code>##  [1] &quot;Younger&quot; &quot;Younger&quot; &quot;Younger&quot; &quot;Younger&quot; &quot;Younger&quot; &quot;Younger&quot; &quot;Younger&quot;
##  [8] &quot;Younger&quot; &quot;Younger&quot; &quot;Older&quot;</code></pre>
<p>But the data frames themselves are not data masked. They do exist as standalone objects in our global environment:</p>
<div class="sourceCode" id="cb1104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1104-1"><a href="writing-functions.html#cb1104-1"></a>other_study</span></code></pre></div>
<pre><code>## # A tibble: 10 x 2
##       id age_group
##    &lt;int&gt; &lt;chr&gt;    
##  1     1 Younger  
##  2     2 Younger  
##  3     3 Younger  
##  4     4 Younger  
##  5     5 Younger  
##  6     6 Younger  
##  7     7 Younger  
##  8     8 Younger  
##  9     9 Younger  
## 10    10 Older</code></pre>
<p>Therefore, there is no need to wrap them with double curly braces. Having said that, it doesn’t appear as though doing so will hurt anything:</p>
<div class="sourceCode" id="cb1106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1106-1"><a href="writing-functions.html#cb1106-1"></a>cat_stats &lt;-<span class="st"> </span><span class="cf">function</span>(data, var) {</span>
<span id="cb1106-2"><a href="writing-functions.html#cb1106-2"></a>  {{data}} <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1106-3"><a href="writing-functions.html#cb1106-3"></a><span class="st">    </span><span class="kw">count</span>({{ var }}) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb1106-4"><a href="writing-functions.html#cb1106-4"></a><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">percent =</span> n <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(n) <span class="op">*</span><span class="st"> </span><span class="dv">100</span>)</span>
<span id="cb1106-5"><a href="writing-functions.html#cb1106-5"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb1107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1107-1"><a href="writing-functions.html#cb1107-1"></a><span class="kw">cat_stats</span>(other_study, age_group)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   age_group     n percent
##   &lt;chr&gt;     &lt;int&gt;   &lt;dbl&gt;
## 1 Older         1      10
## 2 Younger       9      90</code></pre>
<p>That pretty much wraps up this chapter on the basics of writing function to reduce unnecessary repetition in your R code. If you’re feeling good about writing your own functions, great! If you want to dig even deeper, take a look at the <a href="https://adv-r.hadley.nz/functions.html">functions chapter of the Advanced R book</a>.</p>
<p>If you’re still feeling a little apprehensive or confused, don’t feel bad. It takes most people (myself included) awhile to get comfortable with writing functions. Just remember, functions <em>can</em> be complicated, but they don’t <em>have</em> to be. Even very simple functions can sometimes be useful. So, start simple and get more complex as your skills and confidence grow.</p>
<p>If you find that you’ve written a function that is really useful, consider saving it for use again in the future. Early on, I would just save my functions as R scripts in a folder on my computer. I could then copy and paste those functions from the scripts into my R programs as needed. Then, I learned about the <code>source()</code> function, which allowed me to use my saved functions without having to manually copy and paste them. Eventually, I learned how to make my <a href="http://r-pkgs.had.co.nz/">own packages</a> that contained groups of related functions and save them to my <a href="https://github.com/">Github account</a>. From there, I could use my functions on any computer, and even share them with others. Finally, in 2020, I published my first package on <a href="https://cran.r-project.org/">CRAN</a>. Publishing your packages on CRAN allows you to share your functions with a much broader audience.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-Grolemund2017-qp">
<p>2. Grolemund G, Wickham H. <em>R for Data Science</em>.; 2017.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction-to-repeated-operations.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="column-wise-operations-in-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
