<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>35 Column-wise operations in dplyr | R for Epidemiology</title>
  <meta name="description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="35 Column-wise operations in dplyr | R for Epidemiology" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://brad-cannell.github.io/r4epi/" />
  <meta property="og:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />
  <meta property="og:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="github-repo" content="brad-cannell/r4epi" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="35 Column-wise operations in dplyr | R for Epidemiology" />
  
  <meta name="twitter:description" content="This is the textbook for Brad Cannell’s Introduction to R Programming for Epidemiologic Research course." />
  <meta name="twitter:image" content="https://brad-cannell.github.io/r4epi/r4epi_icon.png" />

<meta name="author" content="Brad Cannell" />


<meta name="date" content="2022-04-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="writing-functions.html"/>
<link rel="next" href="writing-for-loops.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.20/datatables.js"></script>
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.11.3/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.11.3/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0RREBTQ0D9"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0RREBTQ0D9');
</script>
<!-- R4Epi Favicons -->
<!-- https://bookdown.org/yihui/rmarkdown-cookbook/favicon.html -->
<!-- Also using Favicon Generator (https://realfavicongenerator.net) -->
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R for Epidemiology</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#goals"><i class="fa fa-check"></i>Goals</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#text-conventions-used-in-this-book"><i class="fa fa-check"></i>Text conventions used in this book</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#other-reading"><i class="fa fa-check"></i>Other reading</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="contributing-to-r4epi.html"><a href="contributing-to-r4epi.html"><i class="fa fa-check"></i>Contributing to R4Epi</a>
<ul>
<li class="chapter" data-level="" data-path="contributing-to-r4epi.html"><a href="contributing-to-r4epi.html#typos"><i class="fa fa-check"></i>Typos</a></li>
<li class="chapter" data-level="" data-path="contributing-to-r4epi.html"><a href="contributing-to-r4epi.html#issues"><i class="fa fa-check"></i>Issues</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html"><i class="fa fa-check"></i>About the Authors</a>
<ul>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html#brad-cannell"><i class="fa fa-check"></i>Brad Cannell</a></li>
<li class="chapter" data-level="" data-path="about-the-authors.html"><a href="about-the-authors.html#melvin-livingston"><i class="fa fa-check"></i>Melvin Livingston</a></li>
</ul></li>
<li class="part"><span><b>I Getting Started</b></span></li>
<li class="chapter" data-level="1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> Installing R and RStudio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-mac"><i class="fa fa-check"></i><b>1.1</b> Download and install on a Mac</a></li>
<li class="chapter" data-level="1.2" data-path="installing-r-and-rstudio.html"><a href="installing-r-and-rstudio.html#download-and-install-on-a-pc"><i class="fa fa-check"></i><b>1.2</b> Download and install on a PC</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="what-is-r.html"><a href="what-is-r.html"><i class="fa fa-check"></i><b>2</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="what-is-r.html"><a href="what-is-r.html#what-is-data"><i class="fa fa-check"></i><b>2.1</b> What is data?</a></li>
<li class="chapter" data-level="2.2" data-path="what-is-r.html"><a href="what-is-r.html#what-is-r-1"><i class="fa fa-check"></i><b>2.2</b> What is R?</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="what-is-r.html"><a href="what-is-r.html#transferring-data"><i class="fa fa-check"></i><b>2.2.1</b> Transferring data</a></li>
<li class="chapter" data-level="2.2.2" data-path="what-is-r.html"><a href="what-is-r.html#managing-data"><i class="fa fa-check"></i><b>2.2.2</b> Managing data</a></li>
<li class="chapter" data-level="2.2.3" data-path="what-is-r.html"><a href="what-is-r.html#analyzing-data"><i class="fa fa-check"></i><b>2.2.3</b> Analyzing data</a></li>
<li class="chapter" data-level="2.2.4" data-path="what-is-r.html"><a href="what-is-r.html#presenting-data"><i class="fa fa-check"></i><b>2.2.4</b> Presenting data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html"><i class="fa fa-check"></i><b>3</b> Navigating the RStudio interface</a>
<ul>
<li class="chapter" data-level="3.1" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-console"><i class="fa fa-check"></i><b>3.1</b> The console</a></li>
<li class="chapter" data-level="3.2" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-environment-pane"><i class="fa fa-check"></i><b>3.2</b> The environment pane</a></li>
<li class="chapter" data-level="3.3" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-files-pane"><i class="fa fa-check"></i><b>3.3</b> The files pane</a></li>
<li class="chapter" data-level="3.4" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#the-source-pane"><i class="fa fa-check"></i><b>3.4</b> The source pane</a></li>
<li class="chapter" data-level="3.5" data-path="navigating-the-rstudio-interface.html"><a href="navigating-the-rstudio-interface.html#rstudio-preferences"><i class="fa fa-check"></i><b>3.5</b> RStudio preferences</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html"><i class="fa fa-check"></i><b>4</b> Speaking R’s language</a>
<ul>
<li class="chapter" data-level="4.1" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#r-is-a-language"><i class="fa fa-check"></i><b>4.1</b> R is a <em>language</em></a></li>
<li class="chapter" data-level="4.2" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#the-r-interpreter"><i class="fa fa-check"></i><b>4.2</b> The R interpreter</a></li>
<li class="chapter" data-level="4.3" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#errors"><i class="fa fa-check"></i><b>4.3</b> Errors</a></li>
<li class="chapter" data-level="4.4" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#functions"><i class="fa fa-check"></i><b>4.4</b> Functions</a></li>
<li class="chapter" data-level="4.5" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#objects"><i class="fa fa-check"></i><b>4.5</b> Objects</a></li>
<li class="chapter" data-level="4.6" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#comments"><i class="fa fa-check"></i><b>4.6</b> Comments</a></li>
<li class="chapter" data-level="4.7" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#packages"><i class="fa fa-check"></i><b>4.7</b> Packages</a></li>
<li class="chapter" data-level="4.8" data-path="speaking-rs-language.html"><a href="speaking-rs-language.html#programming-style"><i class="fa fa-check"></i><b>4.8</b> Programming style</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lets-get-programming.html"><a href="lets-get-programming.html"><i class="fa fa-check"></i><b>5</b> Let’s get programming</a>
<ul>
<li class="chapter" data-level="5.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#simulating-data"><i class="fa fa-check"></i><b>5.1</b> Simulating data</a></li>
<li class="chapter" data-level="5.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vectors"><i class="fa fa-check"></i><b>5.2</b> Vectors</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#vector-types"><i class="fa fa-check"></i><b>5.2.1</b> Vector types</a></li>
<li class="chapter" data-level="5.2.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#double-vectors"><i class="fa fa-check"></i><b>5.2.2</b> Double vectors</a></li>
<li class="chapter" data-level="5.2.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#integer-vectors"><i class="fa fa-check"></i><b>5.2.3</b> Integer vectors</a></li>
<li class="chapter" data-level="5.2.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#logical-vectors"><i class="fa fa-check"></i><b>5.2.4</b> Logical vectors</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#data-frames"><i class="fa fa-check"></i><b>5.3</b> Data frames</a></li>
<li class="chapter" data-level="5.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#tibbles"><i class="fa fa-check"></i><b>5.4</b> Tibbles</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-as_tibble-function"><i class="fa fa-check"></i><b>5.4.1</b> The as_tibble function</a></li>
<li class="chapter" data-level="5.4.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tibble-function"><i class="fa fa-check"></i><b>5.4.2</b> The tibble function</a></li>
<li class="chapter" data-level="5.4.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-tribble-function"><i class="fa fa-check"></i><b>5.4.3</b> The tribble function</a></li>
<li class="chapter" data-level="5.4.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#why-use-tibbles"><i class="fa fa-check"></i><b>5.4.4</b> Why use tibbles</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#missing-data"><i class="fa fa-check"></i><b>5.5</b> Missing data</a></li>
<li class="chapter" data-level="5.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#our-first-analysis"><i class="fa fa-check"></i><b>5.6</b> Our first analysis</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="lets-get-programming.html"><a href="lets-get-programming.html#manual-calculation-of-the-mean"><i class="fa fa-check"></i><b>5.6.1</b> Manual calculation of the mean</a></li>
<li class="chapter" data-level="5.6.2" data-path="lets-get-programming.html"><a href="lets-get-programming.html#dollar-sign-notation"><i class="fa fa-check"></i><b>5.6.2</b> Dollar sign notation</a></li>
<li class="chapter" data-level="5.6.3" data-path="lets-get-programming.html"><a href="lets-get-programming.html#bracket-notation"><i class="fa fa-check"></i><b>5.6.3</b> Bracket notation</a></li>
<li class="chapter" data-level="5.6.4" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-sum-function"><i class="fa fa-check"></i><b>5.6.4</b> The sum function</a></li>
<li class="chapter" data-level="5.6.5" data-path="lets-get-programming.html"><a href="lets-get-programming.html#nesting-functions"><i class="fa fa-check"></i><b>5.6.5</b> Nesting functions</a></li>
<li class="chapter" data-level="5.6.6" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-length-function"><i class="fa fa-check"></i><b>5.6.6</b> The length function</a></li>
<li class="chapter" data-level="5.6.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#the-mean-function"><i class="fa fa-check"></i><b>5.6.7</b> The mean function</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="lets-get-programming.html"><a href="lets-get-programming.html#some-common-errors"><i class="fa fa-check"></i><b>5.7</b> Some common errors</a></li>
<li class="chapter" data-level="5.8" data-path="lets-get-programming.html"><a href="lets-get-programming.html#summary"><i class="fa fa-check"></i><b>5.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="asking-questions.html"><a href="asking-questions.html"><i class="fa fa-check"></i><b>6</b> Asking questions</a>
<ul>
<li class="chapter" data-level="6.1" data-path="asking-questions.html"><a href="asking-questions.html#when-should-we-seek-help"><i class="fa fa-check"></i><b>6.1</b> When should we seek help?</a></li>
<li class="chapter" data-level="6.2" data-path="asking-questions.html"><a href="asking-questions.html#where-should-we-seek-help"><i class="fa fa-check"></i><b>6.2</b> Where should we seek help?</a></li>
<li class="chapter" data-level="6.3" data-path="asking-questions.html"><a href="asking-questions.html#how-should-we-seek-help"><i class="fa fa-check"></i><b>6.3</b> How should we seek help?</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="asking-questions.html"><a href="asking-questions.html#creating-a-post-on-stack-overflow"><i class="fa fa-check"></i><b>6.3.1</b> Creating a post on Stack Overflow</a></li>
<li class="chapter" data-level="6.3.2" data-path="asking-questions.html"><a href="asking-questions.html#creating-better-posts-and-asking-better-questions"><i class="fa fa-check"></i><b>6.3.2</b> Creating better posts and asking better questions</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="asking-questions.html"><a href="asking-questions.html#helping-others"><i class="fa fa-check"></i><b>6.4</b> Helping others</a></li>
<li class="chapter" data-level="6.5" data-path="asking-questions.html"><a href="asking-questions.html#summary-1"><i class="fa fa-check"></i><b>6.5</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>II Coding Tools and Best Practices</b></span></li>
<li class="chapter" data-level="7" data-path="r-scripts.html"><a href="r-scripts.html"><i class="fa fa-check"></i><b>7</b> R scripts</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-scripts.html"><a href="r-scripts.html#creating-r-scripts"><i class="fa fa-check"></i><b>7.1</b> Creating R scripts</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>8</b> R markdown</a>
<ul>
<li class="chapter" data-level="8.1" data-path="r-markdown.html"><a href="r-markdown.html#what-is-r-markdown"><i class="fa fa-check"></i><b>8.1</b> What is R markdown?</a></li>
<li class="chapter" data-level="8.2" data-path="r-markdown.html"><a href="r-markdown.html#why-use-r-markdown"><i class="fa fa-check"></i><b>8.2</b> Why use R markdown?</a></li>
<li class="chapter" data-level="8.3" data-path="r-markdown.html"><a href="r-markdown.html#create-an-r-notebook"><i class="fa fa-check"></i><b>8.3</b> Create an R Notebook</a></li>
<li class="chapter" data-level="8.4" data-path="r-markdown.html"><a href="r-markdown.html#yaml-headers"><i class="fa fa-check"></i><b>8.4</b> YAML headers</a></li>
<li class="chapter" data-level="8.5" data-path="r-markdown.html"><a href="r-markdown.html#r-code-chunks"><i class="fa fa-check"></i><b>8.5</b> R code chunks</a></li>
<li class="chapter" data-level="8.6" data-path="r-markdown.html"><a href="r-markdown.html#markdown"><i class="fa fa-check"></i><b>8.6</b> Markdown</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="r-projects.html"><a href="r-projects.html"><i class="fa fa-check"></i><b>9</b> R projects</a></li>
<li class="chapter" data-level="10" data-path="coding-best-practices.html"><a href="coding-best-practices.html"><i class="fa fa-check"></i><b>10</b> Coding best practices</a>
<ul>
<li class="chapter" data-level="10.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#general-principles"><i class="fa fa-check"></i><b>10.1</b> General principles</a></li>
<li class="chapter" data-level="10.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#code-comments"><i class="fa fa-check"></i><b>10.2</b> Code comments</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#defining-key-variables"><i class="fa fa-check"></i><b>10.2.1</b> Defining key variables</a></li>
<li class="chapter" data-level="10.2.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#what-this-code-is-trying-to-accomplish"><i class="fa fa-check"></i><b>10.2.2</b> What this code is trying to accomplish</a></li>
<li class="chapter" data-level="10.2.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#why-i-chose-this-particular-strategy"><i class="fa fa-check"></i><b>10.2.3</b> Why I chose this particular strategy</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#style-guidelines"><i class="fa fa-check"></i><b>10.3</b> Style guidelines</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="coding-best-practices.html"><a href="coding-best-practices.html#comments-1"><i class="fa fa-check"></i><b>10.3.1</b> Comments</a></li>
<li class="chapter" data-level="10.3.2" data-path="coding-best-practices.html"><a href="coding-best-practices.html#object-variable-names"><i class="fa fa-check"></i><b>10.3.2</b> Object (variable) names</a></li>
<li class="chapter" data-level="10.3.3" data-path="coding-best-practices.html"><a href="coding-best-practices.html#use-names-that-are-informative"><i class="fa fa-check"></i><b>10.3.3</b> Use names that are informative</a></li>
<li class="chapter" data-level="10.3.4" data-path="coding-best-practices.html"><a href="coding-best-practices.html#file-names"><i class="fa fa-check"></i><b>10.3.4</b> File Names</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="using-pipes.html"><a href="using-pipes.html"><i class="fa fa-check"></i><b>11</b> Using pipes</a>
<ul>
<li class="chapter" data-level="11.1" data-path="using-pipes.html"><a href="using-pipes.html#what-are-pipes"><i class="fa fa-check"></i><b>11.1</b> What are pipes?</a></li>
<li class="chapter" data-level="11.2" data-path="using-pipes.html"><a href="using-pipes.html#how-do-pipes-work"><i class="fa fa-check"></i><b>11.2</b> How do pipes work?</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="using-pipes.html"><a href="using-pipes.html#keyboard-shortcut"><i class="fa fa-check"></i><b>11.2.1</b> Keyboard shortcut</a></li>
<li class="chapter" data-level="11.2.2" data-path="using-pipes.html"><a href="using-pipes.html#pipe-style"><i class="fa fa-check"></i><b>11.2.2</b> Pipe style</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="using-pipes.html"><a href="using-pipes.html#final-thought-on-pipes"><i class="fa fa-check"></i><b>11.3</b> Final thought on pipes</a></li>
</ul></li>
<li class="part"><span><b>III Data Transfer</b></span></li>
<li class="chapter" data-level="12" data-path="introduction-to-data-transfer.html"><a href="introduction-to-data-transfer.html"><i class="fa fa-check"></i><b>12</b> Introduction to data transfer</a></li>
<li class="chapter" data-level="13" data-path="file-paths.html"><a href="file-paths.html"><i class="fa fa-check"></i><b>13</b> File paths</a>
<ul>
<li class="chapter" data-level="13.1" data-path="file-paths.html"><a href="file-paths.html#finding-file-paths"><i class="fa fa-check"></i><b>13.1</b> Finding file paths</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html"><i class="fa fa-check"></i><b>14</b> Importing plain text files</a>
<ul>
<li class="chapter" data-level="14.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#packages-for-importing-data"><i class="fa fa-check"></i><b>14.1</b> Packages for importing data</a></li>
<li class="chapter" data-level="14.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-space-delimited-files"><i class="fa fa-check"></i><b>14.2</b> Importing space delimited files</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#specifying-missing-data-values"><i class="fa fa-check"></i><b>14.2.1</b> Specifying missing data values</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-tab-delimited-files"><i class="fa fa-check"></i><b>14.3</b> Importing tab delimited files</a></li>
<li class="chapter" data-level="14.4" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-fixed-width-format-files"><i class="fa fa-check"></i><b>14.4</b> Importing fixed width format files</a>
<ul>
<li class="chapter" data-level="14.4.1" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#vector-of-column-widths"><i class="fa fa-check"></i><b>14.4.1</b> Vector of column widths</a></li>
<li class="chapter" data-level="14.4.2" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#paired-vector-of-start-and-end-positions"><i class="fa fa-check"></i><b>14.4.2</b> Paired vector of start and end positions</a></li>
<li class="chapter" data-level="14.4.3" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#using-named-arguments"><i class="fa fa-check"></i><b>14.4.3</b> Using named arguments</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#importing-comma-separated-values-files"><i class="fa fa-check"></i><b>14.5</b> Importing comma separated values files</a></li>
<li class="chapter" data-level="14.6" data-path="importing-plain-text-files.html"><a href="importing-plain-text-files.html#additional-arguments"><i class="fa fa-check"></i><b>14.6</b> Additional arguments</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="importing-binary-files.html"><a href="importing-binary-files.html"><i class="fa fa-check"></i><b>15</b> Importing binary files</a>
<ul>
<li class="chapter" data-level="15.1" data-path="importing-binary-files.html"><a href="importing-binary-files.html#packages-for-importing-data-1"><i class="fa fa-check"></i><b>15.1</b> Packages for importing data</a></li>
<li class="chapter" data-level="15.2" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-microsoft-excel-spreadsheets"><i class="fa fa-check"></i><b>15.2</b> Importing Microsoft Excel spreadsheets</a></li>
<li class="chapter" data-level="15.3" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-data-from-other-statistical-analysis-software"><i class="fa fa-check"></i><b>15.3</b> Importing data from other statistical analysis software</a></li>
<li class="chapter" data-level="15.4" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-sas-data-sets"><i class="fa fa-check"></i><b>15.4</b> Importing SAS data sets</a></li>
<li class="chapter" data-level="15.5" data-path="importing-binary-files.html"><a href="importing-binary-files.html#importing-stata-data-sets"><i class="fa fa-check"></i><b>15.5</b> Importing Stata data sets</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="rstudios-data-import-tool.html"><a href="rstudios-data-import-tool.html"><i class="fa fa-check"></i><b>16</b> RStudio’s data import tool</a></li>
<li class="chapter" data-level="17" data-path="exporting-data.html"><a href="exporting-data.html"><i class="fa fa-check"></i><b>17</b> Exporting data</a>
<ul>
<li class="chapter" data-level="17.1" data-path="exporting-data.html"><a href="exporting-data.html#plain-text-files"><i class="fa fa-check"></i><b>17.1</b> Plain text files</a></li>
<li class="chapter" data-level="17.2" data-path="exporting-data.html"><a href="exporting-data.html#r-binary-files"><i class="fa fa-check"></i><b>17.2</b> R binary files</a></li>
</ul></li>
<li class="part"><span><b>IV Descriptive Analysis</b></span></li>
<li class="chapter" data-level="18" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html"><i class="fa fa-check"></i><b>18</b> Introduction to descriptive analysis</a>
<ul>
<li class="chapter" data-level="18.1" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-is-descriptive-analysis-and-why-would-we-do-it"><i class="fa fa-check"></i><b>18.1</b> What is descriptive analysis and why would we do it?</a></li>
<li class="chapter" data-level="18.2" data-path="introduction-to-descriptive-analysis.html"><a href="introduction-to-descriptive-analysis.html#what-kind-of-descriptive-analysis-should-we-perform"><i class="fa fa-check"></i><b>18.2</b> What kind of descriptive analysis should we perform?</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html"><i class="fa fa-check"></i><b>19</b> Numerical descriptions of categorical variables</a>
<ul>
<li class="chapter" data-level="19.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#factor-vectors"><i class="fa fa-check"></i><b>19.1</b> Factor vectors</a>
<ul>
<li class="chapter" data-level="19.1.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-numeric-variable"><i class="fa fa-check"></i><b>19.1.1</b> Coerce a numeric variable</a></li>
<li class="chapter" data-level="19.1.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#coerce-a-character-variable"><i class="fa fa-check"></i><b>19.1.2</b> Coerce a character variable</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#height-and-weight-data"><i class="fa fa-check"></i><b>19.2</b> Height and Weight Data</a>
<ul>
<li class="chapter" data-level="19.2.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#view-the-data"><i class="fa fa-check"></i><b>19.2.1</b> View the data</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-frequencies"><i class="fa fa-check"></i><b>19.3</b> Calculating frequencies</a>
<ul>
<li class="chapter" data-level="19.3.1" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-base-r-table-function"><i class="fa fa-check"></i><b>19.3.1</b> The base R table function</a></li>
<li class="chapter" data-level="19.3.2" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-gmodels-crosstable-function"><i class="fa fa-check"></i><b>19.3.2</b> The gmodels CrossTable function</a></li>
<li class="chapter" data-level="19.3.3" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#the-tidyverse-way"><i class="fa fa-check"></i><b>19.3.3</b> The tidyverse way</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#calculating-percentages"><i class="fa fa-check"></i><b>19.4</b> Calculating percentages</a></li>
<li class="chapter" data-level="19.5" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#cat-missing-data"><i class="fa fa-check"></i><b>19.5</b> Missing data</a></li>
<li class="chapter" data-level="19.6" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#formatting-results"><i class="fa fa-check"></i><b>19.6</b> Formatting results</a></li>
<li class="chapter" data-level="19.7" data-path="numerical-descriptions-of-categorical-variables.html"><a href="numerical-descriptions-of-categorical-variables.html#using-freqtables"><i class="fa fa-check"></i><b>19.7</b> Using freqtables</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html"><i class="fa fa-check"></i><b>20</b> Measures of central tendency</a>
<ul>
<li class="chapter" data-level="20.1" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mean"><i class="fa fa-check"></i><b>20.1</b> Calculate the mean</a></li>
<li class="chapter" data-level="20.2" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-median"><i class="fa fa-check"></i><b>20.2</b> Calculate the median</a></li>
<li class="chapter" data-level="20.3" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#calculate-the-mode"><i class="fa fa-check"></i><b>20.3</b> Calculate the mode</a></li>
<li class="chapter" data-level="20.4" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#compare-mean-median-and-mode"><i class="fa fa-check"></i><b>20.4</b> Compare mean, median, and mode</a></li>
<li class="chapter" data-level="20.5" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#data-checking"><i class="fa fa-check"></i><b>20.5</b> Data checking</a></li>
<li class="chapter" data-level="20.6" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#properties-of-mean-median-and-mode"><i class="fa fa-check"></i><b>20.6</b> Properties of mean, median, and mode</a></li>
<li class="chapter" data-level="20.7" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#na-rm"><i class="fa fa-check"></i><b>20.7</b> Missing data</a></li>
<li class="chapter" data-level="20.8" data-path="measures-of-central-tendency.html"><a href="measures-of-central-tendency.html#using-meantables"><i class="fa fa-check"></i><b>20.8</b> Using meantables</a></li>
</ul></li>
<li class="chapter" data-level="21" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html"><i class="fa fa-check"></i><b>21</b> Measures of dispersion</a>
<ul>
<li class="chapter" data-level="21.1" data-path="measures-of-dispersion.html"><a href="measures-of-dispersion.html#comparing-distributions"><i class="fa fa-check"></i><b>21.1</b> Comparing distributions</a></li>
</ul></li>
<li class="chapter" data-level="22" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><i class="fa fa-check"></i><b>22</b> Describing the relationship between a continuous outcome and a continuous predictor</a>
<ul>
<li class="chapter" data-level="22.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#pearson-correlation-coefficient"><i class="fa fa-check"></i><b>22.1</b> Pearson Correlation Coefficient</a>
<ul>
<li class="chapter" data-level="22.1.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#calculating-r"><i class="fa fa-check"></i><b>22.1.1</b> Calculating r</a></li>
<li class="chapter" data-level="22.1.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-continuous-predictor.html#correlation-intuition"><i class="fa fa-check"></i><b>22.1.2</b> Correlation intuition</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="23" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>23</b> Describing the relationship between a continuous outcome and a categorical predictor</a>
<ul>
<li class="chapter" data-level="23.1" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#single-predictor-and-single-outcome"><i class="fa fa-check"></i><b>23.1</b> Single predictor and single outcome</a></li>
<li class="chapter" data-level="23.2" data-path="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-continuous-outcome-and-a-categorical-predictor.html#multiple-predictors"><i class="fa fa-check"></i><b>23.2</b> Multiple predictors</a></li>
</ul></li>
<li class="chapter" data-level="24" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><i class="fa fa-check"></i><b>24</b> Describing the relationship between a categorical outcome and a categorical predictor</a>
<ul>
<li class="chapter" data-level="24.1" data-path="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html"><a href="describing-the-relationship-between-a-categorical-outcome-and-a-categorical-predictor.html#comparing-two-variables"><i class="fa fa-check"></i><b>24.1</b> Comparing two variables</a></li>
</ul></li>
<li class="part"><span><b>V Data Management</b></span></li>
<li class="chapter" data-level="25" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html"><i class="fa fa-check"></i><b>25</b> Introduction to data management</a>
<ul>
<li class="chapter" data-level="25.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#multiple-paradigms-for-data-management-in-r"><i class="fa fa-check"></i><b>25.1</b> Multiple paradigms for data management in R</a></li>
<li class="chapter" data-level="25.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-package"><i class="fa fa-check"></i><b>25.2</b> The dplyr package</a>
<ul>
<li class="chapter" data-level="25.2.1" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-dplyr-verbs"><i class="fa fa-check"></i><b>25.2.1</b> The dplyr verbs</a></li>
<li class="chapter" data-level="25.2.2" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-.data-argument"><i class="fa fa-check"></i><b>25.2.2</b> The .data argument</a></li>
<li class="chapter" data-level="25.2.3" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#the-argument"><i class="fa fa-check"></i><b>25.2.3</b> The … argument</a></li>
<li class="chapter" data-level="25.2.4" data-path="introduction-to-data-management.html"><a href="introduction-to-data-management.html#non-standard-evaluation"><i class="fa fa-check"></i><b>25.2.4</b> Non-standard evaluation</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="26" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html"><i class="fa fa-check"></i><b>26</b> Creating and modifying columns</a>
<ul>
<li class="chapter" data-level="26.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#creating-data-frames"><i class="fa fa-check"></i><b>26.1</b> Creating data frames</a></li>
<li class="chapter" data-level="26.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#dollar-sign-notation-1"><i class="fa fa-check"></i><b>26.2</b> Dollar sign notation</a></li>
<li class="chapter" data-level="26.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#bracket-notation-1"><i class="fa fa-check"></i><b>26.3</b> Bracket notation</a></li>
<li class="chapter" data-level="26.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#modify-individual-values"><i class="fa fa-check"></i><b>26.4</b> Modify individual values</a></li>
<li class="chapter" data-level="26.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#the-mutate-function"><i class="fa fa-check"></i><b>26.5</b> The mutate() function</a>
<ul>
<li class="chapter" data-level="26.5.1" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-a-single-column"><i class="fa fa-check"></i><b>26.5.1</b> Adding or modifying a single column</a></li>
<li class="chapter" data-level="26.5.2" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#recycling-rules"><i class="fa fa-check"></i><b>26.5.2</b> Recycling rules</a></li>
<li class="chapter" data-level="26.5.3" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#using-existing-variables-in-name-value-pairs"><i class="fa fa-check"></i><b>26.5.3</b> Using existing variables in name-value pairs</a></li>
<li class="chapter" data-level="26.5.4" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#adding-or-modifying-multiple-columns"><i class="fa fa-check"></i><b>26.5.4</b> Adding or modifying multiple columns</a></li>
<li class="chapter" data-level="26.5.5" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#rowwise-mutations"><i class="fa fa-check"></i><b>26.5.5</b> Rowwise mutations</a></li>
<li class="chapter" data-level="26.5.6" data-path="creating-and-modifying-columns.html"><a href="creating-and-modifying-columns.html#group_by-mutations"><i class="fa fa-check"></i><b>26.5.6</b> Group_by mutations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="27" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html"><i class="fa fa-check"></i><b>27</b> Subsetting data frames</a>
<ul>
<li class="chapter" data-level="27.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-select-function"><i class="fa fa-check"></i><b>27.1</b> The select() function</a></li>
<li class="chapter" data-level="27.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-rename-function"><i class="fa fa-check"></i><b>27.2</b> The rename() function</a></li>
<li class="chapter" data-level="27.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-filter-function"><i class="fa fa-check"></i><b>27.3</b> The filter() function</a>
<ul>
<li class="chapter" data-level="27.3.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#subgroup-analysis"><i class="fa fa-check"></i><b>27.3.1</b> Subgroup analysis</a></li>
<li class="chapter" data-level="27.3.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-case-analysis"><i class="fa fa-check"></i><b>27.3.2</b> Complete case analysis</a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#deduplication"><i class="fa fa-check"></i><b>27.4</b> Deduplication</a>
<ul>
<li class="chapter" data-level="27.4.1" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#the-distinct-function"><i class="fa fa-check"></i><b>27.4.1</b> The distinct() function</a></li>
<li class="chapter" data-level="27.4.2" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#complete-duplicate-row-add-tag"><i class="fa fa-check"></i><b>27.4.2</b> Complete duplicate row add tag</a></li>
<li class="chapter" data-level="27.4.3" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows"><i class="fa fa-check"></i><b>27.4.3</b> Partial duplicate rows</a></li>
<li class="chapter" data-level="27.4.4" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#partial-duplicate-rows---add-tag"><i class="fa fa-check"></i><b>27.4.4</b> Partial duplicate rows - add tag</a></li>
<li class="chapter" data-level="27.4.5" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#count-the-number-of-duplicates"><i class="fa fa-check"></i><b>27.4.5</b> Count the number of duplicates</a></li>
<li class="chapter" data-level="27.4.6" data-path="subsetting-data-frames.html"><a href="subsetting-data-frames.html#what-to-do-about-duplicates"><i class="fa fa-check"></i><b>27.4.6</b> What to do about duplicates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="28" data-path="working-with-dates.html"><a href="working-with-dates.html"><i class="fa fa-check"></i><b>28</b> Working with dates</a>
<ul>
<li class="chapter" data-level="28.1" data-path="working-with-dates.html"><a href="working-with-dates.html#date-vector-types"><i class="fa fa-check"></i><b>28.1</b> Date vector types</a></li>
<li class="chapter" data-level="28.2" data-path="working-with-dates.html"><a href="working-with-dates.html#dates-under-the-hood"><i class="fa fa-check"></i><b>28.2</b> Dates under the hood</a></li>
<li class="chapter" data-level="28.3" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-date-times-to-dates"><i class="fa fa-check"></i><b>28.3</b> Coercing date-times to dates</a></li>
<li class="chapter" data-level="28.4" data-path="working-with-dates.html"><a href="working-with-dates.html#coercing-character-strings-to-dates"><i class="fa fa-check"></i><b>28.4</b> Coercing character strings to dates</a></li>
<li class="chapter" data-level="28.5" data-path="working-with-dates.html"><a href="working-with-dates.html#change-the-appearance-of-dates-with-format"><i class="fa fa-check"></i><b>28.5</b> Change the appearance of dates with format()</a></li>
<li class="chapter" data-level="28.6" data-path="working-with-dates.html"><a href="working-with-dates.html#some-useful-built-in-dates"><i class="fa fa-check"></i><b>28.6</b> Some useful built-in dates</a>
<ul>
<li class="chapter" data-level="28.6.1" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date"><i class="fa fa-check"></i><b>28.6.1</b> Today’s date</a></li>
<li class="chapter" data-level="28.6.2" data-path="working-with-dates.html"><a href="working-with-dates.html#todays-date-time"><i class="fa fa-check"></i><b>28.6.2</b> Today’s date-time</a></li>
<li class="chapter" data-level="28.6.3" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-full-month-names"><i class="fa fa-check"></i><b>28.6.3</b> Character vector of full month names</a></li>
<li class="chapter" data-level="28.6.4" data-path="working-with-dates.html"><a href="working-with-dates.html#character-vector-of-abbreviated-month-names"><i class="fa fa-check"></i><b>28.6.4</b> Character vector of abbreviated month names</a></li>
<li class="chapter" data-level="28.6.5" data-path="working-with-dates.html"><a href="working-with-dates.html#creating-a-vector-containing-a-sequence-of-dates"><i class="fa fa-check"></i><b>28.6.5</b> Creating a vector containing a sequence of dates</a></li>
</ul></li>
<li class="chapter" data-level="28.7" data-path="working-with-dates.html"><a href="working-with-dates.html#calculating-date-intervals"><i class="fa fa-check"></i><b>28.7</b> Calculating date intervals</a>
<ul>
<li class="chapter" data-level="28.7.1" data-path="working-with-dates.html"><a href="working-with-dates.html#calculate-age-as-the-difference-in-time-between-dob-and-today"><i class="fa fa-check"></i><b>28.7.1</b> Calculate age as the difference in time between dob and today</a></li>
<li class="chapter" data-level="28.7.2" data-path="working-with-dates.html"><a href="working-with-dates.html#rounding-time-intervals"><i class="fa fa-check"></i><b>28.7.2</b> Rounding time intervals</a></li>
</ul></li>
<li class="chapter" data-level="28.8" data-path="working-with-dates.html"><a href="working-with-dates.html#extracting-out-date-parts"><i class="fa fa-check"></i><b>28.8</b> Extracting out date parts</a></li>
<li class="chapter" data-level="28.9" data-path="working-with-dates.html"><a href="working-with-dates.html#sorting-dates"><i class="fa fa-check"></i><b>28.9</b> Sorting dates</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html"><i class="fa fa-check"></i><b>29</b> Working with character strings</a>
<ul>
<li class="chapter" data-level="29.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#coerce-to-lowercase"><i class="fa fa-check"></i><b>29.1</b> Coerce to lowercase</a>
<ul>
<li class="chapter" data-level="29.1.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#lowercase"><i class="fa fa-check"></i><b>29.1.1</b> Lowercase</a></li>
<li class="chapter" data-level="29.1.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#upper-case"><i class="fa fa-check"></i><b>29.1.2</b> Upper case</a></li>
<li class="chapter" data-level="29.1.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#title-case"><i class="fa fa-check"></i><b>29.1.3</b> Title case</a></li>
<li class="chapter" data-level="29.1.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#sentence-case"><i class="fa fa-check"></i><b>29.1.4</b> Sentence case</a></li>
</ul></li>
<li class="chapter" data-level="29.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#trim-white-space"><i class="fa fa-check"></i><b>29.2</b> Trim white space</a></li>
<li class="chapter" data-level="29.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#regular-expressions"><i class="fa fa-check"></i><b>29.3</b> Regular expressions</a>
<ul>
<li class="chapter" data-level="29.3.1" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-the-comma"><i class="fa fa-check"></i><b>29.3.1</b> Remove the comma</a></li>
<li class="chapter" data-level="29.3.2" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-middle-initial"><i class="fa fa-check"></i><b>29.3.2</b> Remove middle initial</a></li>
<li class="chapter" data-level="29.3.3" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#remove-double-spaces"><i class="fa fa-check"></i><b>29.3.3</b> Remove double spaces</a></li>
</ul></li>
<li class="chapter" data-level="29.4" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#separate-values-into-component-parts"><i class="fa fa-check"></i><b>29.4</b> Separate values into component parts</a></li>
<li class="chapter" data-level="29.5" data-path="working-with-character-strings.html"><a href="working-with-character-strings.html#dummy-variables"><i class="fa fa-check"></i><b>29.5</b> Dummy variables</a></li>
</ul></li>
<li class="chapter" data-level="30" data-path="conditional-operations.html"><a href="conditional-operations.html"><i class="fa fa-check"></i><b>30</b> Conditional operations</a>
<ul>
<li class="chapter" data-level="30.1" data-path="conditional-operations.html"><a href="conditional-operations.html#operands-and-operators"><i class="fa fa-check"></i><b>30.1</b> Operands and operators</a></li>
<li class="chapter" data-level="30.2" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-multiple-conditions-simultaneously"><i class="fa fa-check"></i><b>30.2</b> Testing multiple conditions simultaneously</a></li>
<li class="chapter" data-level="30.3" data-path="conditional-operations.html"><a href="conditional-operations.html#testing-a-sequence-of-conditions"><i class="fa fa-check"></i><b>30.3</b> Testing a sequence of conditions</a></li>
<li class="chapter" data-level="30.4" data-path="conditional-operations.html"><a href="conditional-operations.html#recoding-variables"><i class="fa fa-check"></i><b>30.4</b> Recoding variables</a></li>
<li class="chapter" data-level="30.5" data-path="conditional-operations.html"><a href="conditional-operations.html#case_when-is-lazy"><i class="fa fa-check"></i><b>30.5</b> case_when() is lazy</a></li>
<li class="chapter" data-level="30.6" data-path="conditional-operations.html"><a href="conditional-operations.html#recode-missing"><i class="fa fa-check"></i><b>30.6</b> Recode missing</a></li>
</ul></li>
<li class="chapter" data-level="31" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html"><i class="fa fa-check"></i><b>31</b> Working with multiple data frames</a>
<ul>
<li class="chapter" data-level="31.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-vertically-adding-rows"><i class="fa fa-check"></i><b>31.1</b> Combining data frames vertically: Adding rows</a>
<ul>
<li class="chapter" data-level="31.1.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-more-than-2-data-frames"><i class="fa fa-check"></i><b>31.1.1</b> Combining more than 2 data frames</a></li>
<li class="chapter" data-level="31.1.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#adding-rows-with-differing-columns"><i class="fa fa-check"></i><b>31.1.2</b> Adding rows with differing columns</a></li>
<li class="chapter" data-level="31.1.3" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-positions"><i class="fa fa-check"></i><b>31.1.3</b> Differing column positions</a></li>
<li class="chapter" data-level="31.1.4" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#differing-column-names"><i class="fa fa-check"></i><b>31.1.4</b> Differing column names</a></li>
</ul></li>
<li class="chapter" data-level="31.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-adding-columns"><i class="fa fa-check"></i><b>31.2</b> Combining data frames horizontally: Adding columns</a>
<ul>
<li class="chapter" data-level="31.2.1" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-position"><i class="fa fa-check"></i><b>31.2.1</b> Combining data frames horizontally by position</a></li>
<li class="chapter" data-level="31.2.2" data-path="working-with-multiple-data-frames.html"><a href="working-with-multiple-data-frames.html#combining-data-frames-horizontally-by-key-values"><i class="fa fa-check"></i><b>31.2.2</b> Combining data frames horizontally by key values</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="32" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html"><i class="fa fa-check"></i><b>32</b> Restructuring data frames</a>
<ul>
<li class="chapter" data-level="32.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-tidyr-package"><i class="fa fa-check"></i><b>32.1</b> The tidyr package</a></li>
<li class="chapter" data-level="32.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-longer"><i class="fa fa-check"></i><b>32.2</b> Pivoting longer</a>
<ul>
<li class="chapter" data-level="32.2.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_to-argument"><i class="fa fa-check"></i><b>32.2.1</b> The names_to argument</a></li>
<li class="chapter" data-level="32.2.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_prefix-argument"><i class="fa fa-check"></i><b>32.2.2</b> The names_prefix argument</a></li>
<li class="chapter" data-level="32.2.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-values_to-argument"><i class="fa fa-check"></i><b>32.2.3</b> The values_to argument</a></li>
<li class="chapter" data-level="32.2.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_transform-argument"><i class="fa fa-check"></i><b>32.2.4</b> The names_transform argument</a></li>
<li class="chapter" data-level="32.2.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-multiple-sets-of-columns"><i class="fa fa-check"></i><b>32.2.5</b> Pivoting multiple sets of columns</a></li>
<li class="chapter" data-level="32.2.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-names_sep-argument"><i class="fa fa-check"></i><b>32.2.6</b> The names_sep argument</a></li>
<li class="chapter" data-level="32.2.7" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-.value-special-value"><i class="fa fa-check"></i><b>32.2.7</b> The .value special value</a></li>
<li class="chapter" data-level="32.2.8" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-period"><i class="fa fa-check"></i><b>32.2.8</b> Why person-period?</a></li>
</ul></li>
<li class="chapter" data-level="32.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-wider"><i class="fa fa-check"></i><b>32.3</b> Pivoting wider</a>
<ul>
<li class="chapter" data-level="32.3.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#why-person-level"><i class="fa fa-check"></i><b>32.3.1</b> Why person-level?</a></li>
</ul></li>
<li class="chapter" data-level="32.4" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics"><i class="fa fa-check"></i><b>32.4</b> Pivoting summary statistics</a>
<ul>
<li class="chapter" data-level="32.4.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-wide-to-long"><i class="fa fa-check"></i><b>32.4.1</b> Pivoting summary statistics wide to long</a></li>
<li class="chapter" data-level="32.4.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#pivoting-summary-statistics-long-to-wide"><i class="fa fa-check"></i><b>32.4.2</b> Pivoting summary statistics long to wide</a></li>
</ul></li>
<li class="chapter" data-level="32.5" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#tidy-data"><i class="fa fa-check"></i><b>32.5</b> Tidy data</a>
<ul>
<li class="chapter" data-level="32.5.1" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-variable-must-have-its-own-column"><i class="fa fa-check"></i><b>32.5.1</b> Each variable must have its own column</a></li>
<li class="chapter" data-level="32.5.2" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-observation-must-have-its-own-row"><i class="fa fa-check"></i><b>32.5.2</b> Each observation must have its own row</a></li>
<li class="chapter" data-level="32.5.3" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#each-value-must-have-its-own-cell"><i class="fa fa-check"></i><b>32.5.3</b> Each value must have its own cell</a></li>
</ul></li>
<li class="chapter" data-level="32.6" data-path="restructuring-data-frames.html"><a href="restructuring-data-frames.html#the-complete-function"><i class="fa fa-check"></i><b>32.6</b> The complete() function</a></li>
</ul></li>
<li class="part"><span><b>VI Repeated Operations</b></span></li>
<li class="chapter" data-level="33" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html"><i class="fa fa-check"></i><b>33</b> Introduction to repeated operations</a>
<ul>
<li class="chapter" data-level="33.1" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#multiple-methods-for-repeated-operations-in-r"><i class="fa fa-check"></i><b>33.1</b> Multiple methods for repeated operations in R</a></li>
<li class="chapter" data-level="33.2" data-path="introduction-to-repeated-operations.html"><a href="introduction-to-repeated-operations.html#tidy-evaluation"><i class="fa fa-check"></i><b>33.2</b> Tidy evaluation</a></li>
</ul></li>
<li class="chapter" data-level="34" data-path="writing-functions.html"><a href="writing-functions.html"><i class="fa fa-check"></i><b>34</b> Writing functions</a>
<ul>
<li class="chapter" data-level="34.1" data-path="writing-functions.html"><a href="writing-functions.html#when-to-write-functions"><i class="fa fa-check"></i><b>34.1</b> When to write functions</a></li>
<li class="chapter" data-level="34.2" data-path="writing-functions.html"><a href="writing-functions.html#how-to-write-functions"><i class="fa fa-check"></i><b>34.2</b> How to write functions</a>
<ul>
<li class="chapter" data-level="34.2.1" data-path="writing-functions.html"><a href="writing-functions.html#the-function-function"><i class="fa fa-check"></i><b>34.2.1</b> The function() function</a></li>
<li class="chapter" data-level="34.2.2" data-path="writing-functions.html"><a href="writing-functions.html#the-function-writing-process"><i class="fa fa-check"></i><b>34.2.2</b> The function writing process</a></li>
</ul></li>
<li class="chapter" data-level="34.3" data-path="writing-functions.html"><a href="writing-functions.html#giving-your-function-arguments-default-values"><i class="fa fa-check"></i><b>34.3</b> Giving your function arguments default values</a></li>
<li class="chapter" data-level="34.4" data-path="writing-functions.html"><a href="writing-functions.html#the-values-your-functions-return"><i class="fa fa-check"></i><b>34.4</b> The values your functions return</a></li>
<li class="chapter" data-level="34.5" data-path="writing-functions.html"><a href="writing-functions.html#lexical-scoping-and-functions"><i class="fa fa-check"></i><b>34.5</b> Lexical scoping and functions</a></li>
<li class="chapter" data-level="34.6" data-path="writing-functions.html"><a href="writing-functions.html#tidy-evaluation-1"><i class="fa fa-check"></i><b>34.6</b> Tidy evaluation</a></li>
</ul></li>
<li class="chapter" data-level="35" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html"><i class="fa fa-check"></i><b>35</b> Column-wise operations in dplyr</a>
<ul>
<li class="chapter" data-level="35.1" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#the-across-function"><i class="fa fa-check"></i><b>35.1</b> The across() function</a></li>
<li class="chapter" data-level="35.2" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-mutate"><i class="fa fa-check"></i><b>35.2</b> Across with mutate</a></li>
<li class="chapter" data-level="35.3" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-summarise"><i class="fa fa-check"></i><b>35.3</b> Across with summarise</a></li>
<li class="chapter" data-level="35.4" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#across-with-filter"><i class="fa fa-check"></i><b>35.4</b> Across with filter</a></li>
<li class="chapter" data-level="35.5" data-path="column-wise-operations-in-dplyr.html"><a href="column-wise-operations-in-dplyr.html#summary-2"><i class="fa fa-check"></i><b>35.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="36" data-path="writing-for-loops.html"><a href="writing-for-loops.html"><i class="fa fa-check"></i><b>36</b> Writing for loops</a>
<ul>
<li class="chapter" data-level="36.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#how-to-write-for-loops"><i class="fa fa-check"></i><b>36.1</b> How to write for loops</a>
<ul>
<li class="chapter" data-level="36.1.1" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-loop-body"><i class="fa fa-check"></i><b>36.1.1</b> The for loop body</a></li>
<li class="chapter" data-level="36.1.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#the-for-function"><i class="fa fa-check"></i><b>36.1.2</b> The for() function</a></li>
</ul></li>
<li class="chapter" data-level="36.2" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-transfer"><i class="fa fa-check"></i><b>36.2</b> Using for loops for data transfer</a></li>
<li class="chapter" data-level="36.3" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-data-management"><i class="fa fa-check"></i><b>36.3</b> Using for loops for data management</a></li>
<li class="chapter" data-level="36.4" data-path="writing-for-loops.html"><a href="writing-for-loops.html#using-for-loops-for-analysis"><i class="fa fa-check"></i><b>36.4</b> Using for loops for analysis</a></li>
</ul></li>
<li class="chapter" data-level="37" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html"><i class="fa fa-check"></i><b>37</b> Using the purrr package</a>
<ul>
<li class="chapter" data-level="37.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#comparing-for-loops-and-the-map-functions"><i class="fa fa-check"></i><b>37.1</b> Comparing for loops and the map functions</a></li>
<li class="chapter" data-level="37.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-transfer"><i class="fa fa-check"></i><b>37.2</b> Using purrr for data transfer</a>
<ul>
<li class="chapter" data-level="37.2.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-importing-multiple-sheets-from-an-excel-workbook"><i class="fa fa-check"></i><b>37.2.1</b> Example 1: Importing multiple sheets from an Excel workbook</a></li>
<li class="chapter" data-level="37.2.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-walk-instead-of-map"><i class="fa fa-check"></i><b>37.2.2</b> Why walk instead of map?</a></li>
<li class="chapter" data-level="37.2.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#why-we-didnt-assign-the-return-value-of-walk-to-an-object"><i class="fa fa-check"></i><b>37.2.3</b> why we didn’t assign the return value of <code>walk()</code> to an object?</a></li>
</ul></li>
<li class="chapter" data-level="37.3" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-data-management"><i class="fa fa-check"></i><b>37.3</b> Using purrr for data management</a>
<ul>
<li class="chapter" data-level="37.3.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-adding-na-at-multiple-positions"><i class="fa fa-check"></i><b>37.3.1</b> Example 1: Adding NA at multiple positions</a></li>
<li class="chapter" data-level="37.3.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2.-detecting-matching-values-by-position"><i class="fa fa-check"></i><b>37.3.2</b> Example 2. Detecting matching values by position</a></li>
</ul></li>
<li class="chapter" data-level="37.4" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#using-purrr-for-analysis"><i class="fa fa-check"></i><b>37.4</b> Using purrr for analysis</a>
<ul>
<li class="chapter" data-level="37.4.1" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-1-continuous-statistics"><i class="fa fa-check"></i><b>37.4.1</b> Example 1: Continuous statistics</a></li>
<li class="chapter" data-level="37.4.2" data-path="using-the-purrr-package.html"><a href="using-the-purrr-package.html#example-2-categorical-statistics"><i class="fa fa-check"></i><b>37.4.2</b> Example 2: Categorical statistics</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>VII Collaboration</b></span></li>
<li class="chapter" data-level="38" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html"><i class="fa fa-check"></i><b>38</b> Introduction to git and GitHub</a>
<ul>
<li class="chapter" data-level="38.1" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#versioning"><i class="fa fa-check"></i><b>38.1</b> Versioning</a></li>
<li class="chapter" data-level="38.2" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#preservation"><i class="fa fa-check"></i><b>38.2</b> Preservation</a></li>
<li class="chapter" data-level="38.3" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#reproducibility"><i class="fa fa-check"></i><b>38.3</b> Reproducibility</a></li>
<li class="chapter" data-level="38.4" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#collaboration"><i class="fa fa-check"></i><b>38.4</b> Collaboration</a></li>
<li class="chapter" data-level="38.5" data-path="introduction-to-git-and-github.html"><a href="introduction-to-git-and-github.html#summary-3"><i class="fa fa-check"></i><b>38.5</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>VIII Presenting Results</b></span></li>
<li class="chapter" data-level="39" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html"><i class="fa fa-check"></i><b>39</b> Creating tables with R and Microsoft Word</a>
<ul>
<li class="chapter" data-level="39.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-1"><i class="fa fa-check"></i><b>39.1</b> Table 1</a></li>
<li class="chapter" data-level="39.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#opioid-drug-use"><i class="fa fa-check"></i><b>39.2</b> Opioid drug use</a></li>
<li class="chapter" data-level="39.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-columns"><i class="fa fa-check"></i><b>39.3</b> Table columns</a></li>
<li class="chapter" data-level="39.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#table-rows"><i class="fa fa-check"></i><b>39.4</b> Table rows</a></li>
<li class="chapter" data-level="39.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#make-the-table-skeleton"><i class="fa fa-check"></i><b>39.5</b> Make the table skeleton</a></li>
<li class="chapter" data-level="39.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-column-headers"><i class="fa fa-check"></i><b>39.6</b> Fill in column headers</a>
<ul>
<li class="chapter" data-level="39.6.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#group-sample-sizes"><i class="fa fa-check"></i><b>39.6.1</b> Group sample sizes</a></li>
<li class="chapter" data-level="39.6.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-column-headers"><i class="fa fa-check"></i><b>39.6.2</b> Formatting column headers</a></li>
</ul></li>
<li class="chapter" data-level="39.7" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-row-headers"><i class="fa fa-check"></i><b>39.7</b> Fill in row headers</a>
<ul>
<li class="chapter" data-level="39.7.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#label-statistics"><i class="fa fa-check"></i><b>39.7.1</b> Label statistics</a></li>
<li class="chapter" data-level="39.7.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-row-headers"><i class="fa fa-check"></i><b>39.7.2</b> Formatting row headers</a></li>
</ul></li>
<li class="chapter" data-level="39.8" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-data-values"><i class="fa fa-check"></i><b>39.8</b> Fill in data values</a>
<ul>
<li class="chapter" data-level="39.8.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#manually-type-values"><i class="fa fa-check"></i><b>39.8.1</b> Manually type values</a></li>
<li class="chapter" data-level="39.8.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#copy-and-paste-values"><i class="fa fa-check"></i><b>39.8.2</b> Copy and paste values</a></li>
<li class="chapter" data-level="39.8.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#knit-a-word-document"><i class="fa fa-check"></i><b>39.8.3</b> Knit a Word document</a></li>
<li class="chapter" data-level="39.8.4" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#flextable-and-officer"><i class="fa fa-check"></i><b>39.8.4</b> flextable and officer</a></li>
<li class="chapter" data-level="39.8.5" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#significant-digits"><i class="fa fa-check"></i><b>39.8.5</b> Significant digits</a></li>
<li class="chapter" data-level="39.8.6" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-data-values"><i class="fa fa-check"></i><b>39.8.6</b> Formatting data values</a></li>
</ul></li>
<li class="chapter" data-level="39.9" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-title"><i class="fa fa-check"></i><b>39.9</b> Fill in title</a></li>
<li class="chapter" data-level="39.10" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#fill-in-footnotes"><i class="fa fa-check"></i><b>39.10</b> Fill in footnotes</a>
<ul>
<li class="chapter" data-level="39.10.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#formatting-footnotes"><i class="fa fa-check"></i><b>39.10.1</b> Formatting footnotes</a></li>
</ul></li>
<li class="chapter" data-level="39.11" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#final-formatting"><i class="fa fa-check"></i><b>39.11</b> Final formatting</a>
<ul>
<li class="chapter" data-level="39.11.1" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#adjust-column-widths"><i class="fa fa-check"></i><b>39.11.1</b> Adjust column widths</a></li>
<li class="chapter" data-level="39.11.2" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#merge-cells"><i class="fa fa-check"></i><b>39.11.2</b> Merge cells</a></li>
<li class="chapter" data-level="39.11.3" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#remove-cell-borders"><i class="fa fa-check"></i><b>39.11.3</b> Remove cell borders</a></li>
</ul></li>
<li class="chapter" data-level="39.12" data-path="creating-tables-with-r-and-microsoft-word.html"><a href="creating-tables-with-r-and-microsoft-word.html#summary-4"><i class="fa fa-check"></i><b>39.12</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>IX Introduction to Epidemiology</b></span></li>
<li class="chapter" data-level="40" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html"><i class="fa fa-check"></i><b>40</b> Introduction to Epidemiology</a>
<ul>
<li class="chapter" data-level="40.1" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#measurement"><i class="fa fa-check"></i><b>40.1</b> Measurement</a></li>
<li class="chapter" data-level="40.2" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#uncertainty"><i class="fa fa-check"></i><b>40.2</b> Uncertainty</a></li>
<li class="chapter" data-level="40.3" data-path="introduction-to-epidemiology.html"><a href="introduction-to-epidemiology.html#summary-5"><i class="fa fa-check"></i><b>40.3</b> Summary</a></li>
</ul></li>
<li class="part"><span><b>X Appendix</b></span></li>
<li class="chapter" data-level="" data-path="appendix-a-glossary.html"><a href="appendix-a-glossary.html"><i class="fa fa-check"></i>Appendix A: Glossary</a></li>
<li class="chapter" data-level="" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html"><i class="fa fa-check"></i>Appendix: Alternative table formats</a>
<ul>
<li class="chapter" data-level="40.4" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#smaller-data-frame"><i class="fa fa-check"></i><b>40.4</b> Smaller data frame</a>
<ul>
<li class="chapter" data-level="40.4.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen"><i class="fa fa-check"></i><b>40.4.1</b> Default method for printing the data frame to the screen</a></li>
<li class="chapter" data-level="40.4.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function"><i class="fa fa-check"></i><b>40.4.2</b> Using the kable function</a></li>
<li class="chapter" data-level="40.4.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function"><i class="fa fa-check"></i><b>40.4.3</b> Using the datatable function</a></li>
</ul></li>
<li class="chapter" data-level="40.5" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#larger-data-frame"><i class="fa fa-check"></i><b>40.5</b> Larger data frame</a>
<ul>
<li class="chapter" data-level="40.5.1" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#default-method-for-printing-the-data-frame-to-the-screen-1"><i class="fa fa-check"></i><b>40.5.1</b> Default method for printing the data frame to the screen</a></li>
<li class="chapter" data-level="40.5.2" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-kable-function-1"><i class="fa fa-check"></i><b>40.5.2</b> Using the kable function</a></li>
<li class="chapter" data-level="40.5.3" data-path="appendix-alternative-table-formats.html"><a href="appendix-alternative-table-formats.html#using-the-datatable-function-1"><i class="fa fa-check"></i><b>40.5.3</b> Using the datatable function</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Epidemiology</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="column-wise-operations-in-dplyr" class="section level1" number="35">
<h1><span class="header-section-number">35</span> Column-wise operations in dplyr</h1>
<!--

-->
<p>Throughout the chapters in this book we have learned to do a really vast array of useful data transformations and statistical analyses with the help of the <code>dplyr</code> package.</p>
<p><img src="img/07_part_repeated_operations/03_dplyr_column_wise/dplyr.png" width="368" /></p>
<p>So far, however, we’ve always done these transformations and statistical analyses on one column of our data frame at a time. There isn’t anything inherently “wrong” with this approach, but, for reasons we’ve already discussed, there are often advantages to telling R what you want to do one time, and then asking R to do that thing repeatedly <em>across</em> all, or a subset of, the columns in your data frame. That is exactly what <code>dplyr</code>’s <code>across()</code> function allows us to do.</p>
<p>There are so many ways we might want to use the <code>across()</code> function in our R programs. We can’t begin to cover, or even imagine, them all. Instead, the goal of this chapter is just to provide you with an overview of the <code>across()</code> function and show you some examples of using it with <code>filter()</code>, <code>mutate()</code>, and <code>summarise()</code> to get you thinking about how you might want to use it in your R programs.</p>
<p>Before we discuss further, let’s take a look at a quick example. The first thing we will need to do is load <code>dplyr</code>.</p>
<div class="sourceCode" id="cb1160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1160-1"><a href="column-wise-operations-in-dplyr.html#cb1160-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>Then, we will simulate some data. In this case, we are creating a data frame that contains three columns of 10 random numbers:</p>
<div class="sourceCode" id="cb1161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1161-1"><a href="column-wise-operations-in-dplyr.html#cb1161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1161-2"><a href="column-wise-operations-in-dplyr.html#cb1161-2" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1161-3"><a href="column-wise-operations-in-dplyr.html#cb1161-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">row =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb1161-4"><a href="column-wise-operations-in-dplyr.html#cb1161-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">x   =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb1161-5"><a href="column-wise-operations-in-dplyr.html#cb1161-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">y   =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb1161-6"><a href="column-wise-operations-in-dplyr.html#cb1161-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">z   =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb1161-7"><a href="column-wise-operations-in-dplyr.html#cb1161-7" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb1161-8"><a href="column-wise-operations-in-dplyr.html#cb1161-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##      row       x      y      z
##    &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1     1 -0.560   1.22  -1.07 
##  2     2 -0.230   0.360 -0.218
##  3     3  1.56    0.401 -1.03 
##  4     4  0.0705  0.111 -0.729
##  5     5  0.129  -0.556 -0.625
##  6     6  1.72    1.79  -1.69 
##  7     7  0.461   0.498  0.838
##  8     8 -1.27   -1.97   0.153
##  9     9 -0.687   0.701 -1.14 
## 10    10 -0.446  -0.473  1.25</code></pre>
<p>Up to this point, if we wanted to find the mean of each column, we would probably have written code like this:</p>
<div class="sourceCode" id="cb1163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1163-1"><a href="column-wise-operations-in-dplyr.html#cb1163-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1163-2"><a href="column-wise-operations-in-dplyr.html#cb1163-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1163-3"><a href="column-wise-operations-in-dplyr.html#cb1163-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">x_mean =</span> <span class="fu">mean</span>(x),</span>
<span id="cb1163-4"><a href="column-wise-operations-in-dplyr.html#cb1163-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">y_mean =</span> <span class="fu">mean</span>(y),</span>
<span id="cb1163-5"><a href="column-wise-operations-in-dplyr.html#cb1163-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">z_mean =</span> <span class="fu">mean</span>(y)</span>
<span id="cb1163-6"><a href="column-wise-operations-in-dplyr.html#cb1163-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   x_mean y_mean z_mean
##    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 0.0746  0.209  0.209</code></pre>
<p>With the help of the <code>across()</code> function, we can now get the mean of each column like this:</p>
<div class="sourceCode" id="cb1165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1165-1"><a href="column-wise-operations-in-dplyr.html#cb1165-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span></span>
<span id="cb1165-2"><a href="column-wise-operations-in-dplyr.html#cb1165-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1165-3"><a href="column-wise-operations-in-dplyr.html#cb1165-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1165-4"><a href="column-wise-operations-in-dplyr.html#cb1165-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(x<span class="sc">:</span>z),</span>
<span id="cb1165-5"><a href="column-wise-operations-in-dplyr.html#cb1165-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> mean,</span>
<span id="cb1165-6"><a href="column-wise-operations-in-dplyr.html#cb1165-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_mean&quot;</span></span>
<span id="cb1165-7"><a href="column-wise-operations-in-dplyr.html#cb1165-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1165-8"><a href="column-wise-operations-in-dplyr.html#cb1165-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   x_mean y_mean z_mean
##    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 0.0746  0.209 -0.425</code></pre>
<p>Now, you might ask why this is a better approach. Fair question.</p>
<p>In this case, using <code>across()</code> doesn’t actually reduce the number of lines of code we wrote. In fact, we wrote two additional lines when we used the <code>across()</code> function. However, imagine if we added 20 additional columns to our data frame. Using the first approach, we would have to write 20 additional lines of code inside the <code>summarise()</code> function. Using the <code>across()</code> approach, we wouldn’t have to add any additional code at all. We would simply update the value we pass to the <code>.cols</code> argument.</p>
<p>Perhaps <em>more importantly</em>, did you notice that we “accidentally” forgot to replace <code>y</code> with <code>z</code> when we copied and pasted <code>z_mean = mean(y)</code> in the code chunk for the first approach? If not, go back and take a look. That mistake is fairly easy to catch and fix in this very simple example. But, in real-world projects, mistakes like this are easy to make, and not always so easy to catch. We are much less likely to make similar mistakes when we use <code>across()</code>.</p>
<div id="the-across-function" class="section level2" number="35.1">
<h2><span class="header-section-number">35.1</span> The across() function</h2>
<p>The <code>across()</code> function is part of the <code>dplyr</code> package. We will always use <code>across()</code> <em>inside</em> of one of the <code>dplyr</code> verbs we’ve been learning about. Specifically, <code>mutate()</code>, and <code>summarise()</code>. We will not use <code>across()</code> <em>outside</em> of the <code>dplyr</code> verbs. Additionally, we will always use <code>across()</code> within the context of a data frame (as opposed to a vector, matrix, or some other data structure).</p>
<p>To view the help documentation for <code>across()</code>, you can copy and paste <code>?dplyr::across</code> into your R console. If you do, you will see that <code>across()</code> has four arguments. They are:</p>
<p>1️⃣<code>.cols</code>. The value we pass to this argument should be columns of the data frame we want to operate on. We can once again use tidy-select argument modifiers here. In the example above, we used <code>c(x:z)</code> to tell R that we wanted to operate on columns x through z (inclusive). If we had also wanted the mean of the <code>row</code> column for some reason, we could have used the <code>everything()</code> tidy-select modifier to tell R that we wanted to operate on all of the columns in the data frame.</p>
<p>2️⃣<code>.fns</code>. This is where you tell <code>across()</code> what function, or functions, you want to apply to the columns you selected in <code>.cols</code>. In the example above, we passed the mean function to the <code>.fns</code> argument. Notice that we typed <code>mean</code> without the parentheses (i.e., <code>mean()</code>).</p>
<p>3️⃣<code>...</code>. In this case, the <code>...</code> argument is where we pass any additional arguments to the function we passed to the <code>.fns</code> argument. For example, we passed the <code>mean</code> function to the <code>.fns</code> argument above. In the data frame above, none of the columns had any missing values. Let’s go ahead and add some missing values so that we can take a look at how <code>...</code> works in <code>across()</code>.</p>
<div class="sourceCode" id="cb1167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1167-1"><a href="column-wise-operations-in-dplyr.html#cb1167-1" aria-hidden="true" tabindex="-1"></a>df_xyz<span class="sc">$</span>x[<span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb1167-2"><a href="column-wise-operations-in-dplyr.html#cb1167-2" aria-hidden="true" tabindex="-1"></a>df_xyz<span class="sc">$</span>y[<span class="dv">4</span>] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb1167-3"><a href="column-wise-operations-in-dplyr.html#cb1167-3" aria-hidden="true" tabindex="-1"></a>df_xyz<span class="sc">$</span>z[<span class="dv">6</span>] <span class="ot">&lt;-</span> <span class="cn">NA_real_</span></span>
<span id="cb1167-4"><a href="column-wise-operations-in-dplyr.html#cb1167-4" aria-hidden="true" tabindex="-1"></a>df_xyz</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##      row       x      y      z
##    &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1     1 -0.560   1.22  -1.07 
##  2     2 NA       0.360 -0.218
##  3     3  1.56    0.401 -1.03 
##  4     4  0.0705 NA     -0.729
##  5     5  0.129  -0.556 -0.625
##  6     6  1.72    1.79  NA    
##  7     7  0.461   0.498  0.838
##  8     8 -1.27   -1.97   0.153
##  9     9 -0.687   0.701 -1.14 
## 10    10 -0.446  -0.473  1.25</code></pre>
<p>As we’ve already seen many times, R won’t drop the missing values and carry out a complete case analysis by default:</p>
<div class="sourceCode" id="cb1169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1169-1"><a href="column-wise-operations-in-dplyr.html#cb1169-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1169-2"><a href="column-wise-operations-in-dplyr.html#cb1169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1169-3"><a href="column-wise-operations-in-dplyr.html#cb1169-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">x_mean =</span> <span class="fu">mean</span>(x),</span>
<span id="cb1169-4"><a href="column-wise-operations-in-dplyr.html#cb1169-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">y_mean =</span> <span class="fu">mean</span>(y),</span>
<span id="cb1169-5"><a href="column-wise-operations-in-dplyr.html#cb1169-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">z_mean =</span> <span class="fu">mean</span>(y)</span>
<span id="cb1169-6"><a href="column-wise-operations-in-dplyr.html#cb1169-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   x_mean y_mean z_mean
##    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     NA     NA     NA</code></pre>
<p>Instead, we have to explicitly tell R to carry out a complete case analysis. We can do so by filtering our rows with missing data (more on this later) or by changing the value of the <code>mean()</code> function’s <code>na.rm</code> argument from <code>FALSE</code> (the default) to <code>TRUE</code>:</p>
<div class="sourceCode" id="cb1171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1171-1"><a href="column-wise-operations-in-dplyr.html#cb1171-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1171-2"><a href="column-wise-operations-in-dplyr.html#cb1171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1171-3"><a href="column-wise-operations-in-dplyr.html#cb1171-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">x_mean =</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1171-4"><a href="column-wise-operations-in-dplyr.html#cb1171-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">y_mean =</span> <span class="fu">mean</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1171-5"><a href="column-wise-operations-in-dplyr.html#cb1171-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">z_mean =</span> <span class="fu">mean</span>(z, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1171-6"><a href="column-wise-operations-in-dplyr.html#cb1171-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   x_mean y_mean z_mean
##    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1  0.108  0.220 -0.284</code></pre>
<p>When we use <code>across()</code>, we will need to pass the <code>na.rm = TRUE</code> to the <code>mean()</code> function in <code>across()</code>’s <code>...</code> argument like this:</p>
<div class="sourceCode" id="cb1173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1173-1"><a href="column-wise-operations-in-dplyr.html#cb1173-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span></span>
<span id="cb1173-2"><a href="column-wise-operations-in-dplyr.html#cb1173-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1173-3"><a href="column-wise-operations-in-dplyr.html#cb1173-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1173-4"><a href="column-wise-operations-in-dplyr.html#cb1173-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">everything</span>(),</span>
<span id="cb1173-5"><a href="column-wise-operations-in-dplyr.html#cb1173-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> mean,</span>
<span id="cb1173-6"><a href="column-wise-operations-in-dplyr.html#cb1173-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm  =</span> <span class="cn">TRUE</span>, <span class="co"># Passing na.rm = TRUE to the ... argument</span></span>
<span id="cb1173-7"><a href="column-wise-operations-in-dplyr.html#cb1173-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_mean&quot;</span></span>
<span id="cb1173-8"><a href="column-wise-operations-in-dplyr.html#cb1173-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1173-9"><a href="column-wise-operations-in-dplyr.html#cb1173-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   row_mean x_mean y_mean z_mean
##      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1      5.5  0.108  0.220 -0.284</code></pre>
<p>Notice that we do not actually type out <code>... =</code> or anything like that.</p>
<p>4️⃣<code>.names</code>. You can use this argument to adjust the column names that will result from the operation you pass to <code>.fns</code>. In the example above, we used the special <code>{cols}</code> keyword to use each of the column names that were passed to the <code>.cols</code> argument as the first part of each of the new columns’ names. Then, we asked R to add a literal underscore and the word “mean” because these are all mean values. That resulted in the new column names you see above. The default value for <code>.names</code> is just <code>{cols}</code>. So, if we hadn’t modified the value passed to the <code>.names</code> argument, our results would have looked like this:</p>
<div class="sourceCode" id="cb1175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1175-1"><a href="column-wise-operations-in-dplyr.html#cb1175-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span></span>
<span id="cb1175-2"><a href="column-wise-operations-in-dplyr.html#cb1175-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1175-3"><a href="column-wise-operations-in-dplyr.html#cb1175-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1175-4"><a href="column-wise-operations-in-dplyr.html#cb1175-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">everything</span>(),</span>
<span id="cb1175-5"><a href="column-wise-operations-in-dplyr.html#cb1175-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> mean,</span>
<span id="cb1175-6"><a href="column-wise-operations-in-dplyr.html#cb1175-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm  =</span> <span class="cn">TRUE</span></span>
<span id="cb1175-7"><a href="column-wise-operations-in-dplyr.html#cb1175-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1175-8"><a href="column-wise-operations-in-dplyr.html#cb1175-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##     row     x     y      z
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1   5.5 0.108 0.220 -0.284</code></pre>
<p>There is also a special <code>{fn}</code> keyword that we can use to pass the name of each of the functions we used in <code>.fns</code> as part of the new column names. However, in order to get <code>{fn}</code> to work the way we want it to, we have to pass a list of name-function pairs to the <code>.fns</code> argument. Let me show you what we mean.</p>
<p>First, we will keep the code exactly as it was, but replace “mean” with “{fn}” in the <code>.names</code> argument:</p>
<div class="sourceCode" id="cb1177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1177-1"><a href="column-wise-operations-in-dplyr.html#cb1177-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span></span>
<span id="cb1177-2"><a href="column-wise-operations-in-dplyr.html#cb1177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1177-3"><a href="column-wise-operations-in-dplyr.html#cb1177-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1177-4"><a href="column-wise-operations-in-dplyr.html#cb1177-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">everything</span>(),</span>
<span id="cb1177-5"><a href="column-wise-operations-in-dplyr.html#cb1177-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> mean, </span>
<span id="cb1177-6"><a href="column-wise-operations-in-dplyr.html#cb1177-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm  =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1177-7"><a href="column-wise-operations-in-dplyr.html#cb1177-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_{fn}&quot;</span></span>
<span id="cb1177-8"><a href="column-wise-operations-in-dplyr.html#cb1177-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1177-9"><a href="column-wise-operations-in-dplyr.html#cb1177-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   row_1   x_1   y_1    z_1
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
## 1   5.5 0.108 0.220 -0.284</code></pre>
<p>This is not the result we wanted. Because, we didn’t <em>name</em> the function that we passed to <code>.fns</code>, <code>across()</code> essentially used “function number 1” as its name. In order to get the result we want, we need to pass a list of name-function pairs to the <code>.fns</code> argument like this:</p>
<div class="sourceCode" id="cb1179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1179-1"><a href="column-wise-operations-in-dplyr.html#cb1179-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1179-2"><a href="column-wise-operations-in-dplyr.html#cb1179-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1179-3"><a href="column-wise-operations-in-dplyr.html#cb1179-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1179-4"><a href="column-wise-operations-in-dplyr.html#cb1179-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">everything</span>(),</span>
<span id="cb1179-5"><a href="column-wise-operations-in-dplyr.html#cb1179-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="fu">list</span>(<span class="at">mean =</span> mean),</span>
<span id="cb1179-6"><a href="column-wise-operations-in-dplyr.html#cb1179-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm  =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1179-7"><a href="column-wise-operations-in-dplyr.html#cb1179-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_{fn}&quot;</span></span>
<span id="cb1179-8"><a href="column-wise-operations-in-dplyr.html#cb1179-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1179-9"><a href="column-wise-operations-in-dplyr.html#cb1179-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   row_mean x_mean y_mean z_mean
##      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1      5.5  0.108  0.220 -0.284</code></pre>
<p>Although it may not be self-evident from just looking at the code above, the first <code>mean</code> in the <code>list(mean = mean)</code> name-function pair is a name that we are choosing to be passed to the new column names. Theoretically, we could have picked any name. For example:</p>
<div class="sourceCode" id="cb1181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1181-1"><a href="column-wise-operations-in-dplyr.html#cb1181-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1181-2"><a href="column-wise-operations-in-dplyr.html#cb1181-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1181-3"><a href="column-wise-operations-in-dplyr.html#cb1181-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1181-4"><a href="column-wise-operations-in-dplyr.html#cb1181-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">everything</span>(),</span>
<span id="cb1181-5"><a href="column-wise-operations-in-dplyr.html#cb1181-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="fu">list</span>(<span class="at">r4epi =</span> mean),</span>
<span id="cb1181-6"><a href="column-wise-operations-in-dplyr.html#cb1181-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm  =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1181-7"><a href="column-wise-operations-in-dplyr.html#cb1181-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_{fn}&quot;</span></span>
<span id="cb1181-8"><a href="column-wise-operations-in-dplyr.html#cb1181-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1181-9"><a href="column-wise-operations-in-dplyr.html#cb1181-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   row_r4epi x_r4epi y_r4epi z_r4epi
##       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1       5.5   0.108   0.220  -0.284</code></pre>
<p>The second <code>mean</code> in the <code>list(mean = mean)</code> name-function pair is the name of the actual function we want to apply to the columns in <code>.cols</code>. This part of the name-function pair must be the name of the function that we actually want to apply to the columns in <code>.cols</code>. Otherwise, we will get an error:</p>
<div class="sourceCode" id="cb1183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1183-1"><a href="column-wise-operations-in-dplyr.html#cb1183-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1183-2"><a href="column-wise-operations-in-dplyr.html#cb1183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1183-3"><a href="column-wise-operations-in-dplyr.html#cb1183-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1183-4"><a href="column-wise-operations-in-dplyr.html#cb1183-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">everything</span>(),</span>
<span id="cb1183-5"><a href="column-wise-operations-in-dplyr.html#cb1183-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="fu">list</span>(<span class="at">mean =</span> r4epi),</span>
<span id="cb1183-6"><a href="column-wise-operations-in-dplyr.html#cb1183-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm  =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1183-7"><a href="column-wise-operations-in-dplyr.html#cb1183-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_{fn}&quot;</span></span>
<span id="cb1183-8"><a href="column-wise-operations-in-dplyr.html#cb1183-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1183-9"><a href="column-wise-operations-in-dplyr.html#cb1183-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Error in `summarise()`:
## ! Problem while computing `..1 = across(...)`.
## Caused by error in `across_setup()`:
## ! object &#39;r4epi&#39; not found</code></pre>
<p>An additional advantage of passing a list of name-function pairs to the <code>.fns</code> argument is that we can pass <em>multiple</em> functions at once. For example, let’s say that we want the minimum and maximum value of each column in our data frame. Without <code>across()</code> we might do that analysis like this:</p>
<div class="sourceCode" id="cb1185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1185-1"><a href="column-wise-operations-in-dplyr.html#cb1185-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1185-2"><a href="column-wise-operations-in-dplyr.html#cb1185-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1185-3"><a href="column-wise-operations-in-dplyr.html#cb1185-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">x_min =</span> <span class="fu">min</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1185-4"><a href="column-wise-operations-in-dplyr.html#cb1185-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">x_max =</span> <span class="fu">max</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1185-5"><a href="column-wise-operations-in-dplyr.html#cb1185-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">y_min =</span> <span class="fu">min</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1185-6"><a href="column-wise-operations-in-dplyr.html#cb1185-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y_max =</span> <span class="fu">max</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1185-7"><a href="column-wise-operations-in-dplyr.html#cb1185-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">z_min =</span> <span class="fu">min</span>(z, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1185-8"><a href="column-wise-operations-in-dplyr.html#cb1185-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">z_max =</span> <span class="fu">max</span>(z, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1185-9"><a href="column-wise-operations-in-dplyr.html#cb1185-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##   x_min x_max y_min y_max z_min z_max
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 -1.27  1.72 -1.97  1.79 -1.14  1.25</code></pre>
<p>But, we can simply pass <code>min</code> and <code>max</code> as a list of name-function pairs if we use <code>across()</code>:</p>
<div class="sourceCode" id="cb1187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1187-1"><a href="column-wise-operations-in-dplyr.html#cb1187-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1187-2"><a href="column-wise-operations-in-dplyr.html#cb1187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1187-3"><a href="column-wise-operations-in-dplyr.html#cb1187-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1187-4"><a href="column-wise-operations-in-dplyr.html#cb1187-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">everything</span>(),</span>
<span id="cb1187-5"><a href="column-wise-operations-in-dplyr.html#cb1187-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="fu">list</span>(<span class="at">min =</span> min, <span class="at">max =</span> max),</span>
<span id="cb1187-6"><a href="column-wise-operations-in-dplyr.html#cb1187-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">na.rm  =</span> <span class="cn">TRUE</span>,</span>
<span id="cb1187-7"><a href="column-wise-operations-in-dplyr.html#cb1187-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_{fn}&quot;</span></span>
<span id="cb1187-8"><a href="column-wise-operations-in-dplyr.html#cb1187-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1187-9"><a href="column-wise-operations-in-dplyr.html#cb1187-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 8
##   row_min row_max x_min x_max y_min y_max z_min z_max
##     &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1       1      10 -1.27  1.72 -1.97  1.79 -1.14  1.25</code></pre>
<p>How great is that?!?</p>
<p>So, we’ve seen how to pass an individual function to the <code>.fns</code> argument and we’ve seen how to pass a list containing multiple functions to the <code>.fns</code> argument. There is actually a third syntax for passing functions to the <code>.fns</code> argument. The <code>across()</code> documentation calls it “a purrr-style lambda”. This can be a little bit confusing, so I’m going to show you an example, and then walk through it step by step.</p>
<div class="sourceCode" id="cb1189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1189-1"><a href="column-wise-operations-in-dplyr.html#cb1189-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1189-2"><a href="column-wise-operations-in-dplyr.html#cb1189-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1189-3"><a href="column-wise-operations-in-dplyr.html#cb1189-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1189-4"><a href="column-wise-operations-in-dplyr.html#cb1189-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">everything</span>(),</span>
<span id="cb1189-5"><a href="column-wise-operations-in-dplyr.html#cb1189-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1189-6"><a href="column-wise-operations-in-dplyr.html#cb1189-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_mean&quot;</span></span>
<span id="cb1189-7"><a href="column-wise-operations-in-dplyr.html#cb1189-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1189-8"><a href="column-wise-operations-in-dplyr.html#cb1189-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   row_mean x_mean y_mean z_mean
##      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1      5.5  0.108  0.220 -0.284</code></pre>
<p>The purrr-style lambda always begins with the tilde symbol (~). Then we type out a function call behind the tilde symbol. We place the special <code>.x</code> symbol inside the function call where we would normally want to type the name of the column we want the function to operate on. The <code>across()</code> function will then substitute each column name we passed to the <code>.cols</code> argument for <code>.x</code> sequentially. In the example above, there isn’t really any good reason to use this syntax. However, this syntax can be useful at times. We will see some examples below.</p>
</div>
<div id="across-with-mutate" class="section level2" number="35.2">
<h2><span class="header-section-number">35.2</span> Across with mutate</h2>
<p>We’ve already seen a number of examples of manipulating columns of our data frames using the <code>mutate()</code> function. In this section, we are going to take a look at two examples where using the <code>across()</code> function inside <code>mutate()</code> will allow us to apply the same manipulation to multiple columns in our data frame at once.</p>
<p>Let’s go ahead and simulate the same <code>demographics</code> data frame we simulated for the <a href="conditional-operations.html#recode-missing">recoding missing</a> section of the conditional operations chapter. Let’s also add two new columns: a four-category education column and a six-category income column. For all columns except <code>id</code> and <code>age</code>, a value of <code>7</code> represents “Don’t know” and a value of <code>9</code> represents “refused.”</p>
<div class="sourceCode" id="cb1191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1191-1"><a href="column-wise-operations-in-dplyr.html#cb1191-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1191-2"><a href="column-wise-operations-in-dplyr.html#cb1191-2" aria-hidden="true" tabindex="-1"></a>demographics <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1191-3"><a href="column-wise-operations-in-dplyr.html#cb1191-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">id       =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb1191-4"><a href="column-wise-operations-in-dplyr.html#cb1191-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">age      =</span> <span class="fu">c</span>(<span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">30</span>, <span class="dv">9</span>, <span class="cn">TRUE</span>), <span class="cn">NA</span>),</span>
<span id="cb1191-5"><a href="column-wise-operations-in-dplyr.html#cb1191-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">race     =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">3</span>),</span>
<span id="cb1191-6"><a href="column-wise-operations-in-dplyr.html#cb1191-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">hispanic =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">9</span>, <span class="dv">0</span>, <span class="dv">1</span>),</span>
<span id="cb1191-7"><a href="column-wise-operations-in-dplyr.html#cb1191-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">edu_4cat =</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">3</span>, <span class="dv">3</span>),</span>
<span id="cb1191-8"><a href="column-wise-operations-in-dplyr.html#cb1191-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">inc_6cat =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">9</span>)</span>
<span id="cb1191-9"><a href="column-wise-operations-in-dplyr.html#cb1191-9" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb1191-10"><a href="column-wise-operations-in-dplyr.html#cb1191-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 6
##       id   age  race hispanic edu_4cat inc_6cat
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1     1    15     1        7        4        1
##  2     2    19     2        0        2        4
##  3     3    14     1        1        9        1
##  4     4     3     4        0        1        1
##  5     5    10     7        1        2        5
##  6     6    18     1        0        3        3
##  7     7    22     2        1        4        2
##  8     8    11     9        9        9        2
##  9     9     5     1        0        3        7
## 10    10    NA     3        1        3        9</code></pre>
<p>When working with data like this, it’s common to want to recode all the <code>7</code>’s and <code>9</code>’s to <code>NA</code>’s. We saw how to do that one column at a time already:</p>
<div class="sourceCode" id="cb1193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1193-1"><a href="column-wise-operations-in-dplyr.html#cb1193-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb1193-2"><a href="column-wise-operations-in-dplyr.html#cb1193-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1193-3"><a href="column-wise-operations-in-dplyr.html#cb1193-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">race     =</span> <span class="fu">if_else</span>(race <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> race <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, race),</span>
<span id="cb1193-4"><a href="column-wise-operations-in-dplyr.html#cb1193-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">hispanic =</span> <span class="fu">if_else</span>(race <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> hispanic <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, hispanic),</span>
<span id="cb1193-5"><a href="column-wise-operations-in-dplyr.html#cb1193-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">edu_4cat =</span> <span class="fu">if_else</span>(edu_4cat <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> edu_4cat <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, edu_4cat)</span>
<span id="cb1193-6"><a href="column-wise-operations-in-dplyr.html#cb1193-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 6
##       id   age  race hispanic edu_4cat inc_6cat
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1     1    15     1        7        4        1
##  2     2    19     2        0        2        4
##  3     3    14     1        1       NA        1
##  4     4     3     4        0        1        1
##  5     5    10    NA       NA        2        5
##  6     6    18     1        0        3        3
##  7     7    22     2        1        4        2
##  8     8    11    NA       NA       NA        2
##  9     9     5     1        0        3        7
## 10    10    NA     3        1        3        9</code></pre>
<p>🚩In the code chunk above, we have essentially the same code copied more than twice. That’s a red flag that we should be thinking about removing unnecessary repetition from our code.</p>
<p>Also, did you notice that we forgot to replace <code>race</code> with <code>hispanic</code> in <code>hispanic = if_else(race == 7 | hispanic == 9, NA_real_, hispanic)</code>? This time, we didn’t write “forgot” in quotes because we <em>really did forget</em> and only noticed it later. In this case, the error caused a value of <code>1</code> to be recoded to <code>NA</code> in the <code>hispanic</code> column. These typos we’ve been talking about really do happen – even to me!</p>
<p>Here’s how we can use <code>across()</code> in this situation:</p>
<div class="sourceCode" id="cb1195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1195-1"><a href="column-wise-operations-in-dplyr.html#cb1195-1" aria-hidden="true" tabindex="-1"></a>demographics <span class="sc">%&gt;%</span> </span>
<span id="cb1195-2"><a href="column-wise-operations-in-dplyr.html#cb1195-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1195-3"><a href="column-wise-operations-in-dplyr.html#cb1195-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1195-4"><a href="column-wise-operations-in-dplyr.html#cb1195-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(<span class="sc">-</span>id, <span class="sc">-</span>age),</span>
<span id="cb1195-5"><a href="column-wise-operations-in-dplyr.html#cb1195-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns  =</span> <span class="sc">~</span> <span class="fu">if_else</span>(.x <span class="sc">==</span> <span class="dv">7</span> <span class="sc">|</span> .x <span class="sc">==</span> <span class="dv">9</span>, <span class="cn">NA_real_</span>, .x)</span>
<span id="cb1195-6"><a href="column-wise-operations-in-dplyr.html#cb1195-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1195-7"><a href="column-wise-operations-in-dplyr.html#cb1195-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 6
##       id   age  race hispanic edu_4cat inc_6cat
##    &lt;int&gt; &lt;int&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1     1    15     1       NA        4        1
##  2     2    19     2        0        2        4
##  3     3    14     1        1       NA        1
##  4     4     3     4        0        1        1
##  5     5    10    NA        1        2        5
##  6     6    18     1        0        3        3
##  7     7    22     2        1        4        2
##  8     8    11    NA       NA       NA        2
##  9     9     5     1        0        3       NA
## 10    10    NA     3        1        3       NA</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used a purrr-style lambda to replace <code>7</code>’s and <code>9</code>’s in all columns in our data frame, except <code>id</code> and <code>age</code>, with <code>NA</code>.</p></li>
<li><p>Remember, the special <code>.x</code> symbol is just shorthand for each column passed to the <code>.cols</code> argument.</p></li>
</ul>
<p>As another example, let’s say that we are once again working with data from a drug trial that includes a list of side effects for each person:</p>
<div class="sourceCode" id="cb1197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1197-1"><a href="column-wise-operations-in-dplyr.html#cb1197-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb1197-2"><a href="column-wise-operations-in-dplyr.html#cb1197-2" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1197-3"><a href="column-wise-operations-in-dplyr.html#cb1197-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">id           =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb1197-4"><a href="column-wise-operations-in-dplyr.html#cb1197-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_headache  =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">10</span>, <span class="cn">TRUE</span>),</span>
<span id="cb1197-5"><a href="column-wise-operations-in-dplyr.html#cb1197-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_diarrhea  =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">10</span>, <span class="cn">TRUE</span>),</span>
<span id="cb1197-6"><a href="column-wise-operations-in-dplyr.html#cb1197-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_dry_mouth =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">10</span>, <span class="cn">TRUE</span>),</span>
<span id="cb1197-7"><a href="column-wise-operations-in-dplyr.html#cb1197-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_nausea    =</span> <span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="dv">10</span>, <span class="cn">TRUE</span>)</span>
<span id="cb1197-8"><a href="column-wise-operations-in-dplyr.html#cb1197-8" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb1197-9"><a href="column-wise-operations-in-dplyr.html#cb1197-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 5
##       id se_headache se_diarrhea se_dry_mouth se_nausea
##    &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt;     &lt;int&gt;
##  1     1           0           1            0         0
##  2     2           0           1            1         1
##  3     3           0           1            0         0
##  4     4           1           0            0         1
##  5     5           0           1            0         1
##  6     6           1           0            0         0
##  7     7           1           1            1         0
##  8     8           1           0            1         0
##  9     9           0           0            0         0
## 10    10           0           0            1         1</code></pre>
<p>Now, we want to create a factor version of each of the side effect columns. We’ve already learned how to do so one column at a time:</p>
<div class="sourceCode" id="cb1199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1199-1"><a href="column-wise-operations-in-dplyr.html#cb1199-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb1199-2"><a href="column-wise-operations-in-dplyr.html#cb1199-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1199-3"><a href="column-wise-operations-in-dplyr.html#cb1199-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_headache_f  =</span> <span class="fu">factor</span>(se_headache, <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>)),</span>
<span id="cb1199-4"><a href="column-wise-operations-in-dplyr.html#cb1199-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_diarrhea_f  =</span> <span class="fu">factor</span>(se_diarrhea, <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>)),</span>
<span id="cb1199-5"><a href="column-wise-operations-in-dplyr.html#cb1199-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">se_dry_mouth_f =</span> <span class="fu">factor</span>(se_dry_mouth, <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>))</span>
<span id="cb1199-6"><a href="column-wise-operations-in-dplyr.html#cb1199-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 8
##       id se_headache se_diarrhea se_dry_mouth se_nausea se_headache_f
##    &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt;     &lt;int&gt; &lt;fct&gt;        
##  1     1           0           1            0         0 No           
##  2     2           0           1            1         1 No           
##  3     3           0           1            0         0 No           
##  4     4           1           0            0         1 Yes          
##  5     5           0           1            0         1 No           
##  6     6           1           0            0         0 Yes          
##  7     7           1           1            1         0 Yes          
##  8     8           1           0            1         0 Yes          
##  9     9           0           0            0         0 No           
## 10    10           0           0            1         1 No           
## # … with 2 more variables: se_diarrhea_f &lt;fct&gt;, se_dry_mouth_f &lt;fct&gt;</code></pre>
<p>🚩Once again, we have essentially the same code copied more than twice. That’s a red flag that we should be thinking about removing unnecessary repetition from our code. Here’s how we can use <code>across()</code> to do so:</p>
<div class="sourceCode" id="cb1201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1201-1"><a href="column-wise-operations-in-dplyr.html#cb1201-1" aria-hidden="true" tabindex="-1"></a>drug_trial <span class="sc">%&gt;%</span> </span>
<span id="cb1201-2"><a href="column-wise-operations-in-dplyr.html#cb1201-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1201-3"><a href="column-wise-operations-in-dplyr.html#cb1201-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1201-4"><a href="column-wise-operations-in-dplyr.html#cb1201-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">starts_with</span>(<span class="st">&quot;se&quot;</span>),</span>
<span id="cb1201-5"><a href="column-wise-operations-in-dplyr.html#cb1201-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">factor</span>(.x, <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>, <span class="fu">c</span>(<span class="st">&quot;No&quot;</span>, <span class="st">&quot;Yes&quot;</span>)),</span>
<span id="cb1201-6"><a href="column-wise-operations-in-dplyr.html#cb1201-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}_f&quot;</span></span>
<span id="cb1201-7"><a href="column-wise-operations-in-dplyr.html#cb1201-7" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1201-8"><a href="column-wise-operations-in-dplyr.html#cb1201-8" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 9
##       id se_headache se_diarrhea se_dry_mouth se_nausea se_headache_f
##    &lt;int&gt;       &lt;int&gt;       &lt;int&gt;        &lt;int&gt;     &lt;int&gt; &lt;fct&gt;        
##  1     1           0           1            0         0 No           
##  2     2           0           1            1         1 No           
##  3     3           0           1            0         0 No           
##  4     4           1           0            0         1 Yes          
##  5     5           0           1            0         1 No           
##  6     6           1           0            0         0 Yes          
##  7     7           1           1            1         0 Yes          
##  8     8           1           0            1         0 Yes          
##  9     9           0           0            0         0 No           
## 10    10           0           0            1         1 No           
## # … with 3 more variables: se_diarrhea_f &lt;fct&gt;, se_dry_mouth_f &lt;fct&gt;,
## #   se_nausea_f &lt;fct&gt;</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>We used a purrr-style lambda to create a factor version of all the side effect columns in our data frame.</p></li>
<li><p>We used the <code>.names</code> argument to add an “_f” to the end of the new column names.</p></li>
</ul>
</div>
<div id="across-with-summarise" class="section level2" number="35.3">
<h2><span class="header-section-number">35.3</span> Across with summarise</h2>
<p>Let’s return to the <code>ehr</code> data frame we used in the chapter on working with character strings for our first example of using <code>across()</code> inside of <code>summarise</code>.</p>
<p><a href="https://www.dropbox.com/s/qy778lzafids0om/ehr.Rds?dl=1">You may click here to download this file to your computer</a>.</p>
<div class="sourceCode" id="cb1203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1203-1"><a href="column-wise-operations-in-dplyr.html#cb1203-1" aria-hidden="true" tabindex="-1"></a><span class="co"># We will need readr and stringr in the examples below</span></span>
<span id="cb1203-2"><a href="column-wise-operations-in-dplyr.html#cb1203-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1203-3"><a href="column-wise-operations-in-dplyr.html#cb1203-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span></code></pre></div>
<div class="sourceCode" id="cb1204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1204-1"><a href="column-wise-operations-in-dplyr.html#cb1204-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read in the data</span></span>
<span id="cb1204-2"><a href="column-wise-operations-in-dplyr.html#cb1204-2" aria-hidden="true" tabindex="-1"></a>ehr <span class="ot">&lt;-</span> <span class="fu">read_rds</span>(<span class="st">&quot;/Users/bradcannell/Dropbox/Datasets/epcr/ehr.Rds&quot;</span>)</span></code></pre></div>
<p>For this example, the only column we will concern ourselves with is the <code>symptoms</code> column:</p>
<div class="sourceCode" id="cb1205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1205-1"><a href="column-wise-operations-in-dplyr.html#cb1205-1" aria-hidden="true" tabindex="-1"></a>symptoms <span class="ot">&lt;-</span> ehr <span class="sc">%&gt;%</span> </span>
<span id="cb1205-2"><a href="column-wise-operations-in-dplyr.html#cb1205-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(symptoms) <span class="sc">%&gt;%</span> </span>
<span id="cb1205-3"><a href="column-wise-operations-in-dplyr.html#cb1205-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 15 × 1
##    symptoms                            
##    &lt;chr&gt;                               
##  1 &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;, \&quot;Nausea\&quot;&quot;
##  2 &quot;Pain&quot;                              
##  3 &quot;Pain&quot;                              
##  4 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;          
##  5 &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;&quot;            
##  6 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;          
##  7 &quot;Pain&quot;                              
##  8  &lt;NA&gt;                               
##  9 &quot;Pain&quot;                              
## 10  &lt;NA&gt;                               
## 11 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;          
## 12 &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot;
## 13 &quot;Headache&quot;                          
## 14 &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot;
## 15  &lt;NA&gt;</code></pre>
<p>You may recall that we created dummy variables for each symptom like this:</p>
<div class="sourceCode" id="cb1207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1207-1"><a href="column-wise-operations-in-dplyr.html#cb1207-1" aria-hidden="true" tabindex="-1"></a>symptoms <span class="ot">&lt;-</span> symptoms <span class="sc">%&gt;%</span> </span>
<span id="cb1207-2"><a href="column-wise-operations-in-dplyr.html#cb1207-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1207-3"><a href="column-wise-operations-in-dplyr.html#cb1207-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">pain     =</span> <span class="fu">str_detect</span>(symptoms, <span class="st">&quot;Pain&quot;</span>),</span>
<span id="cb1207-4"><a href="column-wise-operations-in-dplyr.html#cb1207-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">headache =</span> <span class="fu">str_detect</span>(symptoms, <span class="st">&quot;Headache&quot;</span>),</span>
<span id="cb1207-5"><a href="column-wise-operations-in-dplyr.html#cb1207-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">nausea   =</span> <span class="fu">str_detect</span>(symptoms, <span class="st">&quot;Nausea&quot;</span>)</span>
<span id="cb1207-6"><a href="column-wise-operations-in-dplyr.html#cb1207-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1207-7"><a href="column-wise-operations-in-dplyr.html#cb1207-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 15 × 4
##    symptoms                             pain  headache nausea
##    &lt;chr&gt;                                &lt;lgl&gt; &lt;lgl&gt;    &lt;lgl&gt; 
##  1 &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;, \&quot;Nausea\&quot;&quot; TRUE  TRUE     TRUE  
##  2 &quot;Pain&quot;                               TRUE  FALSE    FALSE 
##  3 &quot;Pain&quot;                               TRUE  FALSE    FALSE 
##  4 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;           FALSE TRUE     TRUE  
##  5 &quot;\&quot;Pain\&quot;, \&quot;Headache\&quot;&quot;             TRUE  TRUE     FALSE 
##  6 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;           FALSE TRUE     TRUE  
##  7 &quot;Pain&quot;                               TRUE  FALSE    FALSE 
##  8  &lt;NA&gt;                                NA    NA       NA    
##  9 &quot;Pain&quot;                               TRUE  FALSE    FALSE 
## 10  &lt;NA&gt;                                NA    NA       NA    
## 11 &quot;\&quot;Nausea\&quot;, \&quot;Headache\&quot;&quot;           FALSE TRUE     TRUE  
## 12 &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot; TRUE  TRUE     TRUE  
## 13 &quot;Headache&quot;                           FALSE TRUE     FALSE 
## 14 &quot;\&quot;Headache\&quot;, \&quot;Pain\&quot;, \&quot;Nausea\&quot;&quot; TRUE  TRUE     TRUE  
## 15  &lt;NA&gt;                                NA    NA       NA</code></pre>
<p class="note">
🗒<strong>Side Note:</strong> Some of you may have noticed that we repeated ourselves more than twice in the code chunk above and thought about using <code>across()</code> to remove it. Unfortunately, <code>across()</code> won’t solve our problem in this situation. We will need some of the tools that we learn about in later chapters if we want to remove this repetition.
</p>
<p>And finally, we used the <code>table()</code> function to get a count of how many people reported having a headache:</p>
<div class="sourceCode" id="cb1209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1209-1"><a href="column-wise-operations-in-dplyr.html#cb1209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(symptoms<span class="sc">$</span>headache)</span></code></pre></div>
<pre><code>## 
## FALSE  TRUE 
##     4     8</code></pre>
<p>This is where the example stopped in the chapter on working with character strings. However, what if we wanted to know how many people reported the other symptoms as well? Well, we could repeatedly call the <code>table()</code> function:</p>
<div class="sourceCode" id="cb1211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1211-1"><a href="column-wise-operations-in-dplyr.html#cb1211-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(symptoms<span class="sc">$</span>pain)</span></code></pre></div>
<pre><code>## 
## FALSE  TRUE 
##     4     8</code></pre>
<div class="sourceCode" id="cb1213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1213-1"><a href="column-wise-operations-in-dplyr.html#cb1213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(symptoms<span class="sc">$</span>nausea)</span></code></pre></div>
<pre><code>## 
## FALSE  TRUE 
##     6     6</code></pre>
<p>But, that would cause us to copy and paste repeatedly. Additionally, wouldn’t it be nice to view these counts in a way that makes them easier to compare? One solution would be to use <code>summarise()</code> like this:</p>
<div class="sourceCode" id="cb1215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1215-1"><a href="column-wise-operations-in-dplyr.html#cb1215-1" aria-hidden="true" tabindex="-1"></a>symptoms <span class="sc">%&gt;%</span> </span>
<span id="cb1215-2"><a href="column-wise-operations-in-dplyr.html#cb1215-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1215-3"><a href="column-wise-operations-in-dplyr.html#cb1215-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">had_headache =</span> <span class="fu">sum</span>(headache, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1215-4"><a href="column-wise-operations-in-dplyr.html#cb1215-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">had_pain     =</span> <span class="fu">sum</span>(pain, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1215-5"><a href="column-wise-operations-in-dplyr.html#cb1215-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">had_nausea   =</span> <span class="fu">sum</span>(nausea, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1215-6"><a href="column-wise-operations-in-dplyr.html#cb1215-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   had_headache had_pain had_nausea
##          &lt;int&gt;    &lt;int&gt;      &lt;int&gt;
## 1            8        8          6</code></pre>
<p>This works, but we can do better with <code>across()</code>:</p>
<div class="sourceCode" id="cb1217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1217-1"><a href="column-wise-operations-in-dplyr.html#cb1217-1" aria-hidden="true" tabindex="-1"></a>symptoms <span class="sc">%&gt;%</span> </span>
<span id="cb1217-2"><a href="column-wise-operations-in-dplyr.html#cb1217-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1217-3"><a href="column-wise-operations-in-dplyr.html#cb1217-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1217-4"><a href="column-wise-operations-in-dplyr.html#cb1217-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(headache, pain, nausea),</span>
<span id="cb1217-5"><a href="column-wise-operations-in-dplyr.html#cb1217-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="sc">~</span> <span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1217-6"><a href="column-wise-operations-in-dplyr.html#cb1217-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1217-7"><a href="column-wise-operations-in-dplyr.html#cb1217-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   headache  pain nausea
##      &lt;int&gt; &lt;int&gt;  &lt;int&gt;
## 1        8     8      6</code></pre>
<p>Great! But, wouldn’t it be nice to know the proportion of people with each symptom as well? You may recall that R treats <code>TRUE</code> and <code>FALSE</code> as <code>1</code> and <code>0</code> when used in a mathematical operation. Additionally, you may already be aware that the mean of a set of <code>1</code>’s and <code>0</code>’s is equal to the proportion of <code>1</code>’s in the set. For example, there are three ones and three zeros in the set <code>(1, 1, 1, 0, 0, 0)</code>. The proportion of <code>1</code>’s in the set is 3 out of 6, which is 0.5. Equivalently, the mean value of the set is (1 + 1 + 1 + 0 + 0 + 0) / 6, which equals 3 / 6, which is 0.5. So, when we have dummy variables like <code>headache</code>, <code>pain</code>, and <code>nausea</code> above, passing them to the <code>mean()</code> function returns the proportion of <code>TRUE</code> values. In this case, the proportion of people who had each symptom. We know we can do that calculation like this:</p>
<div class="sourceCode" id="cb1219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1219-1"><a href="column-wise-operations-in-dplyr.html#cb1219-1" aria-hidden="true" tabindex="-1"></a>symptoms <span class="sc">%&gt;%</span> </span>
<span id="cb1219-2"><a href="column-wise-operations-in-dplyr.html#cb1219-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1219-3"><a href="column-wise-operations-in-dplyr.html#cb1219-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">had_headache =</span> <span class="fu">mean</span>(headache, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1219-4"><a href="column-wise-operations-in-dplyr.html#cb1219-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">had_pain     =</span> <span class="fu">mean</span>(pain, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1219-5"><a href="column-wise-operations-in-dplyr.html#cb1219-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">had_nausea   =</span> <span class="fu">mean</span>(nausea, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1219-6"><a href="column-wise-operations-in-dplyr.html#cb1219-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   had_headache had_pain had_nausea
##          &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
## 1        0.667    0.667        0.5</code></pre>
<p>As before, we can do better with the <code>across()</code> function like this:</p>
<div class="sourceCode" id="cb1221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1221-1"><a href="column-wise-operations-in-dplyr.html#cb1221-1" aria-hidden="true" tabindex="-1"></a>symptoms <span class="sc">%&gt;%</span> </span>
<span id="cb1221-2"><a href="column-wise-operations-in-dplyr.html#cb1221-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1221-3"><a href="column-wise-operations-in-dplyr.html#cb1221-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1221-4"><a href="column-wise-operations-in-dplyr.html#cb1221-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(pain, headache, nausea),</span>
<span id="cb1221-5"><a href="column-wise-operations-in-dplyr.html#cb1221-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns  =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1221-6"><a href="column-wise-operations-in-dplyr.html#cb1221-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1221-7"><a href="column-wise-operations-in-dplyr.html#cb1221-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##    pain headache nausea
##   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;
## 1 0.667    0.667    0.5</code></pre>
<p>Now, at this point, we might think, “wouldn’t it be nice to see the count <em>and</em> the proportion in the same result?” Well, we can do that by supplying our purrr-style lambdas as functions in a list of name-function pairs like this:</p>
<div class="sourceCode" id="cb1223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1223-1"><a href="column-wise-operations-in-dplyr.html#cb1223-1" aria-hidden="true" tabindex="-1"></a>symptom_summary <span class="ot">&lt;-</span> symptoms <span class="sc">%&gt;%</span> </span>
<span id="cb1223-2"><a href="column-wise-operations-in-dplyr.html#cb1223-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1223-3"><a href="column-wise-operations-in-dplyr.html#cb1223-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1223-4"><a href="column-wise-operations-in-dplyr.html#cb1223-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(pain, headache, nausea),</span>
<span id="cb1223-5"><a href="column-wise-operations-in-dplyr.html#cb1223-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns  =</span> <span class="fu">list</span>(</span>
<span id="cb1223-6"><a href="column-wise-operations-in-dplyr.html#cb1223-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">count =</span> <span class="sc">~</span> <span class="fu">sum</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1223-7"><a href="column-wise-operations-in-dplyr.html#cb1223-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">prop  =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1223-8"><a href="column-wise-operations-in-dplyr.html#cb1223-8" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb1223-9"><a href="column-wise-operations-in-dplyr.html#cb1223-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1223-10"><a href="column-wise-operations-in-dplyr.html#cb1223-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1223-11"><a href="column-wise-operations-in-dplyr.html#cb1223-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##   pain_count pain_prop headache_count headache_prop nausea_count nausea_prop
##        &lt;int&gt;     &lt;dbl&gt;          &lt;int&gt;         &lt;dbl&gt;        &lt;int&gt;       &lt;dbl&gt;
## 1          8     0.667              8         0.667            6         0.5</code></pre>
<p>In this case, it’s probably fine to stop here. But, what if we had 20 or 30 symptoms that we were analyzing? It would be really difficult to read and compare them arranged horizontally like this, wouldn’t it?</p>
<p>Do you recall us discussing restructuring our results in the <a href="restructuring-data-frames.html#restructuring-data-frames">chapter on restructuring data frames</a>? This is a circumstance where we might want to use <code>pivot_longer()</code> to make our results easier to read and interpret:</p>
<div class="sourceCode" id="cb1225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1225-1"><a href="column-wise-operations-in-dplyr.html#cb1225-1" aria-hidden="true" tabindex="-1"></a>symptom_summary <span class="sc">%&gt;%</span> </span>
<span id="cb1225-2"><a href="column-wise-operations-in-dplyr.html#cb1225-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb1225-3"><a href="column-wise-operations-in-dplyr.html#cb1225-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">everything</span>(),</span>
<span id="cb1225-4"><a href="column-wise-operations-in-dplyr.html#cb1225-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="fu">c</span>(<span class="st">&quot;symptom&quot;</span>, <span class="st">&quot;.value&quot;</span>),</span>
<span id="cb1225-5"><a href="column-wise-operations-in-dplyr.html#cb1225-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb1225-6"><a href="column-wise-operations-in-dplyr.html#cb1225-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   symptom  count  prop
##   &lt;chr&gt;    &lt;int&gt; &lt;dbl&gt;
## 1 pain         8 0.667
## 2 headache     8 0.667
## 3 nausea       6 0.5</code></pre>
<p>There! Isn’t that result much easier to read?</p>
<p>For our final example of this section, let’s return the first example from the <a href="writing-functions.html#writing-functions">writing functions chapter</a>. We started with some simulated study data:</p>
<div class="sourceCode" id="cb1227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1227-1"><a href="column-wise-operations-in-dplyr.html#cb1227-1" aria-hidden="true" tabindex="-1"></a>study <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1227-2"><a href="column-wise-operations-in-dplyr.html#cb1227-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">age       =</span> <span class="fu">c</span>(<span class="dv">32</span>, <span class="dv">30</span>, <span class="dv">32</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">38</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">48</span>, <span class="dv">29</span>, <span class="dv">22</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">28</span>, <span class="dv">24</span>, <span class="dv">25</span>, </span>
<span id="cb1227-3"><a href="column-wise-operations-in-dplyr.html#cb1227-3" aria-hidden="true" tabindex="-1"></a>                <span class="dv">25</span>, <span class="dv">22</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">23</span>, <span class="dv">24</span>, <span class="dv">31</span>, <span class="dv">24</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">26</span>, <span class="dv">23</span>, </span>
<span id="cb1227-4"><a href="column-wise-operations-in-dplyr.html#cb1227-4" aria-hidden="true" tabindex="-1"></a>                <span class="dv">24</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">33</span>, <span class="dv">27</span>, <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">24</span>, <span class="dv">43</span>, <span class="dv">25</span>, <span class="dv">24</span>, </span>
<span id="cb1227-5"><a href="column-wise-operations-in-dplyr.html#cb1227-5" aria-hidden="true" tabindex="-1"></a>                <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">28</span>, <span class="dv">25</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">31</span>, <span class="dv">24</span>, <span class="dv">26</span>, <span class="dv">31</span>, <span class="dv">34</span>, </span>
<span id="cb1227-6"><a href="column-wise-operations-in-dplyr.html#cb1227-6" aria-hidden="true" tabindex="-1"></a>                <span class="dv">26</span>, <span class="dv">25</span>, <span class="dv">27</span>, <span class="cn">NA</span>),</span>
<span id="cb1227-7"><a href="column-wise-operations-in-dplyr.html#cb1227-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">age_group =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb1227-8"><a href="column-wise-operations-in-dplyr.html#cb1227-8" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb1227-9"><a href="column-wise-operations-in-dplyr.html#cb1227-9" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, </span>
<span id="cb1227-10"><a href="column-wise-operations-in-dplyr.html#cb1227-10" aria-hidden="true" tabindex="-1"></a>                <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="cn">NA</span>),</span>
<span id="cb1227-11"><a href="column-wise-operations-in-dplyr.html#cb1227-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">gender    =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb1227-12"><a href="column-wise-operations-in-dplyr.html#cb1227-12" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, </span>
<span id="cb1227-13"><a href="column-wise-operations-in-dplyr.html#cb1227-13" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, </span>
<span id="cb1227-14"><a href="column-wise-operations-in-dplyr.html#cb1227-14" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="cn">NA</span>),</span>
<span id="cb1227-15"><a href="column-wise-operations-in-dplyr.html#cb1227-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">ht_in     =</span> <span class="fu">c</span>(<span class="dv">70</span>, <span class="dv">63</span>, <span class="dv">62</span>, <span class="dv">67</span>, <span class="dv">67</span>, <span class="dv">58</span>, <span class="dv">64</span>, <span class="dv">69</span>, <span class="dv">65</span>, <span class="dv">68</span>, <span class="dv">63</span>, <span class="dv">68</span>, <span class="dv">69</span>, <span class="dv">66</span>, <span class="dv">67</span>, <span class="dv">65</span>, </span>
<span id="cb1227-16"><a href="column-wise-operations-in-dplyr.html#cb1227-16" aria-hidden="true" tabindex="-1"></a>                <span class="dv">64</span>, <span class="dv">75</span>, <span class="dv">67</span>, <span class="dv">63</span>, <span class="dv">60</span>, <span class="dv">67</span>, <span class="dv">64</span>, <span class="dv">73</span>, <span class="dv">62</span>, <span class="dv">69</span>, <span class="dv">67</span>, <span class="dv">62</span>, <span class="dv">68</span>, <span class="dv">66</span>, <span class="dv">66</span>, <span class="dv">62</span>, </span>
<span id="cb1227-17"><a href="column-wise-operations-in-dplyr.html#cb1227-17" aria-hidden="true" tabindex="-1"></a>                <span class="dv">64</span>, <span class="dv">68</span>, <span class="cn">NA</span>, <span class="dv">68</span>, <span class="dv">70</span>, <span class="dv">68</span>, <span class="dv">68</span>, <span class="dv">66</span>, <span class="dv">71</span>, <span class="dv">61</span>, <span class="dv">62</span>, <span class="dv">64</span>, <span class="dv">64</span>, <span class="dv">63</span>, <span class="dv">67</span>, <span class="dv">66</span>, </span>
<span id="cb1227-18"><a href="column-wise-operations-in-dplyr.html#cb1227-18" aria-hidden="true" tabindex="-1"></a>                <span class="dv">69</span>, <span class="dv">76</span>, <span class="cn">NA</span>, <span class="dv">63</span>, <span class="dv">64</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">71</span>, <span class="dv">66</span>, <span class="dv">65</span>, <span class="dv">65</span>, <span class="dv">71</span>, <span class="dv">64</span>, <span class="dv">71</span>, <span class="dv">60</span>, <span class="dv">62</span>, </span>
<span id="cb1227-19"><a href="column-wise-operations-in-dplyr.html#cb1227-19" aria-hidden="true" tabindex="-1"></a>                <span class="dv">61</span>, <span class="dv">69</span>, <span class="dv">66</span>, <span class="cn">NA</span>),</span>
<span id="cb1227-20"><a href="column-wise-operations-in-dplyr.html#cb1227-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">wt_lbs    =</span> <span class="fu">c</span>(<span class="dv">216</span>, <span class="dv">106</span>, <span class="dv">145</span>, <span class="dv">195</span>, <span class="dv">143</span>, <span class="dv">125</span>, <span class="dv">138</span>, <span class="dv">140</span>, <span class="dv">158</span>, <span class="dv">167</span>, <span class="dv">145</span>, <span class="dv">297</span>, <span class="dv">146</span>, </span>
<span id="cb1227-21"><a href="column-wise-operations-in-dplyr.html#cb1227-21" aria-hidden="true" tabindex="-1"></a>                <span class="dv">125</span>, <span class="dv">111</span>, <span class="dv">125</span>, <span class="dv">130</span>, <span class="dv">182</span>, <span class="dv">170</span>, <span class="dv">121</span>, <span class="dv">98</span>, <span class="dv">150</span>, <span class="dv">132</span>, <span class="dv">250</span>, <span class="dv">137</span>, <span class="dv">124</span>, </span>
<span id="cb1227-22"><a href="column-wise-operations-in-dplyr.html#cb1227-22" aria-hidden="true" tabindex="-1"></a>                <span class="dv">186</span>, <span class="dv">148</span>, <span class="dv">134</span>, <span class="dv">155</span>, <span class="dv">122</span>, <span class="dv">142</span>, <span class="dv">110</span>, <span class="dv">132</span>, <span class="dv">188</span>, <span class="dv">176</span>, <span class="dv">188</span>, <span class="dv">166</span>, <span class="dv">136</span>, </span>
<span id="cb1227-23"><a href="column-wise-operations-in-dplyr.html#cb1227-23" aria-hidden="true" tabindex="-1"></a>                <span class="dv">147</span>, <span class="dv">178</span>, <span class="dv">125</span>, <span class="dv">102</span>, <span class="dv">140</span>, <span class="dv">139</span>, <span class="dv">60</span>, <span class="dv">147</span>, <span class="dv">147</span>, <span class="dv">141</span>, <span class="dv">232</span>, <span class="dv">186</span>, <span class="dv">212</span>, </span>
<span id="cb1227-24"><a href="column-wise-operations-in-dplyr.html#cb1227-24" aria-hidden="true" tabindex="-1"></a>                <span class="dv">110</span>, <span class="dv">110</span>, <span class="dv">115</span>, <span class="dv">154</span>, <span class="dv">140</span>, <span class="dv">150</span>, <span class="dv">130</span>, <span class="cn">NA</span>, <span class="dv">171</span>, <span class="dv">156</span>, <span class="dv">92</span>, <span class="dv">122</span>, <span class="dv">102</span>, </span>
<span id="cb1227-25"><a href="column-wise-operations-in-dplyr.html#cb1227-25" aria-hidden="true" tabindex="-1"></a>                <span class="dv">163</span>, <span class="dv">141</span>, <span class="cn">NA</span>),</span>
<span id="cb1227-26"><a href="column-wise-operations-in-dplyr.html#cb1227-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">bmi       =</span> <span class="fu">c</span>(<span class="fl">30.99</span>, <span class="fl">18.78</span>, <span class="fl">26.52</span>, <span class="fl">30.54</span>, <span class="fl">22.39</span>, <span class="fl">26.12</span>, <span class="fl">23.69</span>, <span class="fl">20.67</span>, <span class="fl">26.29</span>, </span>
<span id="cb1227-27"><a href="column-wise-operations-in-dplyr.html#cb1227-27" aria-hidden="true" tabindex="-1"></a>                <span class="fl">25.39</span>, <span class="fl">25.68</span>, <span class="fl">45.15</span>, <span class="fl">21.56</span>, <span class="fl">20.17</span>, <span class="fl">17.38</span>, <span class="fl">20.8</span>, <span class="fl">22.31</span>, <span class="fl">22.75</span>, </span>
<span id="cb1227-28"><a href="column-wise-operations-in-dplyr.html#cb1227-28" aria-hidden="true" tabindex="-1"></a>                <span class="fl">26.62</span>, <span class="fl">21.43</span>, <span class="fl">19.14</span>, <span class="fl">23.49</span>, <span class="fl">22.66</span>, <span class="fl">32.98</span>, <span class="fl">25.05</span>, <span class="fl">18.31</span>, <span class="fl">29.13</span>, </span>
<span id="cb1227-29"><a href="column-wise-operations-in-dplyr.html#cb1227-29" aria-hidden="true" tabindex="-1"></a>                <span class="fl">27.07</span>, <span class="fl">20.37</span>, <span class="fl">25.01</span>, <span class="fl">19.69</span>, <span class="fl">25.97</span>, <span class="fl">18.88</span>, <span class="fl">20.07</span>, <span class="cn">NA</span>, <span class="fl">26.76</span>, </span>
<span id="cb1227-30"><a href="column-wise-operations-in-dplyr.html#cb1227-30" aria-hidden="true" tabindex="-1"></a>                <span class="fl">26.97</span>, <span class="fl">25.24</span>, <span class="fl">20.68</span>, <span class="fl">23.72</span>, <span class="fl">24.82</span>, <span class="fl">23.62</span>, <span class="fl">18.65</span>, <span class="fl">24.03</span>, <span class="fl">23.86</span>, </span>
<span id="cb1227-31"><a href="column-wise-operations-in-dplyr.html#cb1227-31" aria-hidden="true" tabindex="-1"></a>                <span class="fl">10.63</span>, <span class="fl">23.02</span>, <span class="fl">23.72</span>, <span class="fl">20.82</span>, <span class="fl">28.24</span>, <span class="cn">NA</span>, <span class="fl">37.55</span>, <span class="fl">18.88</span>, <span class="fl">18.3</span>, </span>
<span id="cb1227-32"><a href="column-wise-operations-in-dplyr.html#cb1227-32" aria-hidden="true" tabindex="-1"></a>                <span class="fl">19.13</span>, <span class="fl">21.48</span>, <span class="fl">22.59</span>, <span class="fl">24.96</span>, <span class="fl">21.63</span>, <span class="cn">NA</span>, <span class="fl">29.35</span>, <span class="fl">21.76</span>, <span class="fl">17.97</span>, </span>
<span id="cb1227-33"><a href="column-wise-operations-in-dplyr.html#cb1227-33" aria-hidden="true" tabindex="-1"></a>                <span class="fl">22.31</span>, <span class="fl">19.27</span>, <span class="fl">24.07</span>, <span class="fl">22.76</span>, <span class="cn">NA</span>),</span>
<span id="cb1227-34"><a href="column-wise-operations-in-dplyr.html#cb1227-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">bmi_3cat  =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb1227-35"><a href="column-wise-operations-in-dplyr.html#cb1227-35" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, </span>
<span id="cb1227-36"><a href="column-wise-operations-in-dplyr.html#cb1227-36" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">2</span>, <span class="dv">1</span>, </span>
<span id="cb1227-37"><a href="column-wise-operations-in-dplyr.html#cb1227-37" aria-hidden="true" tabindex="-1"></a>                <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="cn">NA</span>)</span>
<span id="cb1227-38"><a href="column-wise-operations-in-dplyr.html#cb1227-38" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb1227-39"><a href="column-wise-operations-in-dplyr.html#cb1227-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb1227-40"><a href="column-wise-operations-in-dplyr.html#cb1227-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_group =</span> <span class="fu">factor</span>(age_group, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Younger than 30&quot;</span>, <span class="st">&quot;30 and Older&quot;</span>)),</span>
<span id="cb1227-41"><a href="column-wise-operations-in-dplyr.html#cb1227-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">gender    =</span> <span class="fu">factor</span>(gender, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Female&quot;</span>, <span class="st">&quot;Male&quot;</span>)),</span>
<span id="cb1227-42"><a href="column-wise-operations-in-dplyr.html#cb1227-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">bmi_3cat  =</span> <span class="fu">factor</span>(bmi_3cat, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Normal&quot;</span>, <span class="st">&quot;Overweight&quot;</span>, <span class="st">&quot;Obese&quot;</span>))</span>
<span id="cb1227-43"><a href="column-wise-operations-in-dplyr.html#cb1227-43" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1227-44"><a href="column-wise-operations-in-dplyr.html#cb1227-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 68 × 7
##      age age_group       gender ht_in wt_lbs   bmi bmi_3cat  
##    &lt;dbl&gt; &lt;fct&gt;           &lt;fct&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt;     
##  1    32 30 and Older    Male      70    216  31.0 Obese     
##  2    30 30 and Older    Female    63    106  18.8 Normal    
##  3    32 30 and Older    Female    62    145  26.5 Overweight
##  4    29 Younger than 30 Male      67    195  30.5 Obese     
##  5    24 Younger than 30 Female    67    143  22.4 Normal    
##  6    38 30 and Older    Female    58    125  26.1 Overweight
##  7    25 Younger than 30 Female    64    138  23.7 Normal    
##  8    24 Younger than 30 Male      69    140  20.7 Normal    
##  9    48 30 and Older    Male      65    158  26.3 Overweight
## 10    29 Younger than 30 Male      68    167  25.4 Overweight
## # … with 58 more rows</code></pre>
<p>And wrote our own function to calculate the number of missing values, mean, median, min, and max for all of the continuous variables:</p>
<div class="sourceCode" id="cb1229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1229-1"><a href="column-wise-operations-in-dplyr.html#cb1229-1" aria-hidden="true" tabindex="-1"></a>continuous_stats <span class="ot">&lt;-</span> <span class="cf">function</span>(var) {</span>
<span id="cb1229-2"><a href="column-wise-operations-in-dplyr.html#cb1229-2" aria-hidden="true" tabindex="-1"></a>  study <span class="sc">%&gt;%</span> </span>
<span id="cb1229-3"><a href="column-wise-operations-in-dplyr.html#cb1229-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb1229-4"><a href="column-wise-operations-in-dplyr.html#cb1229-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">n_miss =</span> <span class="fu">sum</span>(<span class="fu">is.na</span>({{ var }})),</span>
<span id="cb1229-5"><a href="column-wise-operations-in-dplyr.html#cb1229-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">mean   =</span> <span class="fu">mean</span>({{ var }}, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1229-6"><a href="column-wise-operations-in-dplyr.html#cb1229-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">median =</span> <span class="fu">median</span>({{ var }}, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1229-7"><a href="column-wise-operations-in-dplyr.html#cb1229-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">min    =</span> <span class="fu">min</span>({{ var }}, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1229-8"><a href="column-wise-operations-in-dplyr.html#cb1229-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">max    =</span> <span class="fu">max</span>({{ var }}, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1229-9"><a href="column-wise-operations-in-dplyr.html#cb1229-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1229-10"><a href="column-wise-operations-in-dplyr.html#cb1229-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We then used that function to calculate our statistics of interest for each continuous variable:</p>
<div class="sourceCode" id="cb1230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1230-1"><a href="column-wise-operations-in-dplyr.html#cb1230-1" aria-hidden="true" tabindex="-1"></a><span class="fu">continuous_stats</span>(age)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      1  26.9     26    22    48</code></pre>
<div class="sourceCode" id="cb1232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1232-1"><a href="column-wise-operations-in-dplyr.html#cb1232-1" aria-hidden="true" tabindex="-1"></a><span class="fu">continuous_stats</span>(ht_in)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      3  66.0     66    58    76</code></pre>
<div class="sourceCode" id="cb1234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1234-1"><a href="column-wise-operations-in-dplyr.html#cb1234-1" aria-hidden="true" tabindex="-1"></a><span class="fu">continuous_stats</span>(wt_lbs)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      2  148.   142.    60   297</code></pre>
<div class="sourceCode" id="cb1236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1236-1"><a href="column-wise-operations-in-dplyr.html#cb1236-1" aria-hidden="true" tabindex="-1"></a><span class="fu">continuous_stats</span>(bmi)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   n_miss  mean median   min   max
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1      4  23.6   22.9  10.6  45.2</code></pre>
<p>This is definitely an improvement over all the copying and pasting we were doing before we wrote our own function. However, there is still some unnecessary repetition above. One way we can remove this repetition is to use <code>across()</code> like this:</p>
<div class="sourceCode" id="cb1238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1238-1"><a href="column-wise-operations-in-dplyr.html#cb1238-1" aria-hidden="true" tabindex="-1"></a>summary_stats <span class="ot">&lt;-</span> study <span class="sc">%&gt;%</span> </span>
<span id="cb1238-2"><a href="column-wise-operations-in-dplyr.html#cb1238-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1238-3"><a href="column-wise-operations-in-dplyr.html#cb1238-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1238-4"><a href="column-wise-operations-in-dplyr.html#cb1238-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(age, ht_in, wt_lbs, bmi),</span>
<span id="cb1238-5"><a href="column-wise-operations-in-dplyr.html#cb1238-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns  =</span> <span class="fu">list</span>(</span>
<span id="cb1238-6"><a href="column-wise-operations-in-dplyr.html#cb1238-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">n_miss =</span> <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.x)),</span>
<span id="cb1238-7"><a href="column-wise-operations-in-dplyr.html#cb1238-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean   =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1238-8"><a href="column-wise-operations-in-dplyr.html#cb1238-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">median =</span> <span class="sc">~</span> <span class="fu">median</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1238-9"><a href="column-wise-operations-in-dplyr.html#cb1238-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">min    =</span> <span class="sc">~</span> <span class="fu">min</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1238-10"><a href="column-wise-operations-in-dplyr.html#cb1238-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">max    =</span> <span class="sc">~</span> <span class="fu">max</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1238-11"><a href="column-wise-operations-in-dplyr.html#cb1238-11" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb1238-12"><a href="column-wise-operations-in-dplyr.html#cb1238-12" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb1238-13"><a href="column-wise-operations-in-dplyr.html#cb1238-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1238-14"><a href="column-wise-operations-in-dplyr.html#cb1238-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 20
##   age_n_miss age_mean age_median age_min age_max ht_in_n_miss ht_in_mean
##        &lt;int&gt;    &lt;dbl&gt;      &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;        &lt;int&gt;      &lt;dbl&gt;
## 1          1     26.9         26      22      48            3       66.0
## # … with 13 more variables: ht_in_median &lt;dbl&gt;, ht_in_min &lt;dbl&gt;,
## #   ht_in_max &lt;dbl&gt;, wt_lbs_n_miss &lt;int&gt;, wt_lbs_mean &lt;dbl&gt;,
## #   wt_lbs_median &lt;dbl&gt;, wt_lbs_min &lt;dbl&gt;, wt_lbs_max &lt;dbl&gt;, bmi_n_miss &lt;int&gt;,
## #   bmi_mean &lt;dbl&gt;, bmi_median &lt;dbl&gt;, bmi_min &lt;dbl&gt;, bmi_max &lt;dbl&gt;</code></pre>
<p>This method works, but it has the same problem that our symptom summaries had above. Our results are hard to read and interpret because they are arranged horizontally. We can once again pivot this data longer, but it won’t be <em>quite</em> as easy as it was before. Our first attempt might look like this:</p>
<div class="sourceCode" id="cb1240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1240-1"><a href="column-wise-operations-in-dplyr.html#cb1240-1" aria-hidden="true" tabindex="-1"></a>summary_stats <span class="sc">%&gt;%</span> </span>
<span id="cb1240-2"><a href="column-wise-operations-in-dplyr.html#cb1240-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb1240-3"><a href="column-wise-operations-in-dplyr.html#cb1240-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">everything</span>(),</span>
<span id="cb1240-4"><a href="column-wise-operations-in-dplyr.html#cb1240-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="fu">c</span>(<span class="st">&quot;characteristic&quot;</span>, <span class="st">&quot;.value&quot;</span>),</span>
<span id="cb1240-5"><a href="column-wise-operations-in-dplyr.html#cb1240-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&quot;_&quot;</span></span>
<span id="cb1240-6"><a href="column-wise-operations-in-dplyr.html#cb1240-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 12 rows [1, 6, 7, 8,
## 9, 10, 11, 12, 13, 14, 15, 16].</code></pre>
<pre><code>## # A tibble: 12 × 8
##    characteristic     n  mean median   min   max  `in`   lbs
##    &lt;chr&gt;          &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 age                1  26.9   26    22    48    NA     NA 
##  2 ht                NA  NA     NA    NA    NA     3     NA 
##  3 ht                NA  NA     NA    NA    NA    66.0   NA 
##  4 ht                NA  NA     NA    NA    NA    66     NA 
##  5 ht                NA  NA     NA    NA    NA    58     NA 
##  6 ht                NA  NA     NA    NA    NA    76     NA 
##  7 wt                NA  NA     NA    NA    NA    NA      2 
##  8 wt                NA  NA     NA    NA    NA    NA    148.
##  9 wt                NA  NA     NA    NA    NA    NA    142.
## 10 wt                NA  NA     NA    NA    NA    NA     60 
## 11 wt                NA  NA     NA    NA    NA    NA    297 
## 12 bmi                4  23.6   22.9  10.6  45.2  NA     NA</code></pre>
<p>What do you think the problem is here?</p>
<p>Well, we passed an underscore to the <code>names_sep</code> argument. This tells <code>pivot_longer()</code> that that character string on the left side of the underscore should make up the values of the new <code>characteristic</code> column and each unique character string on the right side of the underscore should be used to create a new column name. In the symptoms data, this worked fine because all of the column names followed this pattern (e.g., <code>pain_count</code> and <code>pain_prop</code>). But, do the column names in <code>summary_stats</code> always follow this pattern? What about <code>age_n_miss</code> and <code>ht_in_n_miss</code>? All the extra underscores in the column names makes this pattern ineffective.</p>
<p>There are probably many ways we could address this problem. We think the most straightforward way is probably to go back to the code we used to create <code>summary_stats</code> and use the <code>.names</code> argument to separate the column name and statistic name with a character other than an underscore. Maybe a hyphen instead:</p>
<div class="sourceCode" id="cb1243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1243-1"><a href="column-wise-operations-in-dplyr.html#cb1243-1" aria-hidden="true" tabindex="-1"></a>summary_stats <span class="ot">&lt;-</span> study <span class="sc">%&gt;%</span> </span>
<span id="cb1243-2"><a href="column-wise-operations-in-dplyr.html#cb1243-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb1243-3"><a href="column-wise-operations-in-dplyr.html#cb1243-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb1243-4"><a href="column-wise-operations-in-dplyr.html#cb1243-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols  =</span> <span class="fu">c</span>(age, ht_in, wt_lbs, bmi),</span>
<span id="cb1243-5"><a href="column-wise-operations-in-dplyr.html#cb1243-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns   =</span> <span class="fu">list</span>(</span>
<span id="cb1243-6"><a href="column-wise-operations-in-dplyr.html#cb1243-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">n_miss =</span> <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.x)),</span>
<span id="cb1243-7"><a href="column-wise-operations-in-dplyr.html#cb1243-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean   =</span> <span class="sc">~</span> <span class="fu">mean</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1243-8"><a href="column-wise-operations-in-dplyr.html#cb1243-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">median =</span> <span class="sc">~</span> <span class="fu">median</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1243-9"><a href="column-wise-operations-in-dplyr.html#cb1243-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">min    =</span> <span class="sc">~</span> <span class="fu">min</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb1243-10"><a href="column-wise-operations-in-dplyr.html#cb1243-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">max    =</span> <span class="sc">~</span> <span class="fu">max</span>(.x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1243-11"><a href="column-wise-operations-in-dplyr.html#cb1243-11" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb1243-12"><a href="column-wise-operations-in-dplyr.html#cb1243-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">.names =</span> <span class="st">&quot;{col}-{fn}&quot;</span> <span class="co"># This is the new part of the code</span></span>
<span id="cb1243-13"><a href="column-wise-operations-in-dplyr.html#cb1243-13" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb1243-14"><a href="column-wise-operations-in-dplyr.html#cb1243-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb1243-15"><a href="column-wise-operations-in-dplyr.html#cb1243-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 20
##   `age-n_miss` `age-mean` `age-median` `age-min` `age-max` `ht_in-n_miss`
##          &lt;int&gt;      &lt;dbl&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;          &lt;int&gt;
## 1            1       26.9           26        22        48              3
## # … with 14 more variables: ht_in-mean &lt;dbl&gt;, ht_in-median &lt;dbl&gt;,
## #   ht_in-min &lt;dbl&gt;, ht_in-max &lt;dbl&gt;, wt_lbs-n_miss &lt;int&gt;, wt_lbs-mean &lt;dbl&gt;,
## #   wt_lbs-median &lt;dbl&gt;, wt_lbs-min &lt;dbl&gt;, wt_lbs-max &lt;dbl&gt;, bmi-n_miss &lt;int&gt;,
## #   bmi-mean &lt;dbl&gt;, bmi-median &lt;dbl&gt;, bmi-min &lt;dbl&gt;, bmi-max &lt;dbl&gt;</code></pre>
<p>Now, we can simply pass a hyphen to the <code>names_sep</code> argument to <code>pivot_longer()</code>:</p>
<div class="sourceCode" id="cb1245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1245-1"><a href="column-wise-operations-in-dplyr.html#cb1245-1" aria-hidden="true" tabindex="-1"></a>summary_stats <span class="sc">%&gt;%</span> </span>
<span id="cb1245-2"><a href="column-wise-operations-in-dplyr.html#cb1245-2" aria-hidden="true" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_longer</span>(</span>
<span id="cb1245-3"><a href="column-wise-operations-in-dplyr.html#cb1245-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols      =</span> <span class="fu">everything</span>(),</span>
<span id="cb1245-4"><a href="column-wise-operations-in-dplyr.html#cb1245-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to  =</span> <span class="fu">c</span>(<span class="st">&quot;characteristic&quot;</span>, <span class="st">&quot;.value&quot;</span>),</span>
<span id="cb1245-5"><a href="column-wise-operations-in-dplyr.html#cb1245-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_sep =</span> <span class="st">&quot;-&quot;</span></span>
<span id="cb1245-6"><a href="column-wise-operations-in-dplyr.html#cb1245-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 4 × 6
##   characteristic n_miss  mean median   min   max
##   &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 age                 1  26.9   26    22    48  
## 2 ht_in               3  66.0   66    58    76  
## 3 wt_lbs              2 148.   142.   60   297  
## 4 bmi                 4  23.6   22.9  10.6  45.2</code></pre>
<p>Look at how much easier those results are to read!</p>
<div class="sourceCode" id="cb1247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1247-1"><a href="column-wise-operations-in-dplyr.html#cb1247-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(study, summary_stats, continuous_stats)</span></code></pre></div>
</div>
<div id="across-with-filter" class="section level2" number="35.4">
<h2><span class="header-section-number">35.4</span> Across with filter</h2>
<p>We’ve already discussed <a href="subsetting-data-frames.html#complete-case-analysis">complete case analyses</a> multiple times in this book. That is, including only the rows from our data frame that don’t have any missing values in our analysis. Additionally, we’ve already seen how we can use the <code>filter()</code> function to remove the rows of a <em>single</em> column where the data are missing. For example:</p>
<div class="sourceCode" id="cb1248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1248-1"><a href="column-wise-operations-in-dplyr.html#cb1248-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1248-2"><a href="column-wise-operations-in-dplyr.html#cb1248-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(x))</span></code></pre></div>
<pre><code>## # A tibble: 9 × 4
##     row       x      y      z
##   &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 -0.560   1.22  -1.07 
## 2     3  1.56    0.401 -1.03 
## 3     4  0.0705 NA     -0.729
## 4     5  0.129  -0.556 -0.625
## 5     6  1.72    1.79  NA    
## 6     7  0.461   0.498  0.838
## 7     8 -1.27   -1.97   0.153
## 8     9 -0.687   0.701 -1.14 
## 9    10 -0.446  -0.473  1.25</code></pre>
<p>Notice that row 2 – the row that had a missing value for <code>x</code> – is no longer in the data frame, and we can now easily calculate the mean value of <code>x</code>.</p>
<div class="sourceCode" id="cb1250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1250-1"><a href="column-wise-operations-in-dplyr.html#cb1250-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1250-2"><a href="column-wise-operations-in-dplyr.html#cb1250-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(x)) <span class="sc">%&gt;%</span> </span>
<span id="cb1250-3"><a href="column-wise-operations-in-dplyr.html#cb1250-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(x))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##    mean
##   &lt;dbl&gt;
## 1 0.108</code></pre>
<p>However, we want to remove the rows that have a missing value in <em>any</em> column – not just <code>x</code>. We could get this result using multiple sequential <code>filter()</code> functions like this:</p>
<div class="sourceCode" id="cb1252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1252-1"><a href="column-wise-operations-in-dplyr.html#cb1252-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1252-2"><a href="column-wise-operations-in-dplyr.html#cb1252-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(x)) <span class="sc">%&gt;%</span> </span>
<span id="cb1252-3"><a href="column-wise-operations-in-dplyr.html#cb1252-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(y)) <span class="sc">%&gt;%</span> </span>
<span id="cb1252-4"><a href="column-wise-operations-in-dplyr.html#cb1252-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(z))</span></code></pre></div>
<pre><code>## # A tibble: 7 × 4
##     row      x      y      z
##   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 -0.560  1.22  -1.07 
## 2     3  1.56   0.401 -1.03 
## 3     5  0.129 -0.556 -0.625
## 4     7  0.461  0.498  0.838
## 5     8 -1.27  -1.97   0.153
## 6     9 -0.687  0.701 -1.14 
## 7    10 -0.446 -0.473  1.25</code></pre>
<p>As you can see, rows 2, 4, and 6 – the rows with a missing value for <code>x</code>, <code>y</code>, and <code>z</code> – were dropped.</p>
<p>🚩Of course, in the code chunk above, we have essentially the same code copied more than twice. That’s a red flag that we should be thinking about removing unnecessary repetition from our code.</p>
<p>At this point in the book, our first thought might be to use the <code>across()</code> function, inside the <code>filter()</code> function, to remove <em>all</em> of the rows rows with missing values from our data frame. However, as of <code>dplyr version 1.0.4</code>, using the <code>across()</code> function inside of <code>filter()</code> is deprecated. That means we shouldn’t use it anymore. Instead, we should use the <code>if_any()</code> or <code>if_all()</code> functions, which take the exact same arguments as <code>across()</code>. In the code chunk below, we will show you how to solve this problem, then we will dissect the solution below.</p>
<div class="sourceCode" id="cb1254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1254-1"><a href="column-wise-operations-in-dplyr.html#cb1254-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1254-2"><a href="column-wise-operations-in-dplyr.html#cb1254-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb1254-3"><a href="column-wise-operations-in-dplyr.html#cb1254-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">if_all</span>(</span>
<span id="cb1254-4"><a href="column-wise-operations-in-dplyr.html#cb1254-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(x<span class="sc">:</span>z),</span>
<span id="cb1254-5"><a href="column-wise-operations-in-dplyr.html#cb1254-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns  =</span> <span class="sc">~</span> <span class="sc">!</span><span class="fu">is.na</span>(.x)</span>
<span id="cb1254-6"><a href="column-wise-operations-in-dplyr.html#cb1254-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1254-7"><a href="column-wise-operations-in-dplyr.html#cb1254-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 7 × 4
##     row      x      y      z
##   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 -0.560  1.22  -1.07 
## 2     3  1.56   0.401 -1.03 
## 3     5  0.129 -0.556 -0.625
## 4     7  0.461  0.498  0.838
## 5     8 -1.27  -1.97   0.153
## 6     9 -0.687  0.701 -1.14 
## 7    10 -0.446 -0.473  1.25</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li><p>You can type <code>?dplyr::if_any</code> or <code>?dplyr::if_all</code> into your R console to view the help documentation for this function and follow along with the explanation below.</p></li>
<li><p>We used the <code>if_all()</code> function inside of the <code>filter()</code> function to keep only the rows in our data frame that had nonmissing values for <em>all</em> of the columns <code>x</code>, <code>y</code>, and <code>z</code>.</p></li>
<li><p>We passed the value <code>c(x:z)</code> to the <code>.cols</code> argument. This told R to apply the function passed to the <code>.fns</code> argument to the columns <code>x</code> through <code>z</code> inclusive.</p></li>
<li><p>We used a purrr-style lambda to test whether or not each value of each of the columns passed to <code>.cols</code> is NOT missing.</p></li>
<li><p>Remember, the special <code>.x</code> symbol is just shorthand for each column passed to the <code>.cols</code> argument.</p></li>
</ul>
<p>So, how does this work? Well, first let’s remember that the <code>is.na()</code> function returns <code>TRUE</code> when the value of the vector passed to it is missing and <code>FALSE</code> when it is not missing. For example:</p>
<div class="sourceCode" id="cb1256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1256-1"><a href="column-wise-operations-in-dplyr.html#cb1256-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(df_xyz<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>##  [1] FALSE  TRUE FALSE FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<p>We can then use the <code>!</code> operator to “flip” those results. In other words, to return <code>TRUE</code> when the value of the vector passed to it is <em>not</em> missing and <code>FALSE</code> when it is missing. For example:</p>
<div class="sourceCode" id="cb1258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1258-1"><a href="column-wise-operations-in-dplyr.html#cb1258-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.na</span>(df_xyz<span class="sc">$</span>x)</span></code></pre></div>
<pre><code>##  [1]  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p><a href="subsetting-data-frames.html#the-filter-function">The filter() function</a> then returns the rows from the data frame where the values returned by <code>!is.na()</code> are <code>TRUE</code> and drops the rows where they are <code>FALSE</code>. For example, we can copy and paste the TRUE/FALSE values above to keep only the rows with nonmissing values for <code>x</code>:</p>
<div class="sourceCode" id="cb1260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1260-1"><a href="column-wise-operations-in-dplyr.html#cb1260-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1260-2"><a href="column-wise-operations-in-dplyr.html#cb1260-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 9 × 4
##     row       x      y      z
##   &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 -0.560   1.22  -1.07 
## 2     3  1.56    0.401 -1.03 
## 3     4  0.0705 NA     -0.729
## 4     5  0.129  -0.556 -0.625
## 5     6  1.72    1.79  NA    
## 6     7  0.461   0.498  0.838
## 7     8 -1.27   -1.97   0.153
## 8     9 -0.687   0.701 -1.14 
## 9    10 -0.446  -0.473  1.25</code></pre>
<p>Now, let’s repeat this process for the columns <code>y</code> and <code>z</code> as well.</p>
<div class="sourceCode" id="cb1262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1262-1"><a href="column-wise-operations-in-dplyr.html#cb1262-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.na</span>(df_xyz<span class="sc">$</span>y)</span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
<div class="sourceCode" id="cb1264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1264-1"><a href="column-wise-operations-in-dplyr.html#cb1264-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.na</span>(df_xyz<span class="sc">$</span>z)</span></code></pre></div>
<pre><code>##  [1]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE</code></pre>
<p>Next, let’s stack these results next to each other to make them even easier to view.</p>
<div class="sourceCode" id="cb1266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1266-1"><a href="column-wise-operations-in-dplyr.html#cb1266-1" aria-hidden="true" tabindex="-1"></a>not_missing <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb1266-2"><a href="column-wise-operations-in-dplyr.html#cb1266-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">row =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,</span>
<span id="cb1266-3"><a href="column-wise-operations-in-dplyr.html#cb1266-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x   =</span> <span class="sc">!</span><span class="fu">is.na</span>(df_xyz<span class="sc">$</span>x),</span>
<span id="cb1266-4"><a href="column-wise-operations-in-dplyr.html#cb1266-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y   =</span> <span class="sc">!</span><span class="fu">is.na</span>(df_xyz<span class="sc">$</span>y),</span>
<span id="cb1266-5"><a href="column-wise-operations-in-dplyr.html#cb1266-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">z   =</span> <span class="sc">!</span><span class="fu">is.na</span>(df_xyz<span class="sc">$</span>z)</span>
<span id="cb1266-6"><a href="column-wise-operations-in-dplyr.html#cb1266-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb1266-7"><a href="column-wise-operations-in-dplyr.html#cb1266-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##      row x     y     z    
##    &lt;int&gt; &lt;lgl&gt; &lt;lgl&gt; &lt;lgl&gt;
##  1     1 TRUE  TRUE  TRUE 
##  2     2 FALSE TRUE  TRUE 
##  3     3 TRUE  TRUE  TRUE 
##  4     4 TRUE  FALSE TRUE 
##  5     5 TRUE  TRUE  TRUE 
##  6     6 TRUE  TRUE  FALSE
##  7     7 TRUE  TRUE  TRUE 
##  8     8 TRUE  TRUE  TRUE 
##  9     9 TRUE  TRUE  TRUE 
## 10    10 TRUE  TRUE  TRUE</code></pre>
<p>👆<strong>Here’s what we did above:</strong></p>
<ul>
<li>We created a data frame that contains the value <code>TRUE</code> in each position where <code>df_xyz</code> has a nonmissing value and <code>FALSE</code> in each position where <code>df_xyz</code> has a missing value. We wouldn’t typically create this for our data analysis. We just created it here for teaching purposes.</li>
</ul>
<p>You can think of the data frame of <code>TRUE</code> and <code>FALSE</code> values above as an intermediate product that <code>if_any()</code> and <code>if_all()</code> uses “under the hood” to decide which rows to keep. We think using this data frame as a conceptual model makes it a little easier to understand how <code>if_any()</code> and <code>if_all()</code> differ.</p>
<p><code>if_any()</code> will keep the rows where <em>any</em> value of <code>x</code>, <code>y</code>, <em>or</em> <code>z</code> are <code>TRUE</code>. In this case, there is at least one <code>TRUE</code> value in every row. Therefore, we would expect <code>if_any()</code> to return all rows in our data frame. And, that’s exactly what happens.</p>
<div class="sourceCode" id="cb1268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1268-1"><a href="column-wise-operations-in-dplyr.html#cb1268-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1268-2"><a href="column-wise-operations-in-dplyr.html#cb1268-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb1268-3"><a href="column-wise-operations-in-dplyr.html#cb1268-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">if_any</span>(</span>
<span id="cb1268-4"><a href="column-wise-operations-in-dplyr.html#cb1268-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(x<span class="sc">:</span>z),</span>
<span id="cb1268-5"><a href="column-wise-operations-in-dplyr.html#cb1268-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns  =</span> <span class="sc">~</span> <span class="sc">!</span><span class="fu">is.na</span>(.x)</span>
<span id="cb1268-6"><a href="column-wise-operations-in-dplyr.html#cb1268-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1268-7"><a href="column-wise-operations-in-dplyr.html#cb1268-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##      row       x      y      z
##    &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1     1 -0.560   1.22  -1.07 
##  2     2 NA       0.360 -0.218
##  3     3  1.56    0.401 -1.03 
##  4     4  0.0705 NA     -0.729
##  5     5  0.129  -0.556 -0.625
##  6     6  1.72    1.79  NA    
##  7     7  0.461   0.498  0.838
##  8     8 -1.27   -1.97   0.153
##  9     9 -0.687   0.701 -1.14 
## 10    10 -0.446  -0.473  1.25</code></pre>
<p>On the other hand, <code>if_all()</code> will the keep the rows where <em>all</em> value of <code>x</code>, <code>y</code>, <em>and</em> <code>z</code> are <code>TRUE.</code> In this case, there is at least one <code>FALSE</code> value in rows 2, 4, and 6. Therefore, we would expect <code>if_all()</code> to return all rows in our data frame <em>except</em> rows 2, 4, and 6. That’s exactly what happens, and it’s exaclty the result we want.</p>
<div class="sourceCode" id="cb1270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1270-1"><a href="column-wise-operations-in-dplyr.html#cb1270-1" aria-hidden="true" tabindex="-1"></a>df_xyz <span class="sc">%&gt;%</span> </span>
<span id="cb1270-2"><a href="column-wise-operations-in-dplyr.html#cb1270-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb1270-3"><a href="column-wise-operations-in-dplyr.html#cb1270-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">if_all</span>(</span>
<span id="cb1270-4"><a href="column-wise-operations-in-dplyr.html#cb1270-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.cols =</span> <span class="fu">c</span>(x<span class="sc">:</span>z),</span>
<span id="cb1270-5"><a href="column-wise-operations-in-dplyr.html#cb1270-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.fns  =</span> <span class="sc">~</span> <span class="sc">!</span><span class="fu">is.na</span>(.x)</span>
<span id="cb1270-6"><a href="column-wise-operations-in-dplyr.html#cb1270-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb1270-7"><a href="column-wise-operations-in-dplyr.html#cb1270-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 7 × 4
##     row      x      y      z
##   &lt;int&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1     1 -0.560  1.22  -1.07 
## 2     3  1.56   0.401 -1.03 
## 3     5  0.129 -0.556 -0.625
## 4     7  0.461  0.498  0.838
## 5     8 -1.27  -1.97   0.153
## 6     9 -0.687  0.701 -1.14 
## 7    10 -0.446 -0.473  1.25</code></pre>
<p>Because this is a small, simple example, using <code>if_all()</code> doesn’t actually reduce the number of lines of code we wrote. But again, try to imagine if we added 20 additional columns to our data frame. We would only need to update the value we pass to the <code>.cols</code> argument. This makes our code more concise, easier to maintain, and less error-prone.</p>
</div>
<div id="summary-2" class="section level2" number="35.5">
<h2><span class="header-section-number">35.5</span> Summary</h2>
<p>We are big fans of using <code>across()</code>, <code>if_any()</code>, and <code>if_all()</code> in conjunction with the <code>dplyr</code> verbs. They allows us to remove a lot of the unnecessary repetition from our code in a way that integrates pretty seamlessly with the tools we are already using. Perhaps you will see value in using these functions as well. In the next chapter, we will learn about using <strong>for loops</strong> to remove unnecessary repetition from our code.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="writing-functions.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="writing-for-loops.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/brad-cannell/r4epi/edit/master/chapters/07_part_repeated_operations/03_dplyr_column_wise.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
